import{a as ge}from"./chunk-MAZ6WOLX.js";import{a as me}from"./chunk-5BGZ6L4W.js";import{a as pe}from"./chunk-7G6M72YL.js";import{$ as u,A,F as T,Ha as de,K as ae,Ka as m,O as l,R as re,_ as d,a as oe,b as le,ba as O,ca as P,da as D,db as ue,ea as R,fa as s,ga as r,ha as E,la as N,lb as _e,na as w,pa as h,ta as se,ua as ce,v as k,wa as c,x as M,xa as q,y as S,ya as p,z as Q,za as L}from"./chunk-TOYJLBVG.js";var he=n=>["/movie",n],Ce=(n,e)=>e.value,ve=(n,e)=>e.id;function xe(n,e){n&1&&E(0,"app-loading-spinner")}function be(n,e){if(n&1){let t=N();s(0,"button",11),w("click",function(){let o=M(t).$implicit,a=h(2);return S(a.selectAnswer(o.value))}),c(1),r()}if(n&2){let t=e.$implicit,i=h(2);ce("quiz__option--selected",i.answers()[i.step()]===t.value),l(),p(" ",t.label," ")}}function ye(n,e){if(n&1){let t=N();s(0,"button",12),w("click",function(){M(t);let o=h(2);return S(o.step.set(o.step()-1))}),c(1,"Back"),r()}}function ze(n,e){if(n&1&&(s(0,"div",3),E(1,"div",4),r(),s(2,"div",5)(3,"h2",6),c(4),r(),s(5,"div",7),P(6,be,2,3,"button",8,Ce),r(),s(8,"div",9),d(9,ye,2,0,"button",10),r()()),n&2){let t=h();l(),se("width",t.progressPct(),"%"),l(3),q(t.currentStep().question),l(2),D(t.currentStep().options),l(3),u(t.step()>0?9:-1)}}function Me(n,e){if(n&1&&c(0),n&2){let t=h(3);p(" \xB7 Avg ",t.avgMatchScore(),"% match ")}}function Se(n,e){if(n&1&&(s(0,"p",14),c(1),d(2,Me,1,1),r()),n&2){let t=h(2);l(),p(" Shuffled from ",t.poolSize()," matching films "),l(),u(t.avgMatchScore()>0?2:-1)}}function we(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Spanning ",e))}function Te(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Avg rating: \u2605 ",e))}function qe(n,e){if(n&1&&(s(0,"p",15),c(1),r()),n&2){let t=h(2);l(),L("",t.resultStreamableCount()," of ",t.results().length," free to watch")}}function Ee(n,e){if(n&1&&(s(0,"p",15),c(1),r()),n&2){let t=h(3);l(),p("",t.resultUniqueDirectors()," different directors")}}function Pe(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Average release year: ",e))}function De(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," languages represented"))}function Ie(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," genres covered"))}function ke(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Oldest from ",e))}function Ne(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Top pick: ",e))}function Qe(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Avg age: ",e," years"))}function Ae(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," co-directed films"))}function Oe(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," non-English films"))}function Re(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," silent-era films (pre-1930)"))}function Le(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Median year: ",e))}function Fe(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% free to watch"))}function We(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% co-directed"))}function $e(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Avg title: ",e," characters"))}function Ve(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," rated 8.0+"))}function Ye(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p('Longest: "',e,'"'))}function He(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p('Shortest: "',e,'"'))}function je(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Top director: ",e))}function Be(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p('Newest: "',e,'"'))}function Ue(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p('Oldest: "',e,'"'))}function Ge(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Median rating: \u2605 ",e))}function Je(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% non-English"))}function Ke(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% from silent era"))}function Xe(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% pre-1940"))}function Ze(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," unique directors"))}function et(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Avg ",e," directors per film"))}function tt(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("Avg ",e," genres per film"))}function nt(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% have poster art"))}function it(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% linked to IMDb"))}function ot(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% on YouTube"))}function lt(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e," on Internet Archive"))}function at(n,e){n&1&&(s(0,"p",15),c(1),r()),n&2&&(l(),p("",e,"% on IA"))}function rt(n,e){if(n&1&&(d(0,Ee,2,1,"p",15),d(1,Pe,2,1,"p",15),d(2,De,2,1,"p",15),d(3,Ie,2,1,"p",15),d(4,ke,2,1,"p",15),d(5,Ne,2,1,"p",15),d(6,Qe,2,1,"p",15),d(7,Ae,2,1,"p",15),d(8,Oe,2,1,"p",15),d(9,Re,2,1,"p",15),d(10,Le,2,1,"p",15),d(11,Fe,2,1,"p",15),d(12,We,2,1,"p",15),d(13,$e,2,1,"p",15),d(14,Ve,2,1,"p",15),d(15,Ye,2,1,"p",15),d(16,He,2,1,"p",15),d(17,je,2,1,"p",15),d(18,Be,2,1,"p",15),d(19,Ue,2,1,"p",15),d(20,Ge,2,1,"p",15),d(21,Je,2,1,"p",15),d(22,Ke,2,1,"p",15),d(23,Xe,2,1,"p",15),d(24,Ze,2,1,"p",15),d(25,et,2,1,"p",15),d(26,tt,2,1,"p",15),d(27,nt,2,1,"p",15),d(28,it,2,1,"p",15),d(29,ot,2,1,"p",15),d(30,lt,2,1,"p",15),d(31,at,2,1,"p",15)),n&2){let t,i,o,a,f,v,b,_,C,x,z,I,y,F,W,$,V,Y,H,j,B,U,G,J,K,X,Z,ee,te,ne,ie,g=h(2);u(g.resultUniqueDirectors()>1?0:-1),l(),u((t=g.resultAvgYear())?1:-1,t),l(),u((i=g.resultLanguageCount())?2:-1,i),l(),u((o=g.resultGenreCount())?3:-1,o),l(),u((a=g.resultOldestYear())?4:-1,a),l(),u((f=g.resultHighestRated())?5:-1,f),l(),u((v=g.resultAvgFilmAge())?6:-1,v),l(),u((b=g.resultCoDirectedCount())?7:-1,b),l(),u((_=g.resultNonEnglishCount())?8:-1,_),l(),u((C=g.resultSilentEraCount())?9:-1,C),l(),u((x=g.resultMedianYear())?10:-1,x),l(),u((z=g.resultStreamablePct())?11:-1,z),l(),u((I=g.resultCoDirectedPct())?12:-1,I),l(),u((y=g.resultAvgTitleLength())?13:-1,y),l(),u((F=g.resultHighlyRatedCount())?14:-1,F),l(),u((W=g.resultLongestTitle())?15:-1,W),l(),u(($=g.resultShortestTitle())?16:-1,$),l(),u((V=g.resultTopDirector())?17:-1,V),l(),u((Y=g.resultNewestTitle())?18:-1,Y),l(),u((H=g.resultOldestTitle())?19:-1,H),l(),u((j=g.resultMedianRating())?20:-1,j),l(),u((B=g.resultNonEnglishPct())?21:-1,B),l(),u((U=g.resultSilentEraPct())?22:-1,U),l(),u((G=g.resultPreWarPct())?23:-1,G),l(),u((J=g.resultUniqueDirectorCount())?24:-1,J),l(),u((K=g.resultAvgDirectorCount())?25:-1,K),l(),u((X=g.resultAvgGenreCount())?26:-1,X),l(),u((Z=g.resultPosterCoveragePct())?27:-1,Z),l(),u((ee=g.resultImdbLinkedPct())?28:-1,ee),l(),u((te=g.resultYtStreamablePct())?29:-1,te),l(),u((ne=g.resultIaStreamableCount())?30:-1,ne),l(),u((ie=g.resultIaStreamablePct())?31:-1,ie)}}function st(n,e){if(n&1&&(s(0,"span",18),c(1),r()),n&2){let t=e.$implicit;l(),q(t)}}function ct(n,e){n&1&&(s(0,"span",34),c(1,"Best Match"),r())}function dt(n,e){n&1&&(s(0,"span",35),c(1),r()),n&2&&(l(),p("",e,"% match"))}function ut(n,e){if(n&1&&E(0,"img",36),n&2){let t=h().$implicit;R("src",t.posterUrl,ae)("alt",t.title)}}function _t(n,e){if(n&1&&(s(0,"div",37)(1,"span"),c(2),r()()),n&2){let t=h().$implicit;l(2),q(t.title)}}function mt(n,e){if(n&1&&(s(0,"p",40),c(1),r()),n&2){let t=h().$implicit;l(),p("\u2605 ",t.voteAverage.toFixed(1))}}function pt(n,e){if(n&1&&(s(0,"span",42),c(1),r()),n&2){let t=e.$implicit;l(),q(t)}}function gt(n,e){n&1&&(s(0,"div",41),P(1,pt,2,1,"span",42,O),r()),n&2&&(l(),D(e))}function ft(n,e){if(n&1&&(s(0,"a",20),d(1,ct,2,0,"span",34)(2,dt,2,1,"span",35),d(3,ut,1,2,"img",36)(4,_t,3,1,"div",37),s(5,"div",38)(6,"h3"),c(7),r(),s(8,"p",39),c(9),r(),d(10,mt,2,1,"p",40),d(11,gt,3,0,"div",41),r()()),n&2){let t,i,o=e.$implicit,a=h(2);R("routerLink",de(8,he,o.id)),l(),u(o.id===a.bestMatchId()?1:(t=a.matchScores().get(o.id))?2:-1,t),l(2),u(o.posterUrl?3:4),l(4),q(o.title),l(2),L("",o.year," \xB7 ",o.genres.slice(0,2).join(", ")),l(),u(o.voteAverage>0?10:-1),l(),u((i=a.matchReasons().get(o.id))?11:-1,i)}}function ht(n,e){if(n&1){let t=N();s(0,"div",2)(1,"h2"),c(2,"Your Recommendations"),r(),s(3,"p",13),c(4),r(),d(5,Se,3,2,"p",14),d(6,we,2,1,"p",15),d(7,Te,2,1,"p",15),d(8,qe,2,2,"p",15),s(9,"button",16),w("click",function(){M(t);let o=h();return S(o.showMoreResults.set(!o.showMoreResults()))}),c(10),r(),d(11,rt,32,32),s(12,"div",17),P(13,st,2,1,"span",18,O),r(),s(15,"div",19),P(16,ft,12,10,"a",20,ve),r(),s(18,"div",21)(19,"button",22),w("click",function(){M(t);let o=h();return S(o.shuffle())}),c(20,"Shuffle"),r(),s(21,"button",23),w("click",function(){M(t);let o=h();return S(o.addAllToWatchlist())}),Q(),s(22,"svg",24),E(23,"line",25)(24,"line",26),r(),c(25," Add All to Watchlist "),r(),A(),s(26,"button",27),w("click",function(){M(t);let o=h();return S(o.shareResults())}),Q(),s(27,"svg",28),E(28,"circle",29)(29,"circle",30)(30,"circle",31)(31,"line",32)(32,"line",33),r(),c(33," Share Results "),r(),A(),s(34,"button",12),w("click",function(){M(t);let o=h();return S(o.restart())}),c(35,"Start Over"),r()()()}if(n&2){let t,i,o=h();l(4),p("Based on your preferences, here are ",o.results().length," films we think you'll enjoy:"),l(),u(o.poolSize()>o.results().length?5:-1),l(),u((t=o.resultDecadeRange())?6:-1,t),l(),u((i=o.resultAvgRating())?7:-1,i),l(),u(o.resultStreamableCount()>0?8:-1),l(2),q(o.showMoreResults()?"Less":"More stats"),l(),u(o.showMoreResults()?11:-1),l(2),D(o.selectedPrefs()),l(3),D(o.results())}}var fe=class n{showMoreResults=T(!1);catalog=k(_e);collection=k(me);notifications=k(pe);steps=[{question:"What era interests you most?",options:[{label:"Silent era (pre-1930)",value:"silent"},{label:"Golden age (1930s\u20131940s)",value:"golden"},{label:"Post-war (1950s\u20131960s)",value:"postwar"},{label:"Surprise me!",value:"any"}]},{question:"What genre are you in the mood for?",options:[{label:"Drama",value:"Drama"},{label:"Comedy",value:"Comedy"},{label:"Horror / Thriller",value:"Horror"},{label:"Anything goes",value:"any"}]},{question:"What mood are you looking for?",options:[{label:"Something thought-provoking",value:"deep"},{label:"Light and fun",value:"light"},{label:"Dark and intense",value:"dark"},{label:"No preference",value:"any"}]},{question:"How important are ratings?",options:[{label:"Only the best (8+)",value:"high"},{label:"Well-regarded (6+)",value:"medium"},{label:"Hidden gems \u2014 ratings don't matter",value:"low"}]},{question:"Any language preference?",options:[{label:"English only",value:"english"},{label:"World cinema (non-English)",value:"foreign"},{label:"No preference",value:"any"}]},{question:"Must it be free to watch?",options:[{label:"Yes, free streaming only",value:"free"},{label:"No, show me everything",value:"any"}]}];step=T(0);answers=T({});showResults=T(!1);results=T([]);poolSize=T(0);bestMatchId=m(()=>{let e=this.matchScores();if(e.size<2)return null;let t=null,i=0;for(let[o,a]of e)a>i&&(i=a,t=o);return i>50?t:null});resultDecadeRange=m(()=>{let e=this.results();if(e.length<2)return null;let t=new Set(e.map(o=>Math.floor(o.year/10)*10));if(t.size<2)return null;let i=[...t].sort((o,a)=>o-a);return`${i[0]}s\u2013${i[i.length-1]}s`});resultAvgRating=m(()=>{let t=this.results().filter(i=>i.voteAverage>0);return t.length===0?null:(t.reduce((i,o)=>i+o.voteAverage,0)/t.length).toFixed(1)});resultStreamableCount=m(()=>this.results().filter(e=>e.isStreamable).length);resultUniqueDirectors=m(()=>{let e=new Set;for(let t of this.results())for(let i of t.directors)e.add(i);return e.size});resultGenreCount=m(()=>{let e=this.results();if(e.length<2)return null;let t=new Set;for(let i of e)for(let o of i.genres)t.add(o);return t.size>2?t.size:null});resultLanguageCount=m(()=>{let e=this.results();if(e.length<2)return null;let t=new Set(e.map(i=>i.language).filter(Boolean));return t.size>1?t.size:null});resultAvgYear=m(()=>{let e=this.results();return e.length<2?null:Math.round(e.reduce((t,i)=>t+i.year,0)/e.length)});resultHighestRated=m(()=>{let e=this.results();if(e.length<2)return null;let t=e.filter(a=>a.voteAverage>0);if(t.length===0)return null;let i=t.reduce((a,f)=>f.voteAverage>a.voteAverage?f:a);return`${i.title.length>25?i.title.slice(0,23)+"...":i.title} (${i.voteAverage.toFixed(1)})`});resultAvgFilmAge=m(()=>{let e=this.results();if(e.length<2)return null;let t=new Date().getFullYear();return Math.round(e.reduce((i,o)=>i+(t-o.year),0)/e.length)});resultCoDirectedCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(i=>i.directors.length>1).length;return t>0?t:null});resultNonEnglishCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(i=>i.language&&i.language!=="English"&&i.language!=="en").length;return t>0?t:null});resultSilentEraCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(i=>i.year<1930).length;return t>0?t:null});resultStreamablePct=m(()=>{let e=this.results();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.isStreamable).length/e.length*100);return t>0?t:null});resultMedianYear=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.map(o=>o.year).sort((o,a)=>o-a),i=Math.floor(t.length/2);return t.length%2===0?Math.round((t[i-1]+t[i])/2):t[i]});resultHighlyRatedCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(i=>i.voteAverage>=8).length;return t>0?t:null});resultAvgTitleLength=m(()=>{let e=this.results();return e.length<3?null:Math.round(e.reduce((t,i)=>t+i.title.length,0)/e.length)});resultCoDirectedPct=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(o=>o.directors.length>1).length,i=Math.round(t/e.length*100);return i>0&&i<100?i:null});resultOldestYear=m(()=>{let e=this.results();if(e.length<2)return null;let t=Math.min(...e.map(o=>o.year));return Math.max(...e.map(o=>o.year))-t>=5?t:null});resultLongestTitle=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.reduce((i,o)=>i.title.length>=o.title.length?i:o);return t.title.length>=20?t.title:null});resultShortestTitle=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.reduce((i,o)=>i.title.length<=o.title.length?i:o);return t.title.length<=10?t.title:null});resultTopDirector=m(()=>{let e=this.results();if(e.length<3)return null;let t=new Map;for(let o of e)for(let a of o.directors)t.set(a,(t.get(a)??0)+1);let i=[...t.entries()].sort((o,a)=>a[1]-o[1])[0];return i&&i[1]>=2?i[0]:null});resultSilentEraPct=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(o=>o.year<1930).length,i=Math.round(t/e.length*100);return i>0&&i<100?i:null});resultAvgGenreCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.reduce((i,o)=>i+o.genres.length,0)/e.length;return t>=1.5?t.toFixed(1):null});resultPosterCoveragePct=m(()=>{let e=this.results();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.posterUrl).length/e.length*100);return t>0&&t<100?t:null});resultImdbLinkedPct=m(()=>{let e=this.results();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.imdbId).length/e.length*100);return t>0&&t<100?t:null});resultYtStreamablePct=m(()=>{let e=this.results();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.youtubeId).length/e.length*100);return t>0&&t<100?t:null});resultAvgDirectorCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.reduce((i,o)=>i+o.directors.length,0)/e.length;return t>=1.1?t.toFixed(1):null});resultUniqueDirectorCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=new Set;for(let i of e)for(let o of i.directors)t.add(o);return t.size>=3?t.size:null});resultPreWarPct=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(o=>o.year<1940).length,i=Math.round(t/e.length*100);return i>0&&i<100?i:null});resultNonEnglishPct=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(o=>o.language&&o.language!=="English"&&o.language!=="en").length,i=Math.round(t/e.length*100);return i>0&&i<100?i:null});resultMedianRating=m(()=>{let e=this.results().filter(a=>a.voteAverage>0);if(e.length<3)return null;let t=e.map(a=>a.voteAverage).sort((a,f)=>a-f),i=Math.floor(t.length/2);return(t.length%2===0?(t[i-1]+t[i])/2:t[i]).toFixed(1)});resultOldestTitle=m(()=>{let e=this.results();return e.length<2?null:e.reduce((i,o)=>i.year<=o.year?i:o).title});resultNewestTitle=m(()=>{let e=this.results();return e.length<2?null:e.reduce((i,o)=>i.year>=o.year?i:o).title});resultIaStreamableCount=m(()=>{let e=this.results();if(e.length<3)return null;let t=e.filter(i=>i.internetArchiveId).length;return t>0?t:null});resultIaStreamablePct=m(()=>{let e=this.results();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.internetArchiveId).length/e.length*100);return t>0&&t<100?t:null});avgMatchScore=m(()=>{let e=this.matchScores();if(e.size===0)return 0;let t=[...e.values()].reduce((i,o)=>i+o,0);return Math.round(t/e.size)});currentStep=m(()=>this.steps[this.step()]);progressPct=m(()=>(this.step()+1)/this.steps.length*100);selectedPrefs=m(()=>{let e=this.answers(),t=[];for(let i=0;i<this.steps.length;i++){let o=e[i];if(o&&o!=="any"){let a=this.steps[i].options.find(f=>f.value===o);a&&t.push(a.label)}}return t});matchScores=m(()=>{let e=this.answers(),t=this.results(),i=new Map,o=Object.values(e).filter(a=>a!=="any").length;if(o===0)return i;for(let a of t){let f=0,v=e[0];(v==="silent"&&a.year<1930||v==="golden"&&a.year>=1930&&a.year<1950||v==="postwar"&&a.year>=1950)&&f++;let b=e[1];b&&b!=="any"&&a.genres.some(y=>y.toLowerCase().includes(b.toLowerCase()))&&f++;let _=e[2];(_==="light"&&a.genres.some(y=>["Comedy","Musical","Romance","Animation"].includes(y))||_==="dark"&&a.genres.some(y=>["Horror","Thriller","Crime","War","Mystery"].includes(y))||_==="deep"&&a.genres.some(y=>["Drama","History","Documentary"].includes(y)))&&f++;let C=e[3];(C==="high"&&a.voteAverage>=8||C==="medium"&&a.voteAverage>=6)&&f++;let x=e[4];(x==="english"&&(!a.language||a.language==="English")||x==="foreign"&&a.language&&a.language!=="English")&&f++,e[5]==="free"&&a.isStreamable&&f++;let I=Math.round(f/o*100);i.set(a.id,Math.min(I,100))}return i});matchReasons=m(()=>{let e=this.answers(),t=this.results(),i=new Map;for(let o of t){let a=[],f=e[0];f==="silent"&&o.year<1930?a.push("Silent era"):f==="golden"&&o.year>=1930&&o.year<1950?a.push("Golden age"):f==="postwar"&&o.year>=1950&&a.push("Post-war");let v=e[1];if(v&&v!=="any"){let b=o.genres.find(_=>_.toLowerCase().includes(v.toLowerCase()));b&&a.push(b)}o.voteAverage>=8?a.push("Highly rated"):o.voteAverage>=7&&a.push("Well rated"),o.language&&o.language!=="English"&&a.push(o.language),o.isStreamable&&a.push("Free"),i.set(o.id,a.slice(0,3))}return i});ngOnInit(){this.catalog.load()}selectAnswer(e){this.answers.update(t=>le(oe({},t),{[this.step()]:e})),this.step()<this.steps.length-1?this.step.update(t=>t+1):this.computeResults()}shuffle(){this.computeResults()}addAllToWatchlist(){let e=this.results(),t=0;for(let i of e)!this.collection.isInWatchlist(i.id)&&!this.collection.isWatched(i.id)&&(this.collection.addToWatchlist(i.id),t++);t>0?this.notifications.show(`Added ${t} film${t>1?"s":""} to watchlist`,"success"):this.notifications.show("All films already in your collection","info")}shareResults(){let e=this.results();if(e.length===0)return;let i=`My BW Cinema quiz picks:

${e.map(o=>`${o.title} (${o.year})`).join(`
`)}

Take the quiz: ${window.location.origin}/quiz`;navigator.clipboard.writeText(i).then(()=>{this.notifications.show("Results copied to clipboard","success")}).catch(()=>{this.notifications.show("Failed to copy","error")})}restart(){this.step.set(0),this.answers.set({}),this.showResults.set(!1),this.results.set([])}computeResults(){let e=this.answers(),t=this.catalog.movies().filter(_=>_.isStreamable),i=e[0];i==="silent"?t=t.filter(_=>_.year<1930):i==="golden"?t=t.filter(_=>_.year>=1930&&_.year<1950):i==="postwar"&&(t=t.filter(_=>_.year>=1950));let o=e[1];o&&o!=="any"&&(t=t.filter(_=>_.genres.some(C=>C.toLowerCase().includes(o.toLowerCase()))));let a=e[2];if(a==="light"){let _=["comedy","musical","romance","animation"];t=t.filter(C=>C.genres.some(x=>_.some(z=>x.toLowerCase().includes(z))))}else if(a==="dark"){let _=["horror","thriller","crime","war","mystery","noir"];t=t.filter(C=>C.genres.some(x=>_.some(z=>x.toLowerCase().includes(z))))}else if(a==="deep"){let _=["drama","history","documentary"];t=t.filter(C=>C.genres.some(x=>_.some(z=>x.toLowerCase().includes(z))))}let f=e[3];f==="high"?t=t.filter(_=>_.voteAverage>=8):f==="medium"&&(t=t.filter(_=>_.voteAverage>=6));let v=e[4];v==="english"?t=t.filter(_=>!_.language||_.language==="English"):v==="foreign"&&(t=t.filter(_=>_.language&&_.language!=="English")),e[5]==="free"&&(t=t.filter(_=>_.isStreamable)),this.poolSize.set(t.length);for(let _=t.length-1;_>0;_--){let C=Math.floor(Math.random()*(_+1));[t[_],t[C]]=[t[C],t[_]]}this.results.set(t.slice(0,5)),this.showResults.set(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=re({type:n,selectors:[["app-quiz"]],decls:8,vars:1,consts:[[1,"quiz","container"],[1,"quiz__subtitle"],[1,"quiz__results"],[1,"quiz__progress"],[1,"quiz__progress-bar"],[1,"quiz__step"],[1,"quiz__question"],[1,"quiz__options"],[1,"quiz__option",3,"quiz__option--selected"],[1,"quiz__nav"],[1,"btn-ghost"],[1,"quiz__option",3,"click"],[1,"btn-ghost",3,"click"],[1,"quiz__results-subtitle"],[1,"quiz__pool-note"],[1,"quiz__decade-range"],[1,"quiz__more-toggle",3,"click"],[1,"quiz__prefs"],[1,"quiz__pref-chip"],[1,"quiz__result-grid"],[1,"quiz__result-card",3,"routerLink"],[1,"quiz__result-actions"],[1,"btn-secondary",3,"click"],[1,"quiz__add-all",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"quiz__share-btn",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"quiz__best-match"],[1,"quiz__match-score"],["loading","lazy",3,"src","alt"],[1,"quiz__poster-placeholder"],[1,"quiz__result-info"],[1,"quiz__result-meta"],[1,"quiz__result-rating"],[1,"quiz__match-tags"],[1,"quiz__match-tag"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"h1"),c(2,"What Should I Watch?"),r(),s(3,"p",1),c(4,"Answer a few questions and we'll recommend the perfect classic film."),r(),d(5,xe,1,0,"app-loading-spinner")(6,ze,10,4)(7,ht,36,7,"div",2),r()),t&2&&(l(5),u(i.catalog.loading()?5:i.showResults()?7:6))},dependencies:[ue,ge],styles:[".quiz[_ngcontent-%COMP%]{padding:var(--space-xl) 0;max-width:700px}.quiz__subtitle[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-xl)}.quiz__progress[_ngcontent-%COMP%]{height:4px;background-color:var(--bg-raised);border-radius:2px;margin-bottom:var(--space-xl);overflow:hidden}.quiz__progress-bar[_ngcontent-%COMP%]{height:100%;background-color:var(--accent-gold);border-radius:2px;transition:width .3s ease}.quiz__step[_ngcontent-%COMP%]{text-align:center}.quiz__question[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.quiz__options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);max-width:400px;margin:0 auto var(--space-xl)}.quiz__option[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);color:var(--text-primary);font-size:1rem;cursor:pointer;transition:all .2s;text-align:left}.quiz__option[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);background-color:var(--accent-gold-dim)}.quiz__option--selected[_ngcontent-%COMP%]{border-color:var(--accent-gold);background-color:var(--accent-gold-dim);color:var(--accent-gold);font-weight:600}.quiz__nav[_ngcontent-%COMP%]{display:flex;justify-content:center}.quiz__results[_ngcontent-%COMP%]{text-align:center}.quiz__results-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 var(--space-xl)}.quiz__prefs[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);justify-content:center;flex-wrap:wrap;margin-bottom:var(--space-lg)}.quiz__pref-chip[_ngcontent-%COMP%]{font-size:.75rem;padding:3px 10px;border-radius:10px;background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary)}.quiz__result-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:var(--space-md);margin-bottom:var(--space-xl);text-align:left}.quiz__result-card[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:transform .2s}.quiz__result-card[_ngcontent-%COMP%]:hover{color:inherit}@media(hover:hover)and (pointer:fine){.quiz__result-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}}.quiz__match-score[_ngcontent-%COMP%]{display:inline-block;font-size:.7rem;font-weight:700;color:var(--accent-gold);background:var(--accent-gold-dim);padding:2px 8px;border-radius:8px;margin-bottom:var(--space-xs)}.quiz__best-match[_ngcontent-%COMP%]{display:inline-block;font-size:.7rem;font-weight:700;color:#fff;background:#198754e6;padding:2px 8px;border-radius:8px;margin-bottom:var(--space-xs)}.quiz__result-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius-lg);box-shadow:var(--shadow-poster);margin-bottom:var(--space-sm)}.quiz__poster-placeholder[_ngcontent-%COMP%]{width:100%;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);color:var(--text-tertiary);text-align:center;padding:var(--space-sm);margin-bottom:var(--space-sm)}.quiz__result-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;margin:0 0 2px}.quiz__result-meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);margin:0}.quiz__result-rating[_ngcontent-%COMP%]{font-size:.85rem;color:var(--accent-gold);font-weight:700;margin:4px 0 0}.quiz__match-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;margin-top:4px}.quiz__match-tag[_ngcontent-%COMP%]{font-size:.65rem;padding:1px 6px;border-radius:6px;background:var(--accent-gold-dim);color:var(--accent-gold);font-weight:600;white-space:nowrap}.quiz__result-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:center;flex-wrap:wrap}.quiz__add-all[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:var(--space-sm) var(--space-lg);background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius-lg);color:var(--accent-gold);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.quiz__add-all[_ngcontent-%COMP%]:hover{background:var(--accent-gold);color:var(--bg-deep)}.quiz__share-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:var(--space-sm) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);color:var(--text-secondary);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.quiz__share-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.quiz__pool-note[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);margin:calc(-1 * var(--space-md)) 0 var(--space-lg)}.quiz__decade-range[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);margin:0 0 var(--space-sm)}.quiz__more-toggle[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-tertiary);font-size:.75rem;cursor:pointer;padding:var(--space-xs) 0;opacity:.7}.quiz__more-toggle[_ngcontent-%COMP%]:hover{opacity:1}@media(max-width:480px){.quiz__result-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"],changeDetection:0})};export{fe as QuizComponent};
