import{a as J}from"./chunk-3FLOHTQZ.js";import{a as K}from"./chunk-SATL3JCH.js";import{a as q,b as Y}from"./chunk-TWPBZPC6.js";import{a as H}from"./chunk-HAGFLECC.js";import{a as G}from"./chunk-VYUST5ET.js";import"./chunk-JVUEOQ2T.js";import{a as B}from"./chunk-U6UKIARX.js";import{$ as g,$a as W,Aa as b,Ba as E,Da as L,Ea as V,F as w,Fa as U,Ja as P,K as D,Ma as m,O as r,Oa as j,R as N,_ as p,ba as R,ca as A,da as k,ea as f,fa as i,fb as $,ga as a,ha as u,la as T,na as y,pa as s,v as M,va as F,wa as z,x,y as C,ya as c,za as v}from"./chunk-SA65F7OW.js";var Z=n=>["/genre",n],tt=n=>["/movie",n],et=n=>["/decade",n],nt=n=>["/director",n],ot=(n,e)=>e.decade,it=(n,e)=>e.name;function at(n,e){if(n&1){let t=T();i(0,"div",0)(1,"div",1)(2,"p"),c(3),a(),i(4,"button",2),y("click",function(){x(t);let l=s();return C(l.catalog.retry())}),c(5,"Try Again"),a()()()}n&2&&(r(3),v(e))}function rt(n,e){n&1&&(i(0,"div",0),u(1,"app-loading-spinner"),a())}function ct(n,e){if(n&1&&u(0,"img",5),n&2){let t=s(2);f("src",t.photoUrl(),D)("alt",t.name())}}function lt(n,e){if(n&1&&(i(0,"div",6)(1,"span"),c(2),a()()),n&2){let t=s(2);r(2),v(t.name()[0])}}function dt(n,e){if(n&1&&(i(0,"div",12)(1,"span",13),c(2),a(),i(3,"span",14),c(4,"Best Decade"),a()()),n&2){let t=s(3);r(2),b("",t.bestDecade(),"s")}}function st(n,e){if(n&1&&(i(0,"a",25),c(1),a()),n&2){let t=e.$implicit;f("routerLink",P(2,Z,t)),r(),v(t)}}function mt(n,e){if(n&1&&(i(0,"div",15),A(1,st,2,4,"a",25,R),a()),n&2){let t=s(3);r(),k(t.topGenres())}}function _t(n,e){if(n&1&&u(0,"img",26),n&2){let t=s();f("src",t.posterUrl,D)("alt",t.title)}}function pt(n,e){n&1&&(i(0,"div",27),c(1,"\u2605"),a())}function gt(n,e){if(n&1&&(i(0,"a",16),p(1,_t,1,2,"img",26)(2,pt,2,0,"div",27),i(3,"div",28)(4,"span",29),c(5,"Highest Rated Film"),a(),i(6,"span",30),c(7),a(),i(8,"span",31),c(9),a()()()),n&2){let t=e;f("routerLink",P(5,tt,t.id)),r(),g(t.posterUrl?1:2),r(6),v(t.title),r(2),E("",t.year," \xB7 \u2605 ",t.voteAverage.toFixed(1))}}function vt(n,e){if(n&1&&(i(0,"a",33)(1,"div",34)(2,"span",35),c(3),a()(),i(4,"span",36),c(5),a(),i(6,"span",37),c(7),a()()),n&2){let t=e.$implicit;f("routerLink",P(6,et,t.decade)),r(),F("height",t.barHeight,"px"),r(2),v(t.count),r(2),b("",t.decade,"s"),r(2),v(t.avgRating)}}function ft(n,e){if(n&1&&(i(0,"div",17)(1,"h3"),c(2,"Career Timeline"),a(),i(3,"div",32),A(4,vt,8,8,"a",33,ot),a()()),n&2){let t=s(3);r(4),k(t.careerTimeline())}}function ut(n,e){if(n&1&&(i(0,"a",39),c(1),i(2,"span",40),c(3),a()()),n&2){let t=e.$implicit;f("routerLink",P(3,nt,t.name)),r(),b(" ",t.name," "),r(2),v(t.count)}}function xt(n,e){if(n&1&&(i(0,"div",18)(1,"h3"),c(2,"Frequent Collaborators"),a(),i(3,"div",38),A(4,ut,4,5,"a",39,it),a()()),n&2){let t=s(3);r(4),k(t.topDirectors())}}function Ct(n,e){if(n&1){let t=T();i(0,"button",47),y("click",function(){x(t);let l=s(4);return C(l.addUnwatchedToWatchlist())}),c(1),a()}if(n&2){let t=s(4);r(),b(" Add ",t.unwatchedFilms().length," unwatched to watchlist ")}}function bt(n,e){if(n&1&&(i(0,"div",19)(1,"div",41)(2,"span",42),c(3),a(),i(4,"span",43),c(5),a()(),i(6,"div",44),u(7,"div",45),a(),p(8,Ct,2,1,"button",46),a()),n&2){let t=s(3);r(3),E("",t.watchedCount()," of ",t.films().length," watched"),r(2),b("",t.completionPct(),"%"),r(2),F("width",t.completionPct(),"%"),r(),g(t.unwatchedFilms().length>0?8:-1)}}function ht(n,e){if(n&1&&u(0,"app-movie-grid",24),n&2){let t=s(3);f("movies",t.sortedFilms())}}function Mt(n,e){if(n&1&&u(0,"app-movie-list",24),n&2){let t=s(3);f("movies",t.sortedFilms())}}function wt(n,e){if(n&1){let t=T();i(0,"div",11)(1,"div",12)(2,"span",13),c(3),a(),i(4,"span",14),c(5,"Active Years"),a()(),i(6,"div",12)(7,"span",13),c(8),a(),i(9,"span",14),c(10,"Avg. Rating"),a()(),i(11,"div",12)(12,"span",13),c(13),a(),i(14,"span",14),c(15,"Free to Watch"),a()(),p(16,dt,5,1,"div",12),a(),p(17,mt,3,0,"div",15),p(18,gt,10,7,"a",16),p(19,ft,6,0,"div",17),p(20,xt,6,0,"div",18),p(21,bt,9,6,"div",19),i(22,"div",20)(23,"div",21)(24,"button",22),y("click",function(){x(t);let l=s(2);return C(l.sortMode.set("rating"))}),c(25,"Top Rated"),a(),i(26,"button",22),y("click",function(){x(t);let l=s(2);return C(l.sortMode.set("chronological"))}),c(27,"Chronological"),a()(),i(28,"app-view-toggle",23),U("modeChange",function(l){x(t);let d=s(2);return V(d.viewMode,l)||(d.viewMode=l),C(l)}),a()(),p(29,ht,1,1,"app-movie-grid",24)(30,Mt,1,1,"app-movie-list",24)}if(n&2){let t,o=s(2);r(3),v(o.yearRange()),r(5),v(o.avgRating()),r(5),v(o.streamableCount()),r(3),g(o.bestDecade()?16:-1),r(),g(o.topGenres().length>0?17:-1),r(),g((t=o.bestFilm())?18:-1,t),r(),g(o.careerTimeline().length>1?19:-1),r(),g(o.topDirectors().length>0?20:-1),r(),g(o.watchedCount()>0||o.unwatchedFilms().length>0?21:-1),r(3),z("actor__sort-btn--active",o.sortMode()==="rating"),r(2),z("actor__sort-btn--active",o.sortMode()==="chronological"),r(2),L("mode",o.viewMode),r(),g(o.viewMode()==="grid"?29:30)}}function yt(n,e){n&1&&(i(0,"div",10)(1,"p"),c(2,"No films found for this actor in our catalog."),a(),i(3,"a",48),c(4,"Browse Films"),a()())}function Pt(n,e){if(n&1&&(i(0,"div",0)(1,"div",3)(2,"div",4),p(3,ct,1,2,"img",5)(4,lt,3,1,"div",6),i(5,"div")(6,"p",7),c(7,"Actor"),a(),i(8,"h1",8),c(9),a(),i(10,"p",9),c(11),a()()()(),p(12,wt,31,15)(13,yt,5,0,"div",10),a()),n&2){let t=s();r(3),g(t.photoUrl()?3:4),r(6),v(t.name()),r(2),E("",t.films().length," film",t.films().length!==1?"s":""," in catalog"),r(),g(t.films().length>0?12:13)}}var Q=class n{name=j.required();catalog=M(B);collectionService=M(G);movieService=M(J);titleService=M(W);viewMode=w("grid");sortMode=w("rating");photoUrl=w(null);actorFilmIds=w(new Set);films=m(()=>{let e=this.actorFilmIds();return e.size===0?[]:this.catalog.movies().filter(t=>e.has(t.id)).sort((t,o)=>o.voteAverage-t.voteAverage)});sortedFilms=m(()=>{let e=[...this.films()];return this.sortMode()==="chronological"?e.sort((t,o)=>t.year-o.year):e.sort((t,o)=>o.voteAverage-t.voteAverage)});watchedCount=m(()=>{let e=this.collectionService.watchedIds();return this.films().filter(t=>e.has(t.id)).length});unwatchedFilms=m(()=>{let e=this.collectionService.watchedIds(),t=this.collectionService.watchlistIds();return this.films().filter(o=>!e.has(o.id)&&!t.has(o.id))});completionPct=m(()=>{let e=this.films().length;return e>0?Math.round(this.watchedCount()/e*100):0});yearRange=m(()=>{let e=this.films();if(e.length===0)return"\u2014";let t=e.map(d=>d.year),o=Math.min(...t),l=Math.max(...t);return o===l?`${o}`:`${o}\u2013${l}`});avgRating=m(()=>{let e=this.films().filter(t=>t.voteAverage>0);return e.length===0?"\u2014":(e.reduce((t,o)=>t+o.voteAverage,0)/e.length).toFixed(1)});streamableCount=m(()=>this.films().filter(e=>e.isStreamable).length);topGenres=m(()=>{let e=new Map;for(let t of this.films())for(let o of t.genres)e.set(o,(e.get(o)??0)+1);return[...e.entries()].sort((t,o)=>o[1]-t[1]).slice(0,6).map(([t])=>t)});bestDecade=m(()=>{let e=this.films();if(e.length<3)return null;let t=new Map;for(let d of e){let _=Math.floor(d.year/10)*10,h=t.get(_)??{count:0,totalRating:0};h.count++,h.totalRating+=d.voteAverage,t.set(_,h)}let o=[...t.entries()].filter(([,d])=>d.count>=2);return o.length===0?null:o.reduce((d,_)=>_[1].totalRating/_[1].count>d[1].totalRating/d[1].count?_:d)[0]});bestFilm=m(()=>{let e=this.films().filter(t=>t.voteAverage>0);return e.length===0?null:e.reduce((t,o)=>o.voteAverage>t.voteAverage?o:t)});careerTimeline=m(()=>{let e=this.films();if(e.length===0)return[];let t=new Map;for(let l of e){let d=Math.floor(l.year/10)*10,_=t.get(d)??{count:0,totalRating:0,ratedCount:0};_.count++,l.voteAverage>0&&(_.totalRating+=l.voteAverage,_.ratedCount++),t.set(d,_)}let o=Math.max(1,...[...t.values()].map(l=>l.count));return[...t.entries()].map(([l,d])=>({decade:l,count:d.count,avgRating:d.ratedCount>0?(d.totalRating/d.ratedCount).toFixed(1):"\u2014",barHeight:Math.max(20,d.count/o*80)})).sort((l,d)=>l.decade-d.decade)});topDirectors=m(()=>{let e=new Map;for(let t of this.films())for(let o of t.directors)e.set(o,(e.get(o)??0)+1);return[...e.entries()].filter(([,t])=>t>=2).sort((t,o)=>o[1]-t[1]).slice(0,5).map(([t,o])=>({name:t,count:o}))});async ngOnInit(){await this.catalog.load(),this.titleService.setTitle(`${this.name()} \u2014 BW Cinema`);let e=this.name().toLowerCase(),t=this.catalog.movies(),o=new Set,l=50;for(let d=0;d<t.length;d+=l){let _=t.slice(d,d+l),h=await Promise.allSettled(_.map(S=>this.movieService.getDetail(S)));for(let S of h)if(S.status==="fulfilled"){let I=S.value;if(I.cast.some(O=>O.name.toLowerCase()===e)&&(o.add(I.id),!this.photoUrl())){let O=I.cast.find(X=>X.name.toLowerCase()===e);O?.profileUrl&&this.photoUrl.set(O.profileUrl)}}o.size>0&&this.actorFilmIds.set(new Set(o))}this.actorFilmIds.set(new Set(o))}addUnwatchedToWatchlist(){for(let e of this.unwatchedFilms())this.collectionService.addToWatchlist(e.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=N({type:n,selectors:[["app-actor"]],inputs:{name:[1,"name"]},decls:3,vars:1,consts:[[1,"actor","container"],["role","alert",1,"catalog-error"],[3,"click"],[1,"actor__header"],[1,"actor__profile"],[1,"actor__photo",3,"src","alt"],[1,"actor__photo-placeholder"],[1,"actor__eyebrow"],[1,"actor__name"],[1,"actor__meta"],[1,"actor__empty"],[1,"actor__stats"],[1,"actor__stat"],[1,"actor__stat-value"],[1,"actor__stat-label"],[1,"actor__genres"],[1,"actor__best-film-card",3,"routerLink"],[1,"actor__timeline"],[1,"actor__collabs"],[1,"actor__completion"],[1,"actor__view-bar"],[1,"actor__sort-btns"],[1,"actor__sort-btn",3,"click"],[3,"modeChange","mode"],[3,"movies"],[1,"actor__genre-tag",3,"routerLink"],["loading","lazy",1,"actor__best-film-poster",3,"src","alt"],[1,"actor__best-film-poster","actor__best-film-poster--placeholder"],[1,"actor__best-film-info"],[1,"actor__best-film-label"],[1,"actor__best-film-title"],[1,"actor__best-film-meta"],[1,"actor__timeline-bars"],[1,"actor__timeline-decade",3,"routerLink"],[1,"actor__timeline-bar"],[1,"actor__timeline-count"],[1,"actor__timeline-label"],[1,"actor__timeline-rating"],[1,"actor__collab-list"],[1,"actor__collab-chip",3,"routerLink"],[1,"actor__collab-count"],[1,"actor__completion-header"],[1,"actor__completion-text"],[1,"actor__completion-pct"],[1,"actor__completion-track"],[1,"actor__completion-fill"],[1,"actor__add-unwatched"],[1,"actor__add-unwatched",3,"click"],["routerLink","/browse",1,"btn-primary"]],template:function(t,o){if(t&1&&p(0,at,6,1,"div",0)(1,rt,2,0,"div",0)(2,Pt,14,5,"div",0),t&2){let l;g((l=o.catalog.error())?0:o.catalog.loading()?1:2,l)}},dependencies:[$,H,q,Y,K],styles:[".actor[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.actor__header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:var(--space-lg)}.actor__profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-lg)}.actor__photo[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;box-shadow:var(--shadow-md)}.actor__photo-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:var(--bg-raised);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);font-size:2rem;color:var(--accent-gold);font-weight:700}.actor__eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-size:.8rem;font-weight:600;color:var(--accent-gold);margin:0 0 var(--space-xs)}.actor__name[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.actor__meta[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;margin:0}.actor__stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:var(--space-md);margin-bottom:var(--space-xl)}.actor__stat[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md);text-align:center}.actor__stat-value[_ngcontent-%COMP%]{display:block;font-family:var(--font-heading);font-size:1.5rem;font-weight:700;color:var(--accent-gold);margin-bottom:2px}.actor__stat-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-tertiary)}.actor__genres[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm);margin-bottom:var(--space-xl)}.actor__genre-tag[_ngcontent-%COMP%]{font-size:.85rem;padding:4px 14px;border:1px solid var(--border-bright);border-radius:16px;color:var(--text-secondary);text-decoration:none;transition:all .2s}.actor__genre-tag[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold);background-color:var(--accent-gold-dim)}.actor__timeline[_ngcontent-%COMP%]{margin-bottom:var(--space-xl);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-lg)}.actor__timeline[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-md);font-size:1rem}.actor__timeline-bars[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:var(--space-md);min-height:120px}.actor__timeline-decade[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;text-decoration:none;color:inherit}.actor__timeline-bar[_ngcontent-%COMP%]{width:100%;max-width:48px;background:linear-gradient(0deg,var(--accent-gold),#c49b2c);border-radius:var(--radius-sm) var(--radius-sm) 0 0;display:flex;align-items:flex-start;justify-content:center;padding-top:4px;transition:transform .2s}.actor__timeline-decade[_ngcontent-%COMP%]:hover   .actor__timeline-bar[_ngcontent-%COMP%]{transform:translateY(-2px)}.actor__timeline-count[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;color:var(--bg-deep)}.actor__timeline-label[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary);font-weight:600}.actor__timeline-rating[_ngcontent-%COMP%]{font-size:.65rem;color:var(--accent-gold);font-weight:600}.actor__collabs[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.actor__collabs[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.actor__collab-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.actor__collab-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-xs);font-size:.85rem;padding:6px 14px;background-color:var(--bg-surface);border:1px solid var(--border);border-radius:20px;color:var(--text-primary);text-decoration:none;transition:all .2s}.actor__collab-chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.actor__collab-count[_ngcontent-%COMP%]{font-size:.7rem;background-color:var(--bg-raised);padding:1px 6px;border-radius:8px;color:var(--text-tertiary)}.actor__completion[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md) var(--space-lg);margin-bottom:var(--space-lg)}.actor__completion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm)}.actor__completion-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.actor__completion-pct[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.1rem;font-weight:700;color:var(--accent-gold)}.actor__completion-track[_ngcontent-%COMP%]{height:8px;background:var(--bg-raised);border-radius:4px;overflow:hidden;margin-bottom:var(--space-sm)}.actor__completion-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-gold);border-radius:4px;transition:width .4s ease}.actor__add-unwatched[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-gold);font-size:.85rem;font-weight:600;padding:0;min-height:auto;min-width:auto;cursor:pointer}.actor__add-unwatched[_ngcontent-%COMP%]:hover{text-decoration:underline}.actor__view-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--space-md);margin-bottom:var(--space-lg)}.actor__sort-btns[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs)}.actor__sort-btn[_ngcontent-%COMP%]{padding:6px 14px;border-radius:var(--radius-lg);background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}.actor__sort-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.actor__sort-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.actor__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl);color:var(--text-tertiary)}.actor__best-film-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:inherit;margin-bottom:var(--space-xl);transition:border-color .2s,background-color .2s}.actor__best-film-card[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);background:var(--bg-raised);color:inherit}.actor__best-film-poster[_ngcontent-%COMP%]{width:48px;height:72px;object-fit:cover;border-radius:var(--radius-sm);flex-shrink:0}.actor__best-film-poster--placeholder[_ngcontent-%COMP%]{background:var(--bg-raised);display:flex;align-items:center;justify-content:center;font-size:1.2rem;color:var(--accent-gold)}.actor__best-film-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.actor__best-film-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.06em;font-weight:600}.actor__best-film-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.05rem;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.actor__best-film-card[_ngcontent-%COMP%]:hover   .actor__best-film-title[_ngcontent-%COMP%]{color:var(--accent-gold)}.actor__best-film-meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}@media(max-width:768px){.actor__header[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}}@media(max-width:480px){.actor__profile[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.actor__stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})};export{Q as ActorComponent};
