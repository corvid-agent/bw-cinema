import{a as Ot}from"./chunk-SATL3JCH.js";import{a as Et,b as Pt}from"./chunk-TWPBZPC6.js";import{a as Tt}from"./chunk-2THIRR2Y.js";import{a as Mt}from"./chunk-VYUST5ET.js";import{a as St}from"./chunk-JVUEOQ2T.js";import{a as yt}from"./chunk-U6UKIARX.js";import{$ as p,$a as xt,A as it,Aa as W,Ba as at,Da as gt,Ea as vt,F as z,Fa as ut,Ga as ht,Ja as tt,K as mt,Ma as v,O as r,R as pt,Z as X,_ as m,_a as ft,aa as Ct,ba as ot,ca as A,cb as wt,da as R,ea as I,fa as o,fb as bt,ga as a,ha as O,la as L,na as k,pa as _,v as Q,va as B,wa as j,x as T,y as E,ya as c,z as et,za as C}from"./chunk-SA65F7OW.js";var Dt=n=>["/movie",n],Ft=n=>["/director",n],Nt=n=>["/genre",n],At=n=>["/decade",n],lt=(n,e)=>e.id,nt=(n,e)=>e.name,st=(n,e)=>e.label,Rt=(n,e)=>e.date,Vt=(n,e)=>e.year,Lt=(n,e)=>e.movieId;function Yt(n,e){if(n&1&&O(0,"app-movie-grid",2),n&2){let t=_(2);I("movies",t.sharedMovies())}}function $t(n,e){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No films found"),a(),o(3,"p",5),c(4,"The shared link may be invalid or the films are no longer in our catalog."),a(),o(5,"a",6),c(6,"Browse Films"),a()())}function zt(n,e){if(n&1&&(o(0,"h1"),c(1,"Shared Collection"),a(),o(2,"p",1),c(3),a(),m(4,Yt,1,1,"app-movie-grid",2)(5,$t,7,0,"div",3)),n&2){let t=_();r(3),at("",t.sharedMovies().length," film",t.sharedMovies().length!==1?"s":""," in this shared collection"),r(),p(t.sharedMovies().length>0?4:5)}}function Wt(n,e){if(n&1){let t=L();o(0,"div",7)(1,"p"),c(2),a(),o(3,"button",8),k("click",function(){T(t);let l=_(2);return E(l.catalog.retry())}),c(4,"Try Again"),a()()}n&2&&(r(2),C(e))}function Gt(n,e){n&1&&O(0,"app-loading-spinner")}function Bt(n,e){if(n&1&&(o(0,"span",14),c(1),a()),n&2){let t=_(4);r(),C(t.watchlistMovies().length)}}function jt(n,e){if(n&1&&O(0,"span",15),n&2){let t=_(4);I("title",ht("",t.newThisWeek()," added this week"))}}function Ht(n,e){if(n&1&&(o(0,"span",14),c(1),a()),n&2){let t=_(4);r(),C(t.watchedMovies().length)}}function Ut(n,e){if(n&1&&(o(0,"span",14),c(1),a()),n&2){let t=_(4);r(),C(t.favoriteMovies().length)}}function qt(n,e){if(n&1&&(o(0,"span",14),c(1),a()),n&2){let t=_(4);r(),C(t.collectionService.playlists().length)}}function Qt(n,e){if(n&1&&(o(0,"option",25),c(1),a()),n&2){let t=e.$implicit;I("value",t),r(),C(t)}}function Kt(n,e){if(n&1&&(o(0,"option",25),c(1),a()),n&2){let t=e.$implicit;I("value",t),r(),W("",t,"s")}}function Jt(n,e){if(n&1){let t=L();o(0,"select",27),k("change",function(l){T(t);let d=_(5);return E(d.onRatingFilterChange(l))}),o(1,"option",28),c(2,"All Ratings"),a(),o(3,"option",29),c(4,"1+ Stars"),a(),o(5,"option",30),c(6,"2+ Stars"),a(),o(7,"option",31),c(8,"3+ Stars"),a(),o(9,"option",32),c(10,"4+ Stars"),a(),o(11,"option",33),c(12,"5 Stars"),a(),o(13,"option",34),c(14,"Unrated"),a()()}}function Zt(n,e){if(n&1){let t=L();o(0,"div",16)(1,"input",22),k("input",function(l){T(t);let d=_(4);return E(d.collectionQuery.set(l.target.value))}),a(),o(2,"select",23),k("change",function(l){T(t);let d=_(4);return E(d.genreFilter.set(l.target.value))}),o(3,"option",24),c(4,"All Genres"),a(),A(5,Qt,2,2,"option",25,ot),a(),o(7,"select",23),k("change",function(l){T(t);let d=_(4);return E(d.decadeFilter.set(l.target.value))}),o(8,"option",24),c(9,"All Decades"),a(),A(10,Kt,2,2,"option",25,ot),a(),m(12,Jt,15,0,"select",26),a()}if(n&2){let t=_(4);r(),I("value",t.collectionQuery()),r(4),R(t.collectionGenres()),r(5),R(t.collectionDecades()),r(2),p(t.activeTab()==="watched"?12:-1)}}function Xt(n,e){if(n&1){let t=L();o(0,"button",44),k("click",function(){T(t);let l=_(5);return E(l.exportCsv())}),et(),o(1,"svg",45),O(2,"path",46)(3,"polyline",47)(4,"line",48),a(),c(5," CSV "),a(),it(),o(6,"button",44),k("click",function(){T(t);let l=_(5);return E(l.exportLetterboxd())}),et(),o(7,"svg",45),O(8,"path",46)(9,"polyline",47)(10,"line",48),a(),c(11," Letterboxd "),a(),it(),o(12,"label",49),et(),o(13,"svg",45),O(14,"path",46)(15,"polyline",50)(16,"line",51),a(),c(17," Import "),it(),o(18,"input",52),k("change",function(l){T(t);let d=_(5);return E(d.importLetterboxd(l))}),a()()}}function te(n,e){if(n&1){let t=L();o(0,"div",17)(1,"label",35),c(2,"Sort by"),a(),o(3,"select",36),k("change",function(l){T(t);let d=_(4);return E(d.onSortChange(l))}),o(4,"option",37),c(5,"Recently Added"),a(),o(6,"option",38),c(7,"Oldest Added"),a(),o(8,"option",39),c(9,"Title A\u2013Z"),a(),o(10,"option",40),c(11,"Title Z\u2013A"),a(),o(12,"option",41),c(13,"Highest Rated"),a(),o(14,"option",42),c(15,"Newest Films"),a()(),m(16,Xt,19,0),o(17,"app-view-toggle",43),ut("modeChange",function(l){T(t);let d=_(4);return vt(d.viewMode,l)||(d.viewMode=l),E(l)}),a()()}if(n&2){let t=_(4);r(16),p(t.currentMovies().length>0?16:-1),r(),gt("mode",t.viewMode)}}function ee(n,e){if(n&1){let t=L();o(0,"div",18)(1,"button",53),k("click",function(){T(t);let l=_(4);return E(l.shareCollection())}),c(2,"Share"),a()()}}function ne(n,e){if(n&1){let t=L();o(0,"div",18)(1,"button",53),k("click",function(){T(t);let l=_(4);return E(l.exportBackup())}),c(2,"Backup"),a(),o(3,"label",54),c(4," Restore "),o(5,"input",55),k("change",function(l){T(t);let d=_(4);return E(d.importBackup(l))}),a()()()}}function ie(n,e){if(n&1&&O(0,"app-movie-grid",2),n&2){let t=_(6);I("movies",t.sortedWatchlist())}}function oe(n,e){if(n&1&&O(0,"app-movie-list",2),n&2){let t=_(6);I("movies",t.sortedWatchlist())}}function ae(n,e){if(n&1&&m(0,ie,1,1,"app-movie-grid",2)(1,oe,1,1,"app-movie-list",2),n&2){let t=_(5);p(t.viewMode()==="grid"?0:1)}}function le(n,e){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No films in your watchlist"),a(),o(3,"p",5),c(4,"Browse films and add ones you'd like to watch later."),a(),o(5,"a",6),c(6,"Browse Films"),a()())}function re(n,e){if(n&1&&(o(0,"div",19),m(1,ae,2,1)(2,le,7,0,"div",3),a()),n&2){let t=_(4);r(),p(t.sortedWatchlist().length>0?1:2)}}function ce(n,e){if(n&1&&O(0,"app-movie-grid",2),n&2){let t=_(6);I("movies",t.sortedWatched())}}function de(n,e){if(n&1&&O(0,"app-movie-list",2),n&2){let t=_(6);I("movies",t.sortedWatched())}}function se(n,e){if(n&1&&m(0,ce,1,1,"app-movie-grid",2)(1,de,1,1,"app-movie-list",2),n&2){let t=_(5);p(t.viewMode()==="grid"?0:1)}}function _e(n,e){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No films watched yet"),a(),o(3,"p",5),c(4,"Films you mark as watched will appear here."),a(),o(5,"a",6),c(6,"Discover Films"),a()())}function me(n,e){if(n&1&&(o(0,"div",19),m(1,se,2,1)(2,_e,7,0,"div",3),a()),n&2){let t=_(4);r(),p(t.sortedWatched().length>0?1:2)}}function pe(n,e){if(n&1&&O(0,"app-movie-grid",2),n&2){let t=_(6);I("movies",t.sortedFavorites())}}function Ce(n,e){if(n&1&&O(0,"app-movie-list",2),n&2){let t=_(6);I("movies",t.sortedFavorites())}}function ge(n,e){if(n&1&&m(0,pe,1,1,"app-movie-grid",2)(1,Ce,1,1,"app-movie-list",2),n&2){let t=_(5);p(t.viewMode()==="grid"?0:1)}}function ve(n,e){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No favorite films yet"),a(),o(3,"p",5),c(4,"Tap the heart icon on any film to add it to your favorites."),a(),o(5,"a",6),c(6,"Browse Films"),a()())}function ue(n,e){if(n&1&&(o(0,"div",19),m(1,ge,2,1)(2,ve,7,0,"div",3),a()),n&2){let t=_(4);r(),p(t.sortedFavorites().length>0?1:2)}}function he(n,e){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No playlists yet"),a(),o(3,"p",5),c(4,"Create a playlist to organize your favorite films into custom lists."),a()())}function fe(n,e){if(n&1){let t=L();o(0,"input",68),k("input",function(l){T(t);let d=_(7);return E(d.editPlaylistName.set(l.target.value))})("keydown.enter",function(){T(t);let l=_().$implicit,d=_(6);return E(d.saveRename(l.id))})("blur",function(){T(t);let l=_().$implicit,d=_(6);return E(d.saveRename(l.id))}),a()}if(n&2){let t=_(7);I("value",t.editPlaylistName())}}function xe(n,e){if(n&1){let t=L();o(0,"h3",69),k("click",function(){T(t);let l=_().$implicit,d=_(6);return E(d.startRename(l))}),c(1),a()}if(n&2){let t=_().$implicit;r(),C(t.name)}}function we(n,e){if(n&1&&O(0,"img",71),n&2){let t=_().$implicit;I("src",t.posterUrl,mt)("alt",t.title)}}function be(n,e){if(n&1&&(o(0,"div",72),c(1),a()),n&2){let t=_().$implicit;r(),C(t.title[0])}}function ye(n,e){if(n&1&&(o(0,"a",70),m(1,we,1,2,"img",71)(2,be,2,1,"div",72),a()),n&2){let t=e.$implicit;I("routerLink",tt(2,Dt,t.id)),r(),p(t.posterUrl?1:2)}}function Me(n,e){if(n&1&&(o(0,"div",67),A(1,ye,3,4,"a",70,lt),a()),n&2){let t=_().$implicit,i=_(6);r(),R(i.playlistMovies(t.id))}}function Se(n,e){if(n&1){let t=L();o(0,"div",59)(1,"div",60),m(2,fe,1,1,"input",61)(3,xe,2,1,"h3",62),o(4,"span",63),c(5),a(),o(6,"button",64),k("click",function(){let l=T(t).$implicit,d=_(6);return E(d.deletePlaylist(l.id))}),et(),o(7,"svg",45),O(8,"polyline",65)(9,"path",66),a()()(),m(10,Me,3,0,"div",67),a()}if(n&2){let t=e.$implicit,i=_(6);r(2),p(i.editingPlaylistId()===t.id?2:3),r(3),W("",t.movieIds.length," films"),r(5),p(i.playlistMovies(t.id).length>0?10:-1)}}function Te(n,e){if(n&1&&A(0,Se,11,3,"div",59,lt),n&2){let t=_(5);R(t.collectionService.playlists())}}function Ee(n,e){if(n&1){let t=L();o(0,"div",20)(1,"div",56)(2,"input",57),k("input",function(l){T(t);let d=_(4);return E(d.newPlaylistName.set(l.target.value))})("keydown.enter",function(){T(t);let l=_(4);return E(l.createPlaylist())}),a(),o(3,"button",58),k("click",function(){T(t);let l=_(4);return E(l.createPlaylist())}),c(4,"Create"),a()(),m(5,he,5,0,"div",3)(6,Te,2,0),a()}if(n&2){let t=_(4);r(2),I("value",t.newPlaylistName()),r(),I("disabled",!t.newPlaylistName().trim()),r(2),p(t.collectionService.playlists().length===0?5:6)}}function Pe(n,e){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No stats yet"),a(),o(3,"p",5),c(4,"Watch some films to see your viewing statistics."),a(),o(5,"a",6),c(6,"Discover Films"),a()())}function Oe(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Languages Explored"),a()()),n&2){let t=_(6);r(2),C(t.uniqueLanguages())}}function ke(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Avg Film Age (yrs)"),a()()),n&2){let t=_(6);r(2),C(t.watchedAvgFilmAge())}}function De(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Unique Directors"),a()()),n&2){let t=_(6);r(2),C(t.watchedDirectorCount())}}function Ie(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Non-English Films"),a()()),n&2){let t=_(6);r(2),C(t.watchedNonEnglishCount())}}function Fe(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Silent-Era Films"),a()()),n&2){let t=_(6);r(2),C(t.watchedSilentEraCount())}}function Ne(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Median Year"),a()()),n&2&&(r(2),C(e))}function Ae(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Avg. Year"),a()()),n&2&&(r(2),C(e))}function Re(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Co-directed"),a()()),n&2){let t=_(6);r(2),C(t.watchedCoDirectedCount())}}function Ve(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Avg Title Length"),a()()),n&2&&(r(2),C(e))}function Le(n,e){n&1&&(o(0,"div",74)(1,"span",95),c(2),a(),o(3,"span",76),c(4,"Longest Title"),a()()),n&2&&(r(2),C(e))}function Ye(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Watchlist Avg Year"),a()()),n&2&&(r(2),C(e))}function $e(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Oldest in Watchlist"),a()()),n&2&&(r(2),C(e))}function ze(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Watchlist on IA"),a()()),n&2&&(r(2),C(e))}function We(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Favorites Avg \u2605"),a()()),n&2&&(r(2),C(e))}function Ge(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Oldest Favorite"),a()()),n&2){let t=_(6);r(2),C(t.favoritesOldestYear())}}function Be(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Favorites on IA"),a()()),n&2&&(r(2),C(e))}function je(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Languages Watched"),a()()),n&2&&(r(2),C(e))}function He(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Avg Genres/Film"),a()()),n&2&&(r(2),C(e))}function Ue(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Watchlist Streamable"),a()()),n&2&&(r(2),W("",e,"%"))}function qe(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"IMDb Linked"),a()()),n&2&&(r(2),C(e))}function Qe(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Have Poster"),a()()),n&2&&(r(2),W("",e,"%"))}function Ke(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Favorites Free"),a()()),n&2&&(r(2),W("",e,"%"))}function Je(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"On YouTube"),a()()),n&2&&(r(2),C(e))}function Ze(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Co-Directed"),a()()),n&2&&(r(2),W("",e,"%"))}function Xe(n,e){n&1&&(o(0,"div",74)(1,"span",96),c(2),a(),o(3,"span",76),c(4,"Shortest Title"),a()()),n&2&&(r(2),C(e))}function tn(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Newest Watched"),a()()),n&2){let t=_(6);r(2),C(t.watchedNewestYear())}}function en(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Rated 8.0+"),a()()),n&2){let t=_(6);r(2),C(t.watchedHighlyRatedCount())}}function nn(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Avg Directors/Film"),a()()),n&2&&(r(2),C(e))}function on(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Pre-1940 Watched"),a()()),n&2){let t=_(6);r(2),C(t.watchedPreWarCount())}}function an(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Oldest Watched"),a()()),n&2){let t=_(6);r(2),C(t.watchedOldestYear())}}function ln(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Streamable"),a()()),n&2&&(r(2),W("",e,"%"))}function rn(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Rating Spread"),a()()),n&2&&(r(2),C(e))}function cn(n,e){n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Median Rating"),a()()),n&2&&(r(2),C(e))}function dn(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Decades"),a()()),n&2){let t=_(6);r(2),C(t.watchedDecadeCount())}}function sn(n,e){if(n&1&&(o(0,"div",74)(1,"span",75),c(2),a(),o(3,"span",76),c(4,"Genres"),a()()),n&2){let t=_(6);r(2),C(t.watchedGenreCount())}}function _n(n,e){n&1&&(o(0,"div",74)(1,"span",96),c(2),a(),o(3,"span",76),c(4,"Top Director"),a()()),n&2&&(r(2),C(e))}function mn(n,e){if(n&1&&(o(0,"div",78)(1,"span",97),c(2),a(),o(3,"div",98)(4,"span",99),c(5),a(),o(6,"span",100),c(7),a()(),o(8,"div",101),O(9,"div",102),a(),o(10,"span",103),c(11),a()()),n&2){let t=e;r(2),C(t.icon),r(3),C(t.name),r(2),W("",t.remaining," more to go"),r(2),B("width",t.pct,"%"),r(2),at("",t.current,"/",t.target)}}function pn(n,e){if(n&1&&(o(0,"div",106)(1,"span",107),c(2),a(),o(3,"span",108),c(4),a(),o(5,"span",109),c(6),a()()),n&2){let t=e.$implicit;j("achievements__badge--earned",t.earned),r(2),C(t.icon),r(2),C(t.name),r(2),C(t.description)}}function Cn(n,e){if(n&1&&(o(0,"section",79)(1,"h3"),c(2,"Achievements"),a(),o(3,"div",104),A(4,pn,7,5,"div",105,lt),a()()),n&2){let t=_(6);r(4),R(t.achievements())}}function gn(n,e){if(n&1&&(o(0,"div",110)(1,"span",111),c(2),a(),o(3,"div",112)(4,"span",113),c(5),a(),o(6,"span",114),c(7),a(),o(8,"div",115),O(9,"div",116),a(),o(10,"span",117),c(11),a()()()),n&2){let t=e.$implicit;j("challenges__card--done",t.current>=t.target),r(2),C(t.icon),r(3),C(t.name),r(2),C(t.description),r(2),B("width",t.current/t.target*100,"%"),r(2),at("",t.current,"/",t.target)}}function vn(n,e){if(n&1&&(o(0,"div",118)(1,"a",119),c(2),a(),o(3,"div",120),O(4,"div",121),a(),o(5,"span",122),c(6),a()()),n&2){let t=e.$implicit;r(),I("routerLink",tt(5,Ft,t.name)),r(),C(t.name),r(2),B("width",t.pct,"%"),r(2),C(t.count)}}function un(n,e){if(n&1&&(o(0,"section",83)(1,"h3"),c(2,"Top Directors"),a(),o(3,"div",85),A(4,vn,7,7,"div",118,nt),a()()),n&2){let t=_(6);r(4),R(t.directorStats())}}function hn(n,e){if(n&1&&(o(0,"a",86)(1,"span",123),c(2),a(),o(3,"div",120),O(4,"div",121),a(),o(5,"span",122),c(6),a()()),n&2){let t=e.$implicit;I("routerLink",tt(5,Nt,t.name)),r(2),C(t.name),r(2),B("width",t.pct,"%"),r(2),C(t.count)}}function fn(n,e){if(n&1&&(o(0,"a",86)(1,"span",123),c(2),a(),o(3,"div",120),O(4,"div",121),a(),o(5,"span",122),c(6),a()()),n&2){let t=e.$implicit;I("routerLink",tt(5,At,t.name.replace("s",""))),r(2),C(t.name),r(2),B("width",t.pct,"%"),r(2),C(t.count)}}function xn(n,e){if(n&1&&(o(0,"div",118)(1,"span",124),c(2),a(),o(3,"div",120),O(4,"div",121),a(),o(5,"span",122),c(6),a()()),n&2){let t=e.$implicit;r(2),C(t.name),r(2),B("width",t.pct,"%"),r(2),C(t.count)}}function wn(n,e){if(n&1&&(o(0,"section",87)(1,"h3"),c(2,"Languages"),a(),o(3,"div",85),A(4,xn,7,4,"div",118,nt),a()()),n&2){let t=_(6);r(4),R(t.languageStats())}}function bn(n,e){if(n&1&&(o(0,"div",118)(1,"span",124),c(2),a(),o(3,"div",120),O(4,"div",121),a(),o(5,"span",122),c(6),a()()),n&2){let t=e.$implicit;r(2),W("",t.name," \u2605"),r(2),B("width",t.pct,"%"),r(2),C(t.count)}}function yn(n,e){if(n&1&&(o(0,"section",88)(1,"h3"),c(2,"Your Rating Distribution"),a(),o(3,"div",85),A(4,bn,7,4,"div",118,nt),a()()),n&2){let t=_(6);r(4),R(t.ratingDistribution())}}function Mn(n,e){if(n&1&&(o(0,"div",126)(1,"span",127),c(2),a(),O(3,"div",128),o(4,"span",129),c(5),a()()),n&2){let t=e.$implicit;r(2),C(t.count),r(),B("height",t.pct,"%"),r(2),C(t.label)}}function Sn(n,e){if(n&1&&(o(0,"section",89)(1,"h3"),c(2,"Monthly Activity"),a(),o(3,"div",125),A(4,Mn,6,4,"div",126,st),a()()),n&2){let t=_(6);r(4),R(t.monthlyTrends())}}function Tn(n,e){if(n&1){let t=L();o(0,"button",140),k("click",function(){let l=T(t).$implicit,d=_(8);return E(d.heatmapYear.set(l))}),c(1),a()}if(n&2){let t=e.$implicit,i=_(8);j("heatmap__year-btn--active",i.heatmapYear()===t),r(),C(t)}}function En(n,e){if(n&1){let t=L();o(0,"div",131)(1,"button",140),k("click",function(){T(t);let l=_(7);return E(l.heatmapYear.set(null))}),c(2,"Last 12mo"),a(),A(3,Tn,2,3,"button",141,ot),a()}if(n&2){let t=_(7);r(),j("heatmap__year-btn--active",t.heatmapYear()===null),r(2),R(t.heatmapYears())}}function Pn(n,e){if(n&1&&O(0,"div",143),n&2){let t=e.$implicit;j("heatmap__cell--l1",t.level===1)("heatmap__cell--l2",t.level===2)("heatmap__cell--l3",t.level===3)("heatmap__cell--future",t.level===-1),I("title",t.count>=0?t.date+": "+t.count+" film(s)":"")}}function On(n,e){if(n&1&&(o(0,"div",134),A(1,Pn,1,9,"div",142,Rt),a()),n&2){let t=e.$implicit;r(),R(t.days)}}function kn(n,e){if(n&1&&(o(0,"section",90)(1,"div",130)(2,"h3"),c(3,"Watch Calendar"),a(),m(4,En,5,2,"div",131),a(),o(5,"div",132)(6,"div",133),A(7,On,3,0,"div",134,Ct),a(),o(9,"div",135)(10,"span"),c(11,"Less"),a(),O(12,"div",136)(13,"div",137)(14,"div",138)(15,"div",139),o(16,"span"),c(17,"More"),a()()()()),n&2){let t=_(6);r(4),p(t.heatmapYears().length>1?4:-1),r(3),R(t.watchHeatmap().weeks)}}function Dn(n,e){if(n&1&&(o(0,"div",148),O(1,"div",149),o(2,"span",150),c(3),a()()),n&2){let t=e.$implicit;B("left",t.pct,"%"),r(),B("height",8+t.count*6,"px"),I("title",t.year+": "+t.count+" film(s)"),r(2),C(t.year)}}function In(n,e){if(n&1&&(o(0,"section",91)(1,"h3"),c(2,"Your Films Through Time"),a(),o(3,"div",144)(4,"div",145),O(5,"div",146),A(6,Dn,4,6,"div",147,Vt),a()()()),n&2){let t=_(6);r(6),R(t.filmTimeline())}}function Fn(n,e){if(n&1&&(o(0,"a",153)(1,"span",154),c(2),a(),o(3,"span",155),c(4),a()()),n&2){let t=e.$implicit;I("routerLink",t.link),r(2),C(t.label),r(2),W("",t.count," films")}}function Nn(n,e){if(n&1&&(o(0,"section",92)(1,"h3"),c(2,"Discovery Gaps"),a(),o(3,"p",151),c(4,"Genres and decades you haven't explored yet"),a(),o(5,"div",152),A(6,Fn,5,3,"a",153,st),a()()),n&2){let t=_(6);r(6),R(t.discoveryGaps())}}function An(n,e){if(n&1&&(o(0,"div",157)(1,"span",158),c(2),a(),o(3,"span",159),c(4),a()()),n&2){let t=e.$implicit;r(2),C(t.value),r(2),C(t.label)}}function Rn(n,e){if(n&1&&(o(0,"section",93)(1,"h3"),c(2,"Viewing Insights"),a(),o(3,"div",156),A(4,An,5,2,"div",157,st),a()()),n&2){let t=_(6);r(4),R(t.viewingInsights())}}function Vn(n,e){if(n&1&&(o(0,"span",166),c(1),a()),n&2){let t=_().$implicit;r(),W("\u2605 ",t.rating,"/10")}}function Ln(n,e){if(n&1&&(o(0,"div",161),O(1,"div",162),o(2,"div",163)(3,"a",164),c(4),a(),o(5,"span",165),c(6),a(),m(7,Vn,2,1,"span",166),a()()),n&2){let t=e.$implicit;r(3),I("routerLink",tt(4,Dt,t.movieId)),r(),C(t.title),r(2),C(t.dateLabel),r(),p(t.rating?7:-1)}}function Yn(n,e){if(n&1&&(o(0,"section",94)(1,"h3"),c(2,"Watch History"),a(),o(3,"div",160),A(4,Ln,8,6,"div",161,Lt),a()()),n&2){let t=_(6);r(4),R(t.watchTimeline())}}function $n(n,e){if(n&1&&(o(0,"div",73)(1,"div",74)(2,"span",75),c(3),a(),o(4,"span",76),c(5,"Films Watched"),a()(),o(6,"div",77)(7,"span",75),c(8),a(),o(9,"span",76),c(10),a()(),o(11,"div",74)(12,"span",75),c(13),a(),o(14,"span",76),c(15,"Avg. Your Rating"),a()(),o(16,"div",74)(17,"span",75),c(18),a(),o(19,"span",76),c(20,"Avg. TMDb Rating"),a()(),o(21,"div",74)(22,"span",75),c(23),a(),o(24,"span",76),c(25,"Decades Spanned"),a()(),m(26,Oe,5,1,"div",74),o(27,"div",74)(28,"span",75),c(29),a(),o(30,"span",76),c(31,"Current Streak (days)"),a()(),o(32,"div",74)(33,"span",75),c(34),a(),o(35,"span",76),c(36,"Best Streak (days)"),a()(),m(37,ke,5,1,"div",74),m(38,De,5,1,"div",74),m(39,Ie,5,1,"div",74),m(40,Fe,5,1,"div",74),m(41,Ne,5,1,"div",74),m(42,Ae,5,1,"div",74),m(43,Re,5,1,"div",74),m(44,Ve,5,1,"div",74),m(45,Le,5,1,"div",74),m(46,Ye,5,1,"div",74),m(47,$e,5,1,"div",74),m(48,ze,5,1,"div",74),m(49,We,5,1,"div",74),m(50,Ge,5,1,"div",74),m(51,Be,5,1,"div",74),m(52,je,5,1,"div",74),m(53,He,5,1,"div",74),m(54,Ue,5,1,"div",74),m(55,qe,5,1,"div",74),m(56,Qe,5,1,"div",74),m(57,Ke,5,1,"div",74),m(58,Je,5,1,"div",74),m(59,Ze,5,1,"div",74),m(60,Xe,5,1,"div",74),m(61,tn,5,1,"div",74),m(62,en,5,1,"div",74),m(63,nn,5,1,"div",74),m(64,on,5,1,"div",74),m(65,an,5,1,"div",74),m(66,ln,5,1,"div",74),m(67,rn,5,1,"div",74),m(68,cn,5,1,"div",74),m(69,dn,5,1,"div",74),m(70,sn,5,1,"div",74),m(71,_n,5,1,"div",74),a(),m(72,mn,12,7,"div",78),m(73,Cn,6,0,"section",79),o(74,"section",80)(75,"h3"),c(76),a(),o(77,"div",81),A(78,gn,12,9,"div",82,lt),a()(),m(80,un,6,0,"section",83),o(81,"div",84)(82,"section",83)(83,"h3"),c(84,"Top Genres"),a(),o(85,"div",85),A(86,hn,7,7,"a",86,nt),a()(),o(88,"section",83)(89,"h3"),c(90,"By Decade"),a(),o(91,"div",85),A(92,fn,7,7,"a",86,nt),a()()(),m(94,wn,6,0,"section",87),m(95,yn,6,0,"section",88),m(96,Sn,6,0,"section",89),m(97,kn,18,1,"section",90),m(98,In,8,0,"section",91),m(99,Nn,8,0,"section",92),m(100,Rn,6,0,"section",93),m(101,Yn,6,0,"section",94)),n&2){let t,i,l,d,s,h,x,w,b,M,y,D,S,F,G,N,V,Y,$,q,H,K,J,Z,u=_(5);r(3),C(u.watchedMovies().length),r(5),C(u.watchedThisYear()),r(2),W("Watched in ",u.currentYear),r(3),C(u.avgRating()),r(5),C(u.avgTmdbRating()),r(5),C(u.totalDecades()),r(3),p(u.uniqueLanguages()>1?26:-1),r(3),C(u.currentStreak()),r(5),C(u.longestStreak()),r(3),p(u.watchedAvgFilmAge()>0?37:-1),r(),p(u.watchedDirectorCount()>1?38:-1),r(),p(u.watchedNonEnglishCount()>0?39:-1),r(),p(u.watchedSilentEraCount()>0?40:-1),r(),p((t=u.watchedMedianYear())?41:-1,t),r(),p((i=u.watchedAvgYear())?42:-1,i),r(),p(u.watchedCoDirectedCount()>0?43:-1),r(),p((l=u.watchedAvgTitleLength())?44:-1,l),r(),p((d=u.watchedLongestTitle())?45:-1,d),r(),p((s=u.watchlistAvgYear())?46:-1,s),r(),p((h=u.watchlistOldestYear())?47:-1,h),r(),p((x=u.watchlistIaStreamableCount())?48:-1,x),r(),p((w=u.favoritesAvgRating())?49:-1,w),r(),p(u.favoritesOldestYear()?50:-1),r(),p((b=u.favoritesIaStreamableCount())?51:-1,b),r(),p((M=u.watchedLanguageCount())?52:-1,M),r(),p((y=u.watchedAvgGenreCount())?53:-1,y),r(),p((D=u.watchlistStreamablePct())?54:-1,D),r(),p((S=u.watchedImdbLinkedCount())?55:-1,S),r(),p((F=u.watchedPosterCoveragePct())?56:-1,F),r(),p((G=u.favoritesStreamablePct())?57:-1,G),r(),p((N=u.watchedYtStreamableCount())?58:-1,N),r(),p((V=u.watchedCoDirectedPct())?59:-1,V),r(),p((Y=u.watchedShortestTitle())?60:-1,Y),r(),p(u.watchedNewestYear()?61:-1),r(),p(u.watchedHighlyRatedCount()>0?62:-1),r(),p(($=u.watchedAvgDirectorCount())?63:-1,$),r(),p(u.watchedPreWarCount()?64:-1),r(),p(u.watchedOldestYear()?65:-1),r(),p((q=u.watchedStreamablePct())?66:-1,q),r(),p((H=u.watchedRatingSpread())?67:-1,H),r(),p((K=u.watchedMedianRating())?68:-1,K),r(),p(u.watchedDecadeCount()>1?69:-1),r(),p(u.watchedGenreCount()>1?70:-1),r(),p((J=u.watchedTopDirector())?71:-1,J),r(),p((Z=u.nextMilestone())?72:-1,Z),r(),p(u.achievements().length>0?73:-1),r(3),W("",u.monthlyChallenges().month," Challenges"),r(2),R(u.monthlyChallenges().challenges),r(2),p(u.directorStats().length>0?80:-1),r(6),R(u.genreStats()),r(6),R(u.decadeStats()),r(2),p(u.languageStats().length>1?94:-1),r(),p(u.ratingDistribution().length>0?95:-1),r(),p(u.monthlyTrends().length>1?96:-1),r(),p(u.watchHeatmap().weeks.length>0?97:-1),r(),p(u.filmTimeline().length>1?98:-1),r(),p(u.discoveryGaps().length>0?99:-1),r(),p(u.viewingInsights().length>0?100:-1),r(),p(u.watchTimeline().length>0?101:-1)}}function zn(n,e){if(n&1&&(o(0,"div",21),m(1,Pe,7,0,"div",3)(2,$n,102,56),a()),n&2){let t=_(4);r(),p(t.watchedMovies().length===0?1:2)}}function Wn(n,e){if(n&1){let t=L();o(0,"div",11)(1,"div",12),k("keydown",function(l){T(t);let d=_(3);return E(d.onTabKeydown(l))}),o(2,"button",13),k("click",function(){T(t);let l=_(3);return E(l.activeTab.set("watchlist"))}),c(3," Watchlist "),m(4,Bt,2,1,"span",14),m(5,jt,1,2,"span",15),a(),o(6,"button",13),k("click",function(){T(t);let l=_(3);return E(l.activeTab.set("watched"))}),c(7," Watched "),m(8,Ht,2,1,"span",14),a(),o(9,"button",13),k("click",function(){T(t);let l=_(3);return E(l.activeTab.set("favorites"))}),c(10," Favorites "),m(11,Ut,2,1,"span",14),a(),o(12,"button",13),k("click",function(){T(t);let l=_(3);return E(l.activeTab.set("playlists"))}),c(13," Playlists "),m(14,qt,2,1,"span",14),a(),o(15,"button",13),k("click",function(){T(t);let l=_(3);return E(l.activeTab.set("stats"))}),c(16," Stats "),a()(),m(17,Zt,13,2,"div",16),m(18,te,18,2,"div",17),m(19,ee,3,0,"div",18),m(20,ne,6,0,"div",18),a(),m(21,re,3,1,"div",19),m(22,me,3,1,"div",19),m(23,ue,3,1,"div",19),m(24,Ee,7,3,"div",20),m(25,zn,3,1,"div",21)}if(n&2){let t=_(3);r(2),j("collection__tab--active",t.activeTab()==="watchlist"),X("aria-selected",t.activeTab()==="watchlist")("tabindex",t.activeTab()==="watchlist"?0:-1),r(2),p(t.watchlistMovies().length>0?4:-1),r(),p(t.newThisWeek()>0?5:-1),r(),j("collection__tab--active",t.activeTab()==="watched"),X("aria-selected",t.activeTab()==="watched")("tabindex",t.activeTab()==="watched"?0:-1),r(2),p(t.watchedMovies().length>0?8:-1),r(),j("collection__tab--active",t.activeTab()==="favorites"),X("aria-selected",t.activeTab()==="favorites")("tabindex",t.activeTab()==="favorites"?0:-1),r(2),p(t.favoriteMovies().length>0?11:-1),r(),j("collection__tab--active",t.activeTab()==="playlists"),X("aria-selected",t.activeTab()==="playlists")("tabindex",t.activeTab()==="playlists"?0:-1),r(2),p(t.collectionService.playlists().length>0?14:-1),r(),j("collection__tab--active",t.activeTab()==="stats"),X("aria-selected",t.activeTab()==="stats")("tabindex",t.activeTab()==="stats"?0:-1),r(2),p(t.activeTab()!=="stats"&&t.activeTab()!=="playlists"?17:-1),r(),p(t.activeTab()!=="stats"?18:-1),r(),p(t.activeTab()!=="stats"&&t.activeTab()!=="playlists"?19:-1),r(),p(t.activeTab()!=="stats"?20:-1),r(),p(t.activeTab()==="watchlist"?21:-1),r(),p(t.activeTab()==="watched"?22:-1),r(),p(t.activeTab()==="favorites"?23:-1),r(),p(t.activeTab()==="playlists"?24:-1),r(),p(t.activeTab()==="stats"?25:-1)}}function Gn(n,e){if(n&1&&(o(0,"div",9)(1,"h1"),c(2,"My Collection"),a(),o(3,"a",10),c(4,"Year in Review \u2192"),a()(),m(5,Gt,1,0,"app-loading-spinner")(6,Wn,26,34)),n&2){let t=_(2);r(5),p(t.catalog.loading()?5:6)}}function Bn(n,e){if(n&1&&m(0,Wt,5,1,"div",7)(1,Gn,7,1),n&2){let t,i=_();p((t=i.catalog.error())?0:1,t)}}var kt=class n{catalog=Q(yt);collectionService=Q(Mt);notifications=Q(St);route=Q(wt);titleService=Q(xt);metaService=Q(ft);currentYear=new Date().getFullYear();isSharedView=z(!1);sharedMovies=z([]);activeTab=z("watchlist");sortBy=z("added-desc");viewMode=z("grid");collectionQuery=z("");genreFilter=z("");decadeFilter=z("");ratingFilter=z(0);heatmapYear=z(null);watchlistMovies=v(()=>{let e=this.collectionService.watchlistIds();return this.catalog.movies().filter(t=>e.has(t.id))});watchedMovies=v(()=>{let e=this.collectionService.watchedIds();return this.catalog.movies().filter(t=>e.has(t.id))});currentMovies=v(()=>this.activeTab()==="watchlist"?this.watchlistMovies():this.watchedMovies());favoriteMovies=v(()=>{let e=this.collectionService.favoriteIds();return this.catalog.movies().filter(t=>e.has(t.id))});collectionGenres=v(()=>{let e=[...this.watchlistMovies(),...this.watchedMovies(),...this.favoriteMovies()],t=new Set;for(let i of e)for(let l of i.genres)t.add(l);return[...t].sort()});collectionDecades=v(()=>{let e=[...this.watchlistMovies(),...this.watchedMovies(),...this.favoriteMovies()],t=new Set;for(let i of e)t.add(Math.floor(i.year/10)*10);return[...t].sort()});sortedWatchlist=v(()=>this.applyFilters(this.applyQuery(this.sortMovies(this.watchlistMovies(),"watchlist"))));sortedWatched=v(()=>this.applyRatingFilter(this.applyFilters(this.applyQuery(this.sortMovies(this.watchedMovies(),"watched")))));sortedFavorites=v(()=>{let e=this.sortBy(),i=[...this.favoriteMovies()].sort((l,d)=>{switch(e){case"title-asc":return l.title.localeCompare(d.title);case"title-desc":return d.title.localeCompare(l.title);case"rating-desc":return d.voteAverage-l.voteAverage;case"year-desc":return d.year-l.year;default:return 0}});return this.applyFilters(this.applyQuery(i))});avgRating=v(()=>{let e=this.collectionService.watched().filter(i=>i.userRating!=null);return e.length===0?"\u2014":(e.reduce((i,l)=>i+(l.userRating??0),0)/e.length).toFixed(1)});avgTmdbRating=v(()=>{let e=this.watchedMovies().filter(i=>i.voteAverage>0);return e.length===0?"\u2014":(e.reduce((i,l)=>i+l.voteAverage,0)/e.length).toFixed(1)});totalDecades=v(()=>new Set(this.watchedMovies().map(t=>Math.floor(t.year/10)*10)).size);uniqueLanguages=v(()=>new Set(this.watchedMovies().filter(t=>t.language).map(t=>t.language)).size);watchedThisYear=v(()=>{let e=new Date(new Date().getFullYear(),0,1).getTime();return this.collectionService.watched().filter(t=>t.watchedAt>=e).length});newThisWeek=v(()=>{let e=Date.now()-6048e5;return this.collectionService.watchlist().filter(t=>t.addedAt>=e).length});achievements=v(()=>{let e=this.watchedMovies(),t=e.length,i=new Set(e.map(b=>Math.floor(b.year/10)*10)),l=new Set(e.flatMap(b=>b.genres)),d=e.filter(b=>b.year<1930).length,s=e.filter(b=>b.isStreamable).length,h=this.collectionService.favorites().length,x=this.collectionService.watched().filter(b=>b.userRating!=null).length,{longest:w}=this.computeStreaks();return[{id:"first",icon:"\u{1F3AC}",name:"First Film",description:"Watch your first film",earned:t>=1},{id:"ten",icon:"\u{1F39E}\uFE0F",name:"Film Buff",description:"Watch 10 films",earned:t>=10},{id:"twentyfive",icon:"\u{1F4FD}\uFE0F",name:"Cinephile",description:"Watch 25 films",earned:t>=25},{id:"fifty",icon:"\u{1F3C6}",name:"Film Scholar",description:"Watch 50 films",earned:t>=50},{id:"hundred",icon:"\u{1F451}",name:"Film Historian",description:"Watch 100 films",earned:t>=100},{id:"decades3",icon:"\u{1F4C5}",name:"Time Traveler",description:"Watch films from 3+ decades",earned:i.size>=3},{id:"decades5",icon:"\u23F3",name:"Era Explorer",description:"Watch films from 5+ decades",earned:i.size>=5},{id:"genres5",icon:"\u{1F3AD}",name:"Genre Hopper",description:"Watch films in 5+ genres",earned:l.size>=5},{id:"silent",icon:"\u{1F92B}",name:"Silent Era Fan",description:"Watch 3 films from before 1930",earned:d>=3},{id:"stream5",icon:"\u{1F4FA}",name:"Free Spirit",description:"Watch 5 free films",earned:s>=5},{id:"fav5",icon:"\u2764\uFE0F",name:"Curator",description:"Favorite 5 films",earned:h>=5},{id:"rate10",icon:"\u2B50",name:"Critic",description:"Rate 10 films",earned:x>=10},{id:"streak7",icon:"\u{1F525}",name:"On Fire",description:"7-day watch streak",earned:w>=7}]});nextMilestone=v(()=>{let t=this.achievements().filter(S=>!S.earned);if(t.length===0)return null;let i=this.watchedMovies(),l=i.length,d=new Set(i.map(S=>Math.floor(S.year/10)*10)),s=new Set(i.flatMap(S=>S.genres)),h=i.filter(S=>S.year<1930).length,x=i.filter(S=>S.isStreamable).length,w=this.collectionService.favorites().length,b=this.collectionService.watched().filter(S=>S.userRating!=null).length,{longest:M}=this.computeStreaks(),y={first:{current:l,target:1},ten:{current:l,target:10},twentyfive:{current:l,target:25},fifty:{current:l,target:50},hundred:{current:l,target:100},decades3:{current:d.size,target:3},decades5:{current:d.size,target:5},genres5:{current:s.size,target:5},silent:{current:h,target:3},stream5:{current:x,target:5},fav5:{current:w,target:5},rate10:{current:b,target:10},streak7:{current:M,target:7}},D=null;for(let S of t){let F=y[S.id];if(!F)continue;let G=F.target-F.current,N=Math.round(F.current/F.target*100);(!D||G<D.remaining)&&(D={icon:S.icon,name:S.name,current:F.current,target:F.target,remaining:G,pct:N})}return D});currentStreak=v(()=>this.computeStreaks().current);longestStreak=v(()=>this.computeStreaks().longest);watchedAvgFilmAge=v(()=>{let e=this.watchedMovies();if(e.length<2)return 0;let t=new Date().getFullYear();return Math.round(e.reduce((i,l)=>i+(t-l.year),0)/e.length)});watchedDirectorCount=v(()=>{let e=this.watchedMovies();if(e.length<2)return 0;let t=new Set;for(let i of e)for(let l of i.directors)t.add(l);return t.size});watchedNonEnglishCount=v(()=>{let e=this.watchedMovies();return e.length<2?0:e.filter(t=>t.language&&t.language!=="English"&&t.language!=="en").length});watchedSilentEraCount=v(()=>{let e=this.watchedMovies();return e.length<2?0:e.filter(t=>t.year<1930).length});watchedMedianYear=v(()=>{let e=this.watchedMovies();if(e.length<5)return null;let t=e.map(l=>l.year).sort((l,d)=>l-d),i=Math.floor(t.length/2);return t.length%2===0?Math.round((t[i-1]+t[i])/2):t[i]});watchedAvgYear=v(()=>{let e=this.watchedMovies();return e.length<5?null:Math.round(e.reduce((t,i)=>t+i.year,0)/e.length)});watchedCoDirectedCount=v(()=>{let e=this.watchedMovies();return e.length<2?0:e.filter(t=>t.directors.length>1).length});watchedAvgTitleLength=v(()=>{let e=this.watchedMovies();return e.length<5?null:Math.round(e.reduce((t,i)=>t+i.title.length,0)/e.length)});watchedHighlyRatedCount=v(()=>this.watchedMovies().filter(e=>e.voteAverage>=8).length);watchedShortestTitle=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=e.reduce((i,l)=>i.title.length<=l.title.length?i:l);return t.title.length<=15?t.title:null});watchedStreamablePct=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.isStreamable).length/e.length*100);return t>0&&t<100?t:null});watchedMedianRating=v(()=>{let e=this.watchedMovies().filter(d=>d.voteAverage>0);if(e.length<3)return null;let t=e.map(d=>d.voteAverage).sort((d,s)=>d-s),i=Math.floor(t.length/2);return(t.length%2===0?(t[i-1]+t[i])/2:t[i]).toFixed(1)});watchedDecadeCount=v(()=>new Set(this.watchedMovies().map(t=>Math.floor(t.year/10)*10)).size);watchedGenreCount=v(()=>{let e=new Set;for(let t of this.watchedMovies())for(let i of t.genres)e.add(i);return e.size});watchedTopDirector=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=new Map;for(let l of e)for(let d of l.directors)t.set(d,(t.get(d)??0)+1);let i=[...t.entries()].sort((l,d)=>d[1]-l[1])[0];return i&&i[1]>=2?i[0]:null});watchedLongestTitle=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=e.reduce((i,l)=>i.title.length>=l.title.length?i:l);return t.title.length>=15?t.title:null});watchedRatingSpread=v(()=>{let e=this.watchedMovies().filter(l=>l.voteAverage>0);if(e.length<5)return null;let t=e.map(l=>l.voteAverage).sort((l,d)=>l-d),i=t[t.length-1]-t[0];return i>=2?i.toFixed(1):null});watchedPreWarCount=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=e.filter(i=>i.year<1940).length;return t>=1?t:null});watchedAvgDirectorCount=v(()=>{let e=this.watchedMovies();if(e.length<5)return null;let t=e.reduce((i,l)=>i+l.directors.length,0)/e.length;return t>=1.05?t.toFixed(2):null});watchedOldestYear=v(()=>{let e=this.watchedMovies();return e.length<2?null:e.reduce((t,i)=>t.year<=i.year?t:i).year});watchedNewestYear=v(()=>{let e=this.watchedMovies();return e.length<2?null:e.reduce((t,i)=>t.year>=i.year?t:i).year});favoritesAvgRating=v(()=>{let e=this.favoriteMovies();if(e.length<2)return null;let t=e.filter(i=>i.voteAverage>0);return t.length<2?null:(t.reduce((i,l)=>i+l.voteAverage,0)/t.length).toFixed(1)});watchlistStreamablePct=v(()=>{let e=this.watchlistMovies();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.isStreamable).length/e.length*100);return t>0&&t<100?t:null});watchedImdbLinkedCount=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=e.filter(i=>i.imdbId).length;return t>0?t:null});watchedPosterCoveragePct=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.posterUrl).length/e.length*100);return t>0&&t<100?t:null});favoritesStreamablePct=v(()=>{let e=this.favoriteMovies();if(e.length<3)return null;let t=Math.round(e.filter(i=>i.isStreamable).length/e.length*100);return t>0&&t<100?t:null});watchedYtStreamableCount=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=e.filter(i=>i.youtubeId).length;return t>0?t:null});watchedAvgGenreCount=v(()=>{let e=this.watchedMovies();if(e.length<5)return null;let t=e.reduce((i,l)=>i+l.genres.length,0)/e.length;return t>=1.5?t.toFixed(1):null});watchedLanguageCount=v(()=>{let e=this.watchedMovies();if(e.length<3)return null;let t=new Set(e.filter(i=>i.language).map(i=>i.language));return t.size>=2?t.size:null});favoritesOldestYear=v(()=>{let e=this.favoriteMovies();return e.length<2?null:e.reduce((t,i)=>t.year<=i.year?t:i).year});watchlistOldestYear=v(()=>{let e=this.watchlistMovies();return e.length<2?null:e.reduce((t,i)=>t.year<=i.year?t:i).year});watchlistAvgYear=v(()=>{let e=this.watchlistMovies();return e.length<3?null:Math.round(e.reduce((t,i)=>t+i.year,0)/e.length)});watchedCoDirectedPct=v(()=>{let e=this.watchedMovies();if(e.length<5)return null;let t=Math.round(e.filter(i=>i.directors.length>1).length/e.length*100);return t>0&&t<100?t:null});favoritesIaStreamableCount=v(()=>{let e=this.favoriteMovies();if(e.length<3)return null;let t=e.filter(i=>i.internetArchiveId).length;return t>0?t:null});watchlistIaStreamableCount=v(()=>{let e=this.watchlistMovies();if(e.length<3)return null;let t=e.filter(i=>i.internetArchiveId).length;return t>0?t:null});computeStreaks(){let e=this.collectionService.watched();if(e.length===0)return{current:0,longest:0};let t=new Set;for(let y of e){let D=new Date(y.watchedAt);t.add(`${D.getFullYear()}-${D.getMonth()}-${D.getDate()}`)}let i=[...t].sort();if(i.length===0)return{current:0,longest:0};let l=y=>{let[D,S,F]=y.split("-").map(Number);return new Date(D,S,F)},d=1,s=1;for(let y=1;y<i.length;y++){let D=l(i[y-1]),F=(l(i[y]).getTime()-D.getTime())/(1e3*60*60*24);Math.round(F)===1?(s++,s>d&&(d=s)):s=1}let h=l(i[i.length-1]),x=new Date;return{current:(new Date(x.getFullYear(),x.getMonth(),x.getDate()).getTime()-h.getTime())/(1e3*60*60*24)<=1?s:0,longest:d}}genreStats=v(()=>this.computeStats(this.watchedMovies().flatMap(e=>e.genres)));decadeStats=v(()=>this.computeStats(this.watchedMovies().map(e=>`${Math.floor(e.year/10)*10}s`)));languageStats=v(()=>{let e=this.watchedMovies().filter(s=>s.language);if(e.length<3)return[];let t={en:"English",fr:"French",de:"German",ja:"Japanese",it:"Italian",es:"Spanish",ru:"Russian",sv:"Swedish",da:"Danish",pt:"Portuguese",nl:"Dutch",zh:"Chinese",ko:"Korean",pl:"Polish",cs:"Czech",hu:"Hungarian",fi:"Finnish",el:"Greek",ro:"Romanian",tr:"Turkish",ar:"Arabic",hi:"Hindi",no:"Norwegian",nb:"Norwegian"},i=new Map;for(let s of e){let h=s.language?t[s.language]??s.language.toUpperCase():"Unknown";i.set(h,(i.get(h)??0)+1)}let l=[...i.entries()].sort((s,h)=>h[1]-s[1]).slice(0,8),d=l[0]?.[1]??1;return l.map(([s,h])=>({name:s,count:h,pct:h/d*100}))});directorStats=v(()=>{let e=new Map;for(let l of this.watchedMovies())for(let d of l.directors)e.set(d,(e.get(d)??0)+1);let t=[...e.entries()].filter(([,l])=>l>=2).sort((l,d)=>d[1]-l[1]).slice(0,8),i=t[0]?.[1]??1;return t.map(([l,d])=>({name:l,count:d,pct:d/i*100}))});ratingDistribution=v(()=>{let e=this.collectionService.watched().filter(l=>l.userRating!=null);if(e.length===0)return[];let t=new Map;for(let l of e){let d=Math.round(l.userRating);t.set(d,(t.get(d)??0)+1)}let i=Math.max(...t.values());return Array.from({length:10},(l,d)=>d+1).map(l=>({name:String(l),count:t.get(l)??0,pct:(t.get(l)??0)/i*100})).filter(l=>l.count>0)});monthlyTrends=v(()=>{let e=this.collectionService.watched();if(e.length===0)return[];let t=new Map;for(let d of e){let s=new Date(d.watchedAt),h=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;t.set(h,(t.get(h)??0)+1)}let i=[...t.entries()].sort((d,s)=>d[0].localeCompare(s[0])).slice(-12),l=Math.max(...i.map(([,d])=>d));return i.map(([d,s])=>{let[h,x]=d.split("-");return{label:new Date(parseInt(h),parseInt(x)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:s,pct:s/l*100}})});filmTimeline=v(()=>{let e=this.watchedMovies();if(e.length<2)return[];let t=new Map;for(let h of e)t.set(h.year,(t.get(h.year)??0)+1);let i=[...t.keys()].sort((h,x)=>h-x),l=i[0],s=i[i.length-1]-l||1;return i.map(h=>({year:h,count:t.get(h),pct:(h-l)/s*100}))});monthlyChallenges=v(()=>{let e=this.collectionService.watched(),t=new Date,i=t.getMonth(),l=t.getFullYear(),d=e.filter(M=>{let y=new Date(M.watchedAt);return y.getMonth()===i&&y.getFullYear()===l}),s=d.filter(M=>M.userRating!=null),h=d.filter(M=>M.review),x=this.catalog.movies().filter(M=>d.some(y=>y.movieId===M.id)),w=new Set(x.map(M=>Math.floor(M.year/10)*10)),b=t.toLocaleDateString("en-US",{month:"long"});return{month:b,challenges:[{id:"watch5",name:"Film Buff",description:`Watch 5 films in ${b}`,current:Math.min(d.length,5),target:5,icon:"\u{1F3AC}"},{id:"rate3",name:"Critic",description:`Rate 3 films in ${b}`,current:Math.min(s.length,3),target:3,icon:"\u2B50"},{id:"review1",name:"Reviewer",description:`Write a review in ${b}`,current:Math.min(h.length,1),target:1,icon:"\u270D\uFE0F"},{id:"decades2",name:"Time Traveler",description:"Watch from 2+ decades this month",current:Math.min(w.size,2),target:2,icon:"\u{1F4C5}"}]}});heatmapYears=v(()=>{let e=new Set;for(let t of this.collectionService.watched())e.add(new Date(t.watchedAt).getFullYear());return[...e].sort((t,i)=>i-t)});watchHeatmap=v(()=>{let e=this.collectionService.watched();if(e.length===0)return{weeks:[]};let t=this.heatmapYear(),i=new Date,l=new Date(i.getFullYear(),i.getMonth(),i.getDate()),d=new Map;for(let w of e){let b=new Date(w.watchedAt),M=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`;d.set(M,(d.get(M)??0)+1)}let s,h;t?(s=new Date(t,0,1),s.setDate(s.getDate()-s.getDay()),h=new Date(t,11,31)):(h=l,s=new Date(l),s.setDate(s.getDate()-364-s.getDay()));let x=[];for(let w=0;w<53;w++){let b=[];for(let M=0;M<7;M++){let y=new Date(s);y.setDate(y.getDate()+w*7+M);let D=`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")}`,S=d.get(D)??0,F=y>l;b.push({date:D,count:F?-1:S,level:F?-1:S===0?0:S===1?1:S===2?2:3})}x.push({days:b})}return{weeks:x}});newPlaylistName=z("");editingPlaylistId=z(null);editPlaylistName=z("");playlistMovies(e){let t=this.collectionService.playlists().find(l=>l.id===e);if(!t)return[];let i=this.catalog.movies();return t.movieIds.map(l=>i.find(d=>d.id===l)).filter(l=>!!l)}createPlaylist(){let e=this.newPlaylistName().trim();e&&(this.collectionService.createPlaylist(e),this.newPlaylistName.set(""),this.notifications.show("Playlist created","success"))}startRename(e){this.editingPlaylistId.set(e.id),this.editPlaylistName.set(e.name)}saveRename(e){let t=this.editPlaylistName().trim();t&&this.collectionService.renamePlaylist(e,t),this.editingPlaylistId.set(null)}deletePlaylist(e){this.collectionService.deletePlaylist(e),this.notifications.show("Playlist deleted","info")}discoveryGaps=v(()=>{let e=this.watchedMovies();if(e.length<5)return[];let t=new Set(e.flatMap(x=>x.genres)),i=new Set(e.map(x=>Math.floor(x.year/10)*10)),l=this.catalog.movies().filter(x=>x.isStreamable),d=[],s=new Map;for(let x of l)for(let w of x.genres)s.set(w,(s.get(w)??0)+1);for(let[x,w]of s)!t.has(x)&&w>=10&&d.push({label:x,count:w,link:["/genre",x]});let h=new Map;for(let x of l){let w=Math.floor(x.year/10)*10;h.set(w,(h.get(w)??0)+1)}for(let[x,w]of h)!i.has(x)&&w>=5&&d.push({label:`${x}s`,count:w,link:["/decade",String(x)]});return d.sort((x,w)=>w.count-x.count).slice(0,8)});viewingInsights=v(()=>{let e=this.collectionService.watched();if(e.length<3)return[];let t=this.catalog.movies(),i=new Map(t.map(g=>[g.id,g])),l=[],d=e.map(g=>g.watchedAt).sort(),s=new Date(d[0]),h=new Date,x=Math.max(1,(h.getFullYear()-s.getFullYear())*12+h.getMonth()-s.getMonth()+1),w=(e.length/x).toFixed(1);l.push({label:"Films per Month",value:w});let b=new Map;for(let g of e){let f=i.get(g.movieId);if(f)for(let P of f.genres)b.set(P,(b.get(P)??0)+1)}let M=[...b.entries()].sort((g,f)=>f[1]-g[1])[0];M&&l.push({label:"Favorite Genre",value:M[0]});let y=new Map;for(let g of e){let f=i.get(g.movieId);if(f)for(let P of f.directors)y.set(P,(y.get(P)??0)+1)}let D=[...y.entries()].sort((g,f)=>f[1]-g[1])[0];D&&D[1]>=2&&l.push({label:"Top Director",value:D[0]});let S=new Map;for(let g of e){let f=i.get(g.movieId);if(f){let P=Math.floor(f.year/10)*10;S.set(P,(S.get(P)??0)+1)}}let F=[...S.entries()].sort((g,f)=>f[1]-g[1])[0];F&&l.push({label:"Preferred Decade",value:`${F[0]}s`});let G=e.reduce((g,f)=>{let P=i.get(f.movieId);return P?g+P.year:g},0),N=e.filter(g=>i.has(g.movieId)).length;N>=3&&l.push({label:"Avg Film Year",value:`${Math.round(G/N)}`});let V=0,Y=9999;for(let g of e){let f=i.get(g.movieId);f&&(f.year>V&&(V=f.year),f.year<Y&&(Y=f.year))}V>0&&l.push({label:"Newest Film",value:`${V}`}),Y<9999&&l.push({label:"Oldest Film",value:`${Y}`});let $=e.filter(g=>g.userRating!=null).sort((g,f)=>(f.userRating??0)-(g.userRating??0));if($.length>0){let g=i.get($[0].movieId);if(g){let f=g.title.length>18?g.title.slice(0,16)+"...":g.title;l.push({label:"Highest Rated",value:f})}}let q=e.filter(g=>i.get(g.movieId)?.isStreamable).length;e.length>=3&&l.push({label:"Streamable %",value:`${Math.round(q/e.length*100)}%`});let H=new Set;for(let g of e){let f=i.get(g.movieId);if(f)for(let P of f.directors)H.add(P)}H.size>=2&&l.push({label:"Unique Directors",value:`${H.size}`});let K=new Set;for(let g of e){let f=i.get(g.movieId);f&&f.language&&K.add(f.language)}K.size>=2&&l.push({label:"Languages",value:`${K.size}`});let J=new Set;for(let g of e){let f=i.get(g.movieId);if(f)for(let P of f.genres)J.add(P)}J.size>=3&&l.push({label:"Genres Explored",value:`${J.size}`});let Z=e.filter(g=>g.userRating!=null&&g.userRating>0);if(Z.length>=3){let g=Z.reduce((f,P)=>f+(P.userRating??0),0)/Z.length;l.push({label:"Avg Your Rating",value:g.toFixed(1)})}let u=new Set;for(let g of e){let f=i.get(g.movieId);f&&u.add(Math.floor(f.year/10)*10)}if(u.size>=3){let g=[...u].sort((f,P)=>f-P);l.push({label:"Decade Span",value:`${g[0]}s\u2013${g[g.length-1]}s`})}let _t=e.filter(g=>{let f=i.get(g.movieId);return f&&f.directors.length>1}).length;_t>0&&l.push({label:"Co-directed Films",value:`${_t}`});let rt=e.map(g=>i.get(g.movieId)).filter(g=>!!g&&g.voteAverage>0);if(rt.length>=3){let g=rt.reduce((f,P)=>f+P.voteAverage,0)/rt.length;l.push({label:"Avg TMDb Rating",value:g.toFixed(1)})}let It=new Date().getFullYear(),ct=e.map(g=>i.get(g.movieId)).filter(g=>!!g).map(g=>It-g.year);if(ct.length>=3){let g=Math.round(ct.reduce((f,P)=>f+P,0)/ct.length);g>=10&&l.push({label:"Avg Film Age",value:`${g} years`})}if($.length>=3){let g=0,f=0,P=0;for(let U of $){let dt=i.get(U.movieId);dt&&dt.voteAverage>0&&U.userRating!=null&&(g+=U.userRating,f+=dt.voteAverage,P++)}if(P>=3){let U=g/P-f/P;Math.abs(U)>=.3&&l.push({label:"Rating Bias",value:U>0?`+${U.toFixed(1)} vs TMDb`:`${U.toFixed(1)} vs TMDb`})}}return l});watchTimeline=v(()=>{let e=new Map(this.catalog.movies().map(t=>[t.id,t]));return[...this.collectionService.watched()].sort((t,i)=>i.watchedAt-t.watchedAt).slice(0,20).map(t=>{let i=e.get(t.movieId),l=new Date(t.watchedAt);return{movieId:t.movieId,title:i?.title??"Unknown Film",dateLabel:l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),rating:t.userRating}})});tabs=["watchlist","watched","favorites","playlists","stats"];onTabKeydown(e){let t=this.tabs.indexOf(this.activeTab()),i=t;if(e.key==="ArrowRight")i=(t+1)%this.tabs.length;else if(e.key==="ArrowLeft")i=(t-1+this.tabs.length)%this.tabs.length;else if(e.key==="Home")i=0;else if(e.key==="End")i=this.tabs.length-1;else return;e.preventDefault(),this.activeTab.set(this.tabs[i]),e.currentTarget.querySelectorAll('[role="tab"]')[i]?.focus()}ngOnInit(){this.catalog.load(),this.titleService.setTitle("My Collection \u2014 BW Cinema");let e="Manage your personal collection \u2014 watchlist, watched history, and viewing stats.";this.metaService.updateTag({name:"description",content:e}),this.metaService.updateTag({property:"og:description",content:e}),this.metaService.updateTag({name:"twitter:description",content:e});let t=this.route.snapshot.queryParams.shared;if(t){this.isSharedView.set(!0);let i=t.split(","),l=()=>{if(this.catalog.loaded()){let d=this.catalog.movies();this.sharedMovies.set(i.map(s=>d.find(h=>h.id===s)).filter(s=>!!s))}else setTimeout(l,100)};l()}}shareCollection(){let e=this.currentMovies();if(e.length===0){this.notifications.show("No films to share","info");return}let t=e.map(l=>l.id).join(","),i=`${window.location.origin}/collection?shared=${t}`;navigator.clipboard.writeText(i).then(()=>{this.notifications.show("Share link copied to clipboard","success")}).catch(()=>{this.notifications.show("Failed to copy link","error")})}onSortChange(e){this.sortBy.set(e.target.value)}onRatingFilterChange(e){this.ratingFilter.set(parseInt(e.target.value,10))}applyQuery(e){let t=this.collectionQuery().toLowerCase().trim();return t?e.filter(i=>i.title.toLowerCase().includes(t)||i.directors.some(l=>l.toLowerCase().includes(t))||i.genres.some(l=>l.toLowerCase().includes(t))):e}applyFilters(e){let t=this.genreFilter(),i=this.decadeFilter(),l=e;if(t&&(l=l.filter(d=>d.genres.includes(t))),i){let d=parseInt(i,10);l=l.filter(s=>Math.floor(s.year/10)*10===d)}return l}applyRatingFilter(e){let t=this.ratingFilter();return t===0?e:t===-1?e.filter(i=>{let l=this.collectionService.watched().find(d=>d.movieId===i.id);return l&&l.userRating==null}):e.filter(i=>{let l=this.collectionService.watched().find(d=>d.movieId===i.id);return l&&l.userRating!=null&&l.userRating>=t})}exportCsv(){let e=this.currentMovies(),t=this.activeTab(),i=["Title","Year","Genres","Directors","Rating","Streamable"];t==="watched"&&i.push("Your Rating");let l=e.map(w=>{let b=[`"${w.title.replace(/"/g,'""')}"`,w.year,`"${w.genres.join(", ")}"`,`"${w.directors.join(", ")}"`,w.voteAverage||"",w.isStreamable?"Yes":"No"];if(t==="watched"){let M=this.collectionService.watched().find(y=>y.movieId===w.id);b.push(M?.userRating??"")}return b.join(",")}),d=[i.join(","),...l].join(`
`),s=new Blob([d],{type:"text/csv"}),h=URL.createObjectURL(s),x=document.createElement("a");x.href=h,x.download=`bw-cinema-${t}-${new Date().toISOString().slice(0,10)}.csv`,x.click(),URL.revokeObjectURL(h)}exportLetterboxd(){let e=this.activeTab()==="watched"?this.sortedWatched():this.sortedWatchlist(),t=this.activeTab(),i=["imdbID","Title","Year","Rating10"],l=e.map(w=>{let b=t==="watched"?this.collectionService.watched().find(M=>M.movieId===w.id):null;return[w.imdbId??"",`"${w.title.replace(/"/g,'""')}"`,w.year,b?.userRating??""].join(",")}),d=[i.join(","),...l].join(`
`),s=new Blob([d],{type:"text/csv"}),h=URL.createObjectURL(s),x=document.createElement("a");x.href=h,x.download=`letterboxd-${t}-${new Date().toISOString().slice(0,10)}.csv`,x.click(),URL.revokeObjectURL(h),this.notifications.show("Letterboxd CSV exported","success")}importLetterboxd(e){let t=e.target,i=t.files?.[0];if(!i)return;let l=new FileReader;l.onload=()=>{try{let s=l.result.split(`
`).filter(N=>N.trim());if(s.length<2){this.notifications.show("CSV file is empty","error");return}let h=s[0].toLowerCase(),x=h.includes("imdbid"),w=h.includes("title");if(!x&&!w){this.notifications.show("CSV must have imdbID or Title column","error");return}let b=this.parseCsvRow(s[0]),M=b.findIndex(N=>N.toLowerCase().trim()==="imdbid"),y=b.findIndex(N=>N.toLowerCase().trim()==="title"),D=b.findIndex(N=>N.toLowerCase().trim()==="year"),S=b.findIndex(N=>N.toLowerCase().trim().includes("rating")),F=this.catalog.movies(),G=0;for(let N=1;N<s.length;N++){let V=this.parseCsvRow(s[N]);if(V.length===0)continue;let Y;if(M>=0&&V[M]&&(Y=F.find($=>$.imdbId===V[M].trim())),!Y&&y>=0&&V[y]){let $=V[y].trim().toLowerCase(),q=D>=0?parseInt(V[D],10):NaN;Y=F.find(H=>H.title.toLowerCase()===$&&(isNaN(q)||H.year===q))}if(Y&&!this.collectionService.isWatched(Y.id)){let $=S>=0?parseFloat(V[S]):NaN;this.collectionService.markWatched(Y.id,isNaN($)?null:Math.round($*2)/2),G++}}this.notifications.show(`Imported ${G} film${G!==1?"s":""}`,"success")}catch{this.notifications.show("Failed to parse CSV file","error")}t.value=""},l.readAsText(i)}parseCsvRow(e){let t=[],i="",l=!1;for(let d=0;d<e.length;d++){let s=e[d];l?s==='"'?e[d+1]==='"'?(i+='"',d++):l=!1:i+=s:s==='"'?l=!0:s===","?(t.push(i),i=""):i+=s}return t.push(i),t}exportBackup(){let e={watchlist:this.collectionService.watchlist(),watched:this.collectionService.watched(),favorites:this.collectionService.favorites(),exportedAt:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),l=document.createElement("a");l.href=i,l.download=`bw-cinema-backup-${new Date().toISOString().slice(0,10)}.json`,l.click(),URL.revokeObjectURL(i),this.notifications.show("Backup downloaded","success")}importBackup(e){let t=e.target,i=t.files?.[0];if(!i)return;let l=new FileReader;l.onload=()=>{try{let d=JSON.parse(l.result);if(d.watchlist&&Array.isArray(d.watchlist))for(let s of d.watchlist)s.movieId&&!this.collectionService.isInWatchlist(s.movieId)&&!this.collectionService.isWatched(s.movieId)&&this.collectionService.addToWatchlist(s.movieId);if(d.watched&&Array.isArray(d.watched))for(let s of d.watched)s.movieId&&!this.collectionService.isWatched(s.movieId)&&this.collectionService.markWatched(s.movieId,s.userRating??null);if(d.favorites&&Array.isArray(d.favorites))for(let s of d.favorites)typeof s=="string"&&!this.collectionService.isFavorite(s)&&this.collectionService.toggleFavorite(s);this.notifications.show("Collection restored successfully","success")}catch{this.notifications.show("Invalid backup file","error")}t.value=""},l.readAsText(i)}sortMovies(e,t){let i=this.sortBy(),l=t==="watchlist"?this.collectionService.watchlist():this.collectionService.watched(),d=new Map(l.map(s=>[s.movieId,"addedAt"in s?s.addedAt:s.watchedAt]));return[...e].sort((s,h)=>{switch(i){case"added-desc":return(d.get(h.id)??0)-(d.get(s.id)??0);case"added-asc":return(d.get(s.id)??0)-(d.get(h.id)??0);case"title-asc":return s.title.localeCompare(h.title);case"title-desc":return h.title.localeCompare(s.title);case"rating-desc":return h.voteAverage-s.voteAverage;case"year-desc":return h.year-s.year;default:return 0}})}computeStats(e){let t=new Map;for(let d of e)t.set(d,(t.get(d)??0)+1);let i=[...t.entries()].sort((d,s)=>s[1]-d[1]).slice(0,8),l=i[0]?.[1]??1;return i.map(([d,s])=>({name:d,count:s,pct:s/l*100}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pt({type:n,selectors:[["app-collection"]],decls:3,vars:1,consts:[[1,"collection","container"],[1,"collection__shared-info"],[3,"movies"],[1,"collection__empty"],[1,"collection__empty-title"],[1,"collection__empty-text"],["routerLink","/browse",1,"btn-primary"],["role","alert",1,"catalog-error"],[3,"click"],[1,"collection__title-row"],["routerLink","/wrapped",1,"collection__wrapped-link"],[1,"collection__controls"],["role","tablist",1,"collection__tabs",3,"keydown"],["role","tab",1,"collection__tab",3,"click"],[1,"collection__count"],[1,"collection__new-dot",3,"title"],[1,"collection__search"],[1,"collection__actions"],[1,"collection__backup"],["role","tabpanel","aria-live","polite"],["role","tabpanel",1,"playlists"],["role","tabpanel",1,"stats"],["type","search","placeholder","Search in collection...","autocomplete","off",1,"collection__search-input",3,"input","value"],[1,"collection__filter-select",3,"change"],["value",""],[3,"value"],[1,"collection__rating-filter"],[1,"collection__rating-filter",3,"change"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","-1"],["for","collection-sort",1,"sr-only"],["id","collection-sort",1,"collection__sort",3,"change"],["value","added-desc","selected",""],["value","added-asc"],["value","title-asc"],["value","title-desc"],["value","rating-desc"],["value","year-desc"],[3,"modeChange","mode"],[1,"btn-ghost","collection__export",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"btn-ghost","collection__export","collection__import-label"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["type","file","accept",".csv",1,"sr-only",3,"change"],[1,"btn-ghost","collection__backup-btn",3,"click"],[1,"btn-ghost","collection__backup-btn","collection__restore-label"],["type","file","accept",".json",1,"sr-only",3,"change"],[1,"playlists__create"],["type","text","placeholder","New playlist name...",1,"playlists__input",3,"input","keydown.enter","value"],[1,"btn-secondary",3,"click","disabled"],[1,"playlists__card"],[1,"playlists__header"],["type","text",1,"playlists__rename-input",3,"value"],[1,"playlists__name"],[1,"playlists__count"],["aria-label","Delete playlist",1,"btn-ghost","playlists__delete",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"playlists__movies"],["type","text",1,"playlists__rename-input",3,"input","keydown.enter","blur","value"],[1,"playlists__name",3,"click"],[1,"playlists__movie",3,"routerLink"],["loading","lazy",3,"src","alt"],[1,"playlists__movie-placeholder"],[1,"stats__overview"],[1,"stats__card"],[1,"stats__card-value"],[1,"stats__card-label"],[1,"stats__card","stats__card--highlight"],[1,"stats__milestone"],[1,"achievements"],[1,"challenges"],[1,"challenges__grid"],[1,"challenges__card",3,"challenges__card--done"],[1,"stats__section"],[1,"stats__sections"],[1,"stats__bars"],[1,"stats__bar-row",3,"routerLink"],[1,"stats__section","stats__lang-section"],[1,"stats__section","stats__rating-dist"],[1,"stats__section","stats__trends"],[1,"heatmap"],[1,"film-tl"],[1,"gaps"],[1,"insights"],[1,"timeline"],[1,"stats__card-value",2,"font-size","0.75em"],[1,"stats__card-value",2,"font-size","0.85em"],[1,"stats__milestone-icon"],[1,"stats__milestone-info"],[1,"stats__milestone-name"],[1,"stats__milestone-desc"],[1,"stats__milestone-bar-track"],[1,"stats__milestone-bar-fill"],[1,"stats__milestone-progress"],[1,"achievements__grid"],[1,"achievements__badge",3,"achievements__badge--earned"],[1,"achievements__badge"],[1,"achievements__icon"],[1,"achievements__name"],[1,"achievements__desc"],[1,"challenges__card"],[1,"challenges__icon"],[1,"challenges__info"],[1,"challenges__name"],[1,"challenges__desc"],[1,"challenges__bar-track"],[1,"challenges__bar-fill"],[1,"challenges__progress"],[1,"stats__bar-row"],[1,"stats__bar-label","stats__bar-label--link",3,"routerLink"],[1,"stats__bar-track"],[1,"stats__bar-fill"],[1,"stats__bar-count"],[1,"stats__bar-label","stats__bar-label--link"],[1,"stats__bar-label"],[1,"stats__trend-chart"],[1,"stats__trend-col"],[1,"stats__trend-count"],[1,"stats__trend-bar"],[1,"stats__trend-label"],[1,"heatmap__header"],[1,"heatmap__years"],[1,"heatmap__scroll"],[1,"heatmap__grid"],[1,"heatmap__col"],[1,"heatmap__legend"],[1,"heatmap__cell","heatmap__cell--l0"],[1,"heatmap__cell","heatmap__cell--l1"],[1,"heatmap__cell","heatmap__cell--l2"],[1,"heatmap__cell","heatmap__cell--l3"],[1,"heatmap__year-btn",3,"click"],[1,"heatmap__year-btn",3,"heatmap__year-btn--active"],[1,"heatmap__cell",3,"heatmap__cell--l1","heatmap__cell--l2","heatmap__cell--l3","heatmap__cell--future","title"],[1,"heatmap__cell",3,"title"],[1,"film-tl__scroll"],[1,"film-tl__track"],[1,"film-tl__line"],[1,"film-tl__point",3,"left"],[1,"film-tl__point"],[1,"film-tl__marker",3,"title"],[1,"film-tl__year"],[1,"gaps__desc"],[1,"gaps__grid"],[1,"gaps__chip",3,"routerLink"],[1,"gaps__chip-label"],[1,"gaps__chip-count"],[1,"insights__grid"],[1,"insights__card"],[1,"insights__value"],[1,"insights__label"],[1,"timeline__list"],[1,"timeline__item"],[1,"timeline__dot"],[1,"timeline__content"],[1,"timeline__title",3,"routerLink"],[1,"timeline__date"],[1,"timeline__rating"]],template:function(t,i){t&1&&(o(0,"div",0),m(1,zt,6,3)(2,Bn,2,1),a()),t&2&&(r(),p(i.isSharedView()?1:2))},dependencies:[bt,Tt,Et,Pt,Ot],styles:['.collection[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.collection__shared-info[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 var(--space-xl)}.collection__controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-xl)}.collection__title-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between}.collection__wrapped-link[_ngcontent-%COMP%]{font:600 .85rem var(--font-body);color:var(--accent-gold)}.collection__tabs[_ngcontent-%COMP%]{display:flex;gap:2px;background:var(--bg-surface);border-radius:var(--radius-lg);padding:4px;width:fit-content}.collection__tab[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-tertiary);font-size:.95rem;font-weight:600;padding:var(--space-sm) var(--space-xl);cursor:pointer;border-radius:var(--radius);display:flex;align-items:center;gap:var(--space-sm);min-height:40px}.collection__tab[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.collection__tab--active[_ngcontent-%COMP%]{color:var(--accent-gold);background:var(--bg-raised)}.collection__count[_ngcontent-%COMP%]{font-size:.75rem;background:var(--accent-gold-dim);color:var(--accent-gold);padding:1px 8px;border-radius:10px}.collection__new-dot[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:50%;background:#198754;vertical-align:super}.collection__actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);align-items:center}.collection__sort[_ngcontent-%COMP%]{min-width:160px;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);background:var(--bg-surface)}.collection__export[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:.85rem}.collection__import-label[_ngcontent-%COMP%], .collection__restore-label[_ngcontent-%COMP%]{cursor:pointer}.collection__search[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm);width:100%}.collection__search-input[_ngcontent-%COMP%], .playlists__input[_ngcontent-%COMP%]{flex:1;max-width:320px;padding:var(--space-sm) var(--space-md);background:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border);border-radius:var(--radius-lg);font-size:.9rem}.collection__search-input[_ngcontent-%COMP%]:focus, .playlists__input[_ngcontent-%COMP%]:focus{border-color:var(--accent-gold);outline:none}.collection__filter-select[_ngcontent-%COMP%], .collection__rating-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);background:var(--bg-surface);border:1px solid var(--border);color:var(--text-primary);font-size:.85rem;min-width:120px}.collection__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) var(--space-lg)}.collection__empty-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.3rem;margin:0 0 var(--space-sm)}.collection__empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-lg)}.stats__overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:var(--space-md);margin-bottom:var(--space-2xl)}.stats__card[_ngcontent-%COMP%], .insights__card[_ngcontent-%COMP%], .achievements__badge[_ngcontent-%COMP%], .challenges__card[_ngcontent-%COMP%], .playlists__card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md)}.stats__card[_ngcontent-%COMP%]{padding:var(--space-lg);text-align:center}.stats__card--highlight[_ngcontent-%COMP%], .achievements__badge--earned[_ngcontent-%COMP%], .challenges__card--done[_ngcontent-%COMP%]{border-color:var(--accent-gold);background:var(--accent-gold-dim)}.stats__card-value[_ngcontent-%COMP%], .insights__value[_ngcontent-%COMP%]{display:block;font-family:var(--font-heading);font-weight:700;color:var(--accent-gold);margin-bottom:4px}.stats__card-value[_ngcontent-%COMP%]{font-size:2rem}.stats__card-label[_ngcontent-%COMP%], .insights__label[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;color:var(--text-tertiary)}.stats__sections[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-xl)}.stats__section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .achievements[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .challenges[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.stats__bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.stats__bar-row[_ngcontent-%COMP%], .playlists__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.stats__bar-label[_ngcontent-%COMP%]{min-width:80px;font-size:.85rem;color:var(--text-secondary);text-align:right}.stats__bar-track[_ngcontent-%COMP%], .stats__milestone-bar-track[_ngcontent-%COMP%], .challenges__bar-track[_ngcontent-%COMP%]{height:8px;background:var(--bg-raised);border-radius:4px}.stats__bar-fill[_ngcontent-%COMP%], .stats__milestone-bar-fill[_ngcontent-%COMP%], .challenges__bar-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-gold)}.stats__bar-track[_ngcontent-%COMP%]{flex:1}.stats__bar-count[_ngcontent-%COMP%]{min-width:24px;font-size:.8rem;color:var(--text-tertiary)}.stats__bar-label--link[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.stats__bar-label--link[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.collection__backup[_ngcontent-%COMP%], .playlists__create[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.collection__backup[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.collection__backup-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:var(--space-xs) var(--space-md)}.collection__restore-label[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.stats__lang-section[_ngcontent-%COMP%], .stats__rating-dist[_ngcontent-%COMP%]{margin-top:var(--space-xl);max-width:500px}.stats__milestone[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius-lg);margin-bottom:var(--space-xl)}.stats__milestone-icon[_ngcontent-%COMP%], .challenges__icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.stats__milestone-info[_ngcontent-%COMP%], .challenges__info[_ngcontent-%COMP%]{flex:1;min-width:0}.stats__milestone-name[_ngcontent-%COMP%], .challenges__name[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:.9rem}.stats__milestone-desc[_ngcontent-%COMP%], .challenges__desc[_ngcontent-%COMP%]{display:block;font-size:.75rem}.stats__milestone-desc[_ngcontent-%COMP%]{color:var(--text-secondary)}.challenges__desc[_ngcontent-%COMP%]{color:var(--text-tertiary)}.stats__milestone-bar-track[_ngcontent-%COMP%]{width:80px;height:6px}.stats__milestone-progress[_ngcontent-%COMP%], .challenges__progress[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary)}.stats__milestone-progress[_ngcontent-%COMP%]{font-weight:600;white-space:nowrap}.achievements__grid[_ngcontent-%COMP%], .challenges__grid[_ngcontent-%COMP%]{display:grid;gap:var(--space-sm)}.achievements__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.achievements__badge[_ngcontent-%COMP%]{text-align:center;opacity:.35}.achievements__badge--earned[_ngcontent-%COMP%]{opacity:1}.achievements__icon[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:var(--space-xs)}.achievements__name[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;margin-bottom:2px}.achievements__desc[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.stats__trends[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.stats__trend-chart[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);align-items:flex-end;height:160px}.stats__trend-col[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;justify-content:flex-end}.stats__trend-count[_ngcontent-%COMP%]{font-size:.7rem}.stats__trend-bar[_ngcontent-%COMP%]{width:100%;max-width:40px;min-height:4px;background:var(--accent-gold);border-radius:3px 3px 0 0}.stats__trend-label[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);white-space:nowrap}.playlists__create[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.playlists__input[_ngcontent-%COMP%]{font-size:.95rem}.playlists__card[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.playlists__header[_ngcontent-%COMP%]{gap:var(--space-md);margin-bottom:var(--space-sm)}.playlists__name[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;cursor:pointer}.playlists__name[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.playlists__rename-input[_ngcontent-%COMP%]{font:700 1.1rem var(--font-body);background:var(--bg-raised);border:1px solid var(--accent-gold);border-radius:var(--radius);padding:2px 8px}.playlists__count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.playlists__delete[_ngcontent-%COMP%]{margin-left:auto;color:var(--text-tertiary);width:36px;height:36px;padding:0;display:flex;align-items:center;justify-content:center}.playlists__delete[_ngcontent-%COMP%]:hover{color:#e53e3e}.playlists__movies[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);overflow-x:auto}.playlists__movie[_ngcontent-%COMP%]{flex:0 0 60px}.playlists__movie[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius-sm)}.playlists__movie-placeholder[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;color:var(--text-tertiary)}.challenges[_ngcontent-%COMP%], .achievements[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.challenges__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}.challenges__card[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);align-items:flex-start}.challenges__name[_ngcontent-%COMP%]{margin-bottom:2px}.challenges__desc[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.challenges__bar-track[_ngcontent-%COMP%]{height:6px}.challenges__progress[_ngcontent-%COMP%]{font-size:.7rem}.heatmap__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:var(--space-sm);margin-bottom:var(--space-md)}.heatmap__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.heatmap__years[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.heatmap__year-btn[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;background:var(--bg-raised);border:1px solid transparent;color:var(--text-tertiary);font:600 .75rem var(--font-body);cursor:pointer}.heatmap__year-btn[_ngcontent-%COMP%]:hover, .heatmap__year-btn--active[_ngcontent-%COMP%]{color:var(--accent-gold);border-color:var(--accent-gold)}.heatmap__year-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim)}.heatmap[_ngcontent-%COMP%], .film-tl[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]{margin-top:var(--space-2xl)}.heatmap[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.heatmap__scroll[_ngcontent-%COMP%], .film-tl__scroll[_ngcontent-%COMP%]{overflow-x:auto}.heatmap__grid[_ngcontent-%COMP%], .heatmap__col[_ngcontent-%COMP%]{display:flex;gap:2px}.heatmap__col[_ngcontent-%COMP%]{flex-direction:column}.heatmap__cell[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px;background:var(--bg-raised)}.heatmap__cell--l1[_ngcontent-%COMP%]{background:#d4af374d}.heatmap__cell--l2[_ngcontent-%COMP%]{background:#d4af3799}.heatmap__cell--l3[_ngcontent-%COMP%]{background:var(--accent-gold)}.heatmap__cell--future[_ngcontent-%COMP%]{background:transparent}.heatmap__legend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;margin-top:var(--space-sm);justify-content:flex-end;font-size:.65rem;color:var(--text-tertiary)}.heatmap__legend[_ngcontent-%COMP%]   .heatmap__cell[_ngcontent-%COMP%]{width:10px;height:10px}.film-tl[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.film-tl__scroll[_ngcontent-%COMP%]{padding-bottom:var(--space-md)}.film-tl__track[_ngcontent-%COMP%]{position:relative;min-width:min(600px,100%);height:80px;margin:0 var(--space-md)}.film-tl__line[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;height:2px;background:var(--border)}.film-tl__point[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center}.film-tl__marker[_ngcontent-%COMP%]{width:8px;background:var(--accent-gold);border-radius:4px;margin-bottom:4px}.film-tl__year[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);white-space:nowrap;margin-top:4px}.timeline__list[_ngcontent-%COMP%]{position:relative;padding-left:var(--space-lg)}.gaps[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.gaps[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.gaps__desc[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);margin:0 0 var(--space-md)}.gaps__grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.gaps__chip[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;padding:var(--space-sm) var(--space-md);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:var(--text-secondary)}.gaps__chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.gaps__chip-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600}.gaps__chip-count[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.insights[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.insights__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--space-md);margin-top:var(--space-md)}.insights__card[_ngcontent-%COMP%]{text-align:center}.insights__value[_ngcontent-%COMP%]{font-size:1.2rem}.insights__label[_ngcontent-%COMP%]{font-size:.75rem}.timeline__list[_ngcontent-%COMP%]:before{content:"";position:absolute;left:6px;top:4px;bottom:4px;width:2px;background:var(--border)}.timeline__item[_ngcontent-%COMP%]{position:relative;display:flex;gap:var(--space-md);padding-bottom:var(--space-md)}.timeline__dot[_ngcontent-%COMP%]{position:absolute;left:calc(-1 * var(--space-lg) + 2px);top:4px;width:10px;height:10px;border-radius:50%;background:var(--accent-gold);border:2px solid var(--bg-deep)}.timeline__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.timeline__title[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;font-size:.95rem;text-decoration:none}.timeline__title[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.timeline__date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.timeline__rating[_ngcontent-%COMP%]{font-size:.8rem;color:var(--accent-gold)}@media(max-width:768px){.collection__controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.stats__sections[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats__overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:480px){.collection__tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:nowrap;max-width:100%;scrollbar-width:none}.collection__tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.collection__tab[_ngcontent-%COMP%]{flex-shrink:0;padding:var(--space-sm) var(--space-md);font-size:.85rem}.stats__overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}.stats__overview[_ngcontent-%COMP%]   .stats__card[_ngcontent-%COMP%]{padding:var(--space-md)}.collection__actions[_ngcontent-%COMP%]{flex-wrap:wrap}.challenges__grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}'],changeDetection:0})};export{kt as CollectionComponent};
