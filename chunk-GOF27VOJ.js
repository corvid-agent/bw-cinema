import{a as le}from"./chunk-SATL3JCH.js";import{a as re}from"./chunk-HAGFLECC.js";import{a as ae}from"./chunk-VYUST5ET.js";import{a as oe}from"./chunk-JVUEOQ2T.js";import{a as ie}from"./chunk-U6UKIARX.js";import{$ as p,$a as te,Aa as C,F as Q,Ja as b,K as k,Ma as u,O as r,R as X,_ as c,ba as Z,ca as E,da as W,ea as x,fa as a,fb as ne,ga as o,ha as f,la as j,na as q,pa as v,v as I,va as O,wa as ee,x as U,y as V,ya as l,z as K,za as s}from"./chunk-SA65F7OW.js";var pe=n=>["/genre",n],se=n=>["/director",n],me=n=>["/decade",n],J=n=>["/movie",n],_e=(n,t)=>t.month,ce=(n,t)=>t.name,ge=(n,t)=>t.decade;function ue(n,t){if(n&1){let e=j();a(0,"div",0)(1,"div",1)(2,"p"),l(3),o(),a(4,"button",2),q("click",function(){U(e);let d=v();return V(d.catalog.retry())}),l(5,"Try Again"),o()()()}n&2&&(r(3),s(t))}function ve(n,t){n&1&&(a(0,"div",0),f(1,"app-loading-spinner"),o())}function he(n,t){if(n&1){let e=j();a(0,"button",11),q("click",function(){let d=U(e).$implicit,_=v(2);return V(_.selectedYear.set(d))}),l(1),o()}if(n&2){let e=t.$implicit,i=v(2);ee("wrapped__year-btn--active",e===i.selectedYear()),r(),s(e)}}function Ce(n,t){if(n&1){let e=j();a(0,"div",8)(1,"button",12),q("click",function(){U(e);let d=v(2);return V(d.shareWrapped())}),K(),a(2,"svg",13),f(3,"circle",14)(4,"circle",15)(5,"circle",16)(6,"line",17)(7,"line",18),o(),l(8," Share Your Wrapped "),o()()}}function xe(n,t){if(n&1&&(a(0,"div",9)(1,"p",19),l(2),o(),a(3,"p",20),l(4,"Start watching to see your year in review!"),o(),a(5,"a",21),l(6,"Browse Films"),o()()),n&2){let e=v(2);r(2),C("No films watched in ",e.selectedYear())}}function fe(n,t){if(n&1&&(a(0,"div",10)(1,"p",22),l(2,"Just getting started!"),o(),a(3,"p",23),l(4),o(),a(5,"a",21),l(6,"Discover More Films"),o()()),n&2){let e=v(2);r(4),C("You watched 1 film in ",e.selectedYear(),". Watch a few more to unlock your full year in review.")}}function we(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Languages"),o()()),n&2){let e=v(3);r(2),s(e.languagesWatched())}}function ye(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4),o()()),n&2){let e=t;r(2),s(e.name),r(2),C("Busiest Month (",e.count,")")}}function be(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Month Streak"),o()()),n&2){let e=v(3);r(2),s(e.longestStreak())}}function Se(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Directors"),o()()),n&2){let e=v(3);r(2),s(e.directorsExplored())}}function Me(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Genres"),o()()),n&2){let e=v(3);r(2),s(e.genresExplored())}}function Ee(n,t){n&1&&(a(0,"div",28)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Decade Span"),o()()),n&2&&(r(2),s(t))}function We(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Free to Stream"),o()()),n&2){let e=v(3);r(2),C("",e.streamablePct(),"%")}}function Fe(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Decades Covered"),o()()),n&2){let e=v(3);r(2),s(e.uniqueDecadeCount())}}function De(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Avg Film Age (yrs)"),o()()),n&2){let e=v(3);r(2),s(e.avgFilmAge())}}function Te(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Avg TMDb Rating"),o()()),n&2&&(r(2),s(t))}function Pe(n,t){n&1&&(a(0,"div",28)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Top Decade"),o()()),n&2&&(r(2),s(t))}function Ie(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Silent Era Films"),o()()),n&2){let e=v(3);r(2),s(e.silentEraWatched())}}function ke(n,t){n&1&&(a(0,"div",28)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Top Genre"),o()()),n&2&&(r(2),s(t))}function Oe(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Oldest Film (yrs)"),o()()),n&2&&(r(2),s(t))}function Ne(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Avg Your Rating"),o()()),n&2&&(r(2),s(t))}function Re(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Newest Film"),o()()),n&2&&(r(2),s(t))}function ze(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Co-directed Films"),o()()),n&2){let e=v(3);r(2),s(e.coDirectedCount())}}function Ye(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Repeat Directors"),o()()),n&2){let e=v(3);r(2),s(e.repeatDirectorCount())}}function Ae(n,t){if(n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Non-English Films"),o()()),n&2){let e=v(3);r(2),s(e.nonEnglishWatchedCount())}}function Be(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Median Rating"),o()()),n&2&&(r(2),s(t))}function Ge(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Silent Era"),o()()),n&2&&(r(2),C("",t,"%"))}function $e(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Genres explored"),o()()),n&2&&(r(2),C("",t,"%"))}function Le(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Co-directed"),o()()),n&2&&(r(2),C("",t,"%"))}function Ue(n,t){n&1&&(a(0,"div",25)(1,"span",38),l(2),o(),a(3,"span",27),l(4,"Longest Title"),o()()),n&2&&(r(2),s(t))}function Ve(n,t){n&1&&(a(0,"div",25)(1,"span",38),l(2),o(),a(3,"span",27),l(4,"Shortest Title"),o()()),n&2&&(r(2),s(t))}function je(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Avg Title Chars"),o()()),n&2&&(r(2),s(t))}function qe(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Rated 7.0+"),o()()),n&2&&(r(2),s(t))}function Je(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Median Year"),o()()),n&2&&(r(2),s(t))}function He(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Non-English"),o()()),n&2&&(r(2),C("",t,"%"))}function Ke(n,t){n&1&&(a(0,"div",25)(1,"span",26),l(2),o(),a(3,"span",27),l(4,"Free to Watch"),o()()),n&2&&(r(2),C("",t,"%"))}function Qe(n,t){if(n&1&&(a(0,"div",40)(1,"a",41),l(2),o(),a(3,"div",42),f(4,"div",43),o(),a(5,"span",44),l(6),o()()),n&2){let e=t.$implicit,i=v(4);r(),x("routerLink",b(5,pe,e.name)),r(),s(e.name),r(2),O("width",i.barWidth(e.count),"%"),r(2),s(e.count)}}function Xe(n,t){if(n&1&&(a(0,"div",30)(1,"h3",31),l(2,"Top Genres"),o(),a(3,"div",39),E(4,Qe,7,7,"div",40,ce),o()()),n&2){let e=v(3);r(4),W(e.stats().topGenres.slice(0,5))}}function Ze(n,t){if(n&1&&(a(0,"div",40)(1,"a",41),l(2),o(),a(3,"div",42),f(4,"div",43),o(),a(5,"span",44),l(6),o()()),n&2){let e=t.$implicit,i=v(4);r(),x("routerLink",b(5,se,e.name)),r(),s(e.name),r(2),O("width",i.barWidth(e.count),"%"),r(2),s(e.count)}}function et(n,t){if(n&1&&(a(0,"div",30)(1,"h3",31),l(2,"Top Directors"),o(),a(3,"div",39),E(4,Ze,7,7,"div",40,ce),o()()),n&2){let e=v(3);r(4),W(e.stats().topDirectors.slice(0,5))}}function tt(n,t){if(n&1&&(a(0,"div",40)(1,"a",41),l(2),o(),a(3,"div",42),f(4,"div",43),o(),a(5,"span",44),l(6),o()()),n&2){let e=t.$implicit,i=v(4);r(),x("routerLink",b(5,me,e.decade)),r(),C("",e.decade,"s"),r(2),O("width",i.barWidth(e.count),"%"),r(2),s(e.count)}}function nt(n,t){if(n&1&&(a(0,"div",30)(1,"h3",31),l(2,"Decades Explored"),o(),a(3,"div",39),E(4,tt,7,7,"div",40,ge),o()()),n&2){let e=v(3);r(4),W(e.stats().topDecades.slice(0,5))}}function it(n,t){if(n&1&&(a(0,"span",47),l(1),o()),n&2){let e=v().$implicit;r(),s(e.count)}}function at(n,t){if(n&1&&(a(0,"div",33),f(1,"div",45),a(2,"span",46),l(3),o(),c(4,it,2,1,"span",47),o()),n&2){let e=t.$implicit,i=v(3);r(),O("height",i.monthHeight(e.count),"%"),r(2),s(e.month),r(),p(e.count>0?4:-1)}}function ot(n,t){if(n&1&&f(0,"img",48),n&2){let e=v();x("src",e.posterUrl,k)("alt",e.title)}}function rt(n,t){if(n&1&&(a(0,"div",49),l(1),o()),n&2){let e=v();r(),s(e.year)}}function lt(n,t){if(n&1&&(a(0,"a",35),c(1,ot,1,2,"img",48)(2,rt,2,1,"div",49),a(3,"div",50)(4,"span",51),l(5,"Oldest Film"),o(),a(6,"span",52),l(7),o(),a(8,"span",53),l(9),o()()()),n&2){let e=t;x("routerLink",b(4,J,e.id)),r(),p(e.posterUrl?1:2),r(6),s(e.title),r(2),s(e.year)}}function dt(n,t){if(n&1&&f(0,"img",48),n&2){let e=v();x("src",e.posterUrl,k)("alt",e.title)}}function ct(n,t){if(n&1&&(a(0,"div",49),l(1),o()),n&2){let e=v();r(),s(e.year)}}function pt(n,t){if(n&1&&(a(0,"a",35),c(1,dt,1,2,"img",48)(2,ct,2,1,"div",49),a(3,"div",50)(4,"span",51),l(5,"Most Recent Film"),o(),a(6,"span",52),l(7),o(),a(8,"span",53),l(9),o()()()),n&2){let e=t;x("routerLink",b(4,J,e.id)),r(),p(e.posterUrl?1:2),r(6),s(e.title),r(2),s(e.year)}}function st(n,t){if(n&1&&f(0,"img",48),n&2){let e=v();x("src",e.posterUrl,k)("alt",e.title)}}function mt(n,t){n&1&&(a(0,"div",49),l(1,"\u2605"),o())}function _t(n,t){n&1&&(a(0,"span",53),l(1),o()),n&2&&(r(),C("",t,"/10"))}function gt(n,t){if(n&1&&(a(0,"a",35),c(1,st,1,2,"img",48)(2,mt,2,0,"div",49),a(3,"div",50)(4,"span",51),l(5,"Your Highest Rated"),o(),a(6,"span",52),l(7),o(),c(8,_t,2,1,"span",53),o()()),n&2){let e,i=t,d=v(3);x("routerLink",b(4,J,i.id)),r(),p(i.posterUrl?1:2),r(6),s(i.title),r(),p((e=d.highestRating())?8:-1,e)}}function ut(n,t){if(n&1&&f(0,"img",48),n&2){let e=v();x("src",e.posterUrl,k)("alt",e.title)}}function vt(n,t){n&1&&(a(0,"div",49),l(1,"#1"),o())}function ht(n,t){if(n&1&&(a(0,"a",35),c(1,ut,1,2,"img",48)(2,vt,2,0,"div",49),a(3,"div",50)(4,"span",51),l(5),o(),a(6,"span",52),l(7),o(),a(8,"span",53),l(9),o()()()),n&2){let e=t,i=v(3);x("routerLink",b(5,J,e.id)),r(),p(e.posterUrl?1:2),r(4),C("First Film of ",i.selectedYear()),r(2),s(e.title),r(2),s(e.year)}}function Ct(n,t){n&1&&(a(0,"p",36),l(1),o()),n&2&&(r(),C("Average release year of your picks: ",t))}function xt(n,t){if(n&1&&(a(0,"section",37)(1,"h2"),l(2),o(),f(3,"app-movie-grid",54),o()),n&2){let e=v(3);r(2),C("All Films Watched in ",e.selectedYear()),r(),x("movies",e.yearFilms())}}function ft(n,t){if(n&1&&(a(0,"div",24)(1,"div",25)(2,"span",26),l(3),o(),a(4,"span",27),l(5,"Films Watched"),o()(),a(6,"div",25)(7,"span",26),l(8),o(),a(9,"span",27),l(10,"Avg Rating"),o()(),a(11,"div",25)(12,"span",26),l(13),o(),a(14,"span",27),l(15,"Favorites"),o()(),a(16,"div",25)(17,"span",26),l(18),o(),a(19,"span",27),l(20,"Reviews"),o()(),c(21,we,5,1,"div",25),c(22,ye,5,2,"div",25),c(23,be,5,1,"div",25),c(24,Se,5,1,"div",25),c(25,Me,5,1,"div",25),c(26,Ee,5,1,"div",28),c(27,We,5,1,"div",25),c(28,Fe,5,1,"div",25),c(29,De,5,1,"div",25),c(30,Te,5,1,"div",25),c(31,Pe,5,1,"div",28),c(32,Ie,5,1,"div",25),c(33,ke,5,1,"div",28),c(34,Oe,5,1,"div",25),c(35,Ne,5,1,"div",25),c(36,Re,5,1,"div",25),c(37,ze,5,1,"div",25),c(38,Ye,5,1,"div",25),c(39,Ae,5,1,"div",25),c(40,Be,5,1,"div",25),c(41,Ge,5,1,"div",25),c(42,$e,5,1,"div",25),c(43,Le,5,1,"div",25),c(44,Ue,5,1,"div",25),c(45,Ve,5,1,"div",25),c(46,je,5,1,"div",25),c(47,qe,5,1,"div",25),c(48,Je,5,1,"div",25),c(49,He,5,1,"div",25),c(50,Ke,5,1,"div",25),o(),a(51,"div",29),c(52,Xe,6,0,"div",30),c(53,et,6,0,"div",30),c(54,nt,6,0,"div",30),a(55,"div",30)(56,"h3",31),l(57,"Monthly Activity"),o(),a(58,"div",32),E(59,at,5,4,"div",33,_e),o()()(),a(61,"div",34),c(62,lt,10,6,"a",35),c(63,pt,10,6,"a",35),c(64,gt,9,6,"a",35),c(65,ht,10,7,"a",35),o(),c(66,Ct,2,1,"p",36),c(67,xt,4,2,"section",37)),n&2){let e,i,d,_,w,N,S,R,y,z,F,D,Y,M,A,B,T,G,P,$,L,g,h,H,m=v(2);r(3),s(m.stats().totalFilms),r(5),s(m.stats().avgRating>0?m.stats().avgRating.toFixed(1):"\u2014"),r(5),s(m.stats().favoriteCount),r(5),s(m.stats().reviewCount),r(3),p(m.languagesWatched()>1?21:-1),r(),p((e=m.busiestMonth())?22:-1,e),r(),p(m.longestStreak()>1?23:-1),r(),p(m.directorsExplored()>1?24:-1),r(),p(m.genresExplored()>1?25:-1),r(),p((i=m.decadeSpan())?26:-1,i),r(),p(m.streamablePct()>0&&m.streamablePct()<100?27:-1),r(),p(m.uniqueDecadeCount()>1?28:-1),r(),p(m.avgFilmAge()>0?29:-1),r(),p((d=m.avgCatalogRating())?30:-1,d),r(),p((_=m.mostWatchedDecadeName())?31:-1,_),r(),p(m.silentEraWatched()>0?32:-1),r(),p((w=m.mostWatchedGenreName())?33:-1,w),r(),p((N=m.oldestFilmAge())?34:-1,N),r(),p((S=m.avgUserRating())?35:-1,S),r(),p((R=m.newestFilmWatched())?36:-1,R),r(),p(m.coDirectedCount()>0?37:-1),r(),p(m.repeatDirectorCount()>0?38:-1),r(),p(m.nonEnglishWatchedCount()>0?39:-1),r(),p((y=m.medianRating())?40:-1,y),r(),p((z=m.silentEraWatchedPct())?41:-1,z),r(),p((F=m.uniqueGenrePct())?42:-1,F),r(),p((D=m.coDirectedPct())?43:-1,D),r(),p((Y=m.longestTitleWatched())?44:-1,Y),r(),p((M=m.shortestTitleWatched())?45:-1,M),r(),p((A=m.avgTitleLength())?46:-1,A),r(),p((B=m.highlyRatedWatchedCount())?47:-1,B),r(),p((T=m.medianWatchedYear())?48:-1,T),r(),p((G=m.nonEnglishWatchedPct())?49:-1,G),r(),p((P=m.streamableWatchedPct())?50:-1,P),r(2),p(m.stats().topGenres.length>0?52:-1),r(),p(m.stats().topDirectors.length>0?53:-1),r(),p(m.stats().topDecades.length>0?54:-1),r(5),W(m.stats().monthlyBreakdown),r(3),p(($=m.stats().oldestFilm)?62:-1,$),r(),p((L=m.stats().newestFilm)?63:-1,L),r(),p((g=m.stats().highestRated)?64:-1,g),r(),p((h=m.stats().firstWatched)?65:-1,h),r(),p((H=m.avgWatchedYear())?66:-1,H),r(),p(m.yearFilms().length>0?67:-1)}}function wt(n,t){if(n&1&&(a(0,"div",0)(1,"div",3)(2,"p",4),l(3,"Year in Review"),o(),a(4,"h1",5),l(5),o(),a(6,"div",6),E(7,he,2,3,"button",7,Z),o(),c(9,Ce,9,0,"div",8),o(),c(10,xe,7,1,"div",9)(11,fe,7,1,"div",10)(12,ft,68,43),o()),n&2){let e=v();r(5),C("",e.selectedYear()," Wrapped"),r(2),W(e.availableYears()),r(2),p(e.stats().totalFilms>0?9:-1),r(),p(e.stats().totalFilms===0?10:e.stats().totalFilms===1?11:12)}}var de=class n{catalog=I(ie);collection=I(ae);titleService=I(te);notifications=I(oe);selectedYear=Q(new Date().getFullYear());availableYears=u(()=>{let t=this.collection.watched();return[...new Set(t.map(i=>new Date(i.watchedAt).getFullYear()))].sort((i,d)=>d-i)});yearWatched=u(()=>{let t=this.selectedYear();return this.collection.watched().filter(e=>new Date(e.watchedAt).getFullYear()===t)});yearFilms=u(()=>{let t=this.catalog.movies(),e=new Map(t.map(i=>[i.id,i]));return this.yearWatched().map(i=>e.get(i.movieId)).filter(i=>!!i)});stats=u(()=>{let t=this.yearWatched(),e=this.yearFilms(),i=this.collection.favoriteIds();if(e.length===0)return{totalFilms:0,totalHours:0,avgRating:0,ratedCount:0,topGenres:[],topDirectors:[],topDecades:[],oldestFilm:null,newestFilm:null,highestRated:null,firstWatched:null,monthlyBreakdown:this.emptyMonths(),favoriteCount:0,reviewCount:0};let d=new Map;e.forEach(g=>g.genres.forEach(h=>d.set(h,(d.get(h)??0)+1)));let _=[...d.entries()].map(([g,h])=>({name:g,count:h})).sort((g,h)=>h.count-g.count),w=new Map;e.forEach(g=>g.directors.forEach(h=>w.set(h,(w.get(h)??0)+1)));let N=[...w.entries()].map(([g,h])=>({name:g,count:h})).sort((g,h)=>h.count-g.count),S=new Map;e.forEach(g=>{let h=Math.floor(g.year/10)*10;S.set(h,(S.get(h)??0)+1)});let R=[...S.entries()].map(([g,h])=>({decade:g,count:h})).sort((g,h)=>h.count-g.count),y=t.filter(g=>g.userRating!==null&&g.userRating>0),z=y.length>0?y.reduce((g,h)=>g+(h.userRating??0),0)/y.length:0,F=y.sort((g,h)=>(h.userRating??0)-(g.userRating??0))[0],D=new Map(e.map(g=>[g.id,g])),Y=F?D.get(F.movieId)??null:null,M=[...e].sort((g,h)=>g.year-h.year),A=M[0]??null,B=M[M.length-1]??null,T=[...t].sort((g,h)=>g.watchedAt-h.watchedAt),G=T.length>0?D.get(T[0].movieId)??null:null,P=this.emptyMonths();t.forEach(g=>{let h=new Date(g.watchedAt).getMonth();P[h].count++});let $=e.filter(g=>i.has(g.id)).length,L=t.filter(g=>g.review&&g.review.trim().length>0).length;return{totalFilms:e.length,totalHours:0,avgRating:z,ratedCount:y.length,topGenres:_,topDirectors:N,topDecades:R,oldestFilm:A,newestFilm:B,highestRated:Y,firstWatched:G,monthlyBreakdown:P,favoriteCount:$,reviewCount:L}});languagesWatched=u(()=>{let t=this.yearFilms();return new Set(t.map(i=>i.language).filter(Boolean)).size});highestRating=u(()=>{let e=this.yearWatched().filter(d=>d.userRating!==null&&d.userRating>0);return e.length===0?null:e.reduce((d,_)=>(_.userRating??0)>(d.userRating??0)?_:d).userRating});busiestMonth=u(()=>{let t=this.stats().monthlyBreakdown,e=["January","February","March","April","May","June","July","August","September","October","November","December"],i=null;return t.forEach((d,_)=>{d.count>0&&(!i||d.count>i.count)&&(i={name:e[_],count:d.count})}),i});longestStreak=u(()=>{let t=this.stats().monthlyBreakdown,e=0,i=0;for(let d of t)d.count>0?(i++,i>e&&(e=i)):i=0;return e});directorsExplored=u(()=>{let t=this.yearFilms(),e=new Set;for(let i of t)for(let d of i.directors)e.add(d);return e.size});genresExplored=u(()=>{let t=new Set;for(let e of this.yearFilms())for(let i of e.genres)t.add(i);return t.size});decadeSpan=u(()=>{let t=this.yearFilms();if(t.length<2)return null;let e=new Set(t.map(d=>Math.floor(d.year/10)*10));if(e.size<2)return null;let i=[...e].sort((d,_)=>d-_);return`${i[0]}s\u2013${i[i.length-1]}s`});streamablePct=u(()=>{let t=this.yearFilms();if(t.length===0)return 0;let e=t.filter(i=>i.isStreamable).length;return Math.round(e/t.length*100)});uniqueDecadeCount=u(()=>{let t=this.yearFilms();return t.length<2?0:new Set(t.map(e=>Math.floor(e.year/10)*10)).size});mostWatchedDecadeName=u(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=new Map;for(let d of t){let _=Math.floor(d.year/10)*10;e.set(_,(e.get(_)??0)+1)}let i=[...e.entries()].sort((d,_)=>_[1]-d[1])[0];return!i||i[1]<2?null:`${i[0]}s`});avgCatalogRating=u(()=>{let e=this.yearFilms().filter(i=>i.voteAverage>0);return e.length<3?null:(e.reduce((i,d)=>i+d.voteAverage,0)/e.length).toFixed(1)});oldestFilmAge=u(()=>{let t=this.yearFilms();if(t.length<2)return null;let e=this.selectedYear(),i=Math.min(...t.map(_=>_.year)),d=e-i;return d>=50?d:null});mostWatchedGenreName=u(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=new Map;for(let d of t)for(let _ of d.genres)e.set(_,(e.get(_)??0)+1);let i=[...e.entries()].sort((d,_)=>_[1]-d[1])[0];return!i||i[1]<2?null:i[0]});newestFilmWatched=u(()=>{let t=this.yearFilms();if(t.length<2)return null;let e=Math.max(...t.map(d=>d.year)),i=Math.min(...t.map(d=>d.year));return e-i>=10?e:null});avgUserRating=u(()=>{let e=this.yearWatched().filter(i=>i.userRating!=null&&i.userRating>0);return e.length<3?null:(e.reduce((i,d)=>i+(d.userRating??0),0)/e.length).toFixed(1)});silentEraWatched=u(()=>this.yearFilms().filter(t=>t.year<1930).length);coDirectedCount=u(()=>this.yearFilms().filter(t=>t.directors.length>1).length);repeatDirectorCount=u(()=>{let t=this.yearFilms();if(t.length<3)return 0;let e=new Map;for(let d of t)for(let _ of d.directors)e.set(_,(e.get(_)??0)+1);let i=0;for(let d of e.values())d>=2&&i++;return i});nonEnglishWatchedCount=u(()=>{let t=this.yearFilms();return t.length<3?0:t.filter(e=>e.language&&e.language!=="English"&&e.language!=="en").length});medianRating=u(()=>{let t=this.yearFilms().filter(_=>_.voteAverage>0);if(t.length<3)return null;let e=t.map(_=>_.voteAverage).sort((_,w)=>_-w),i=Math.floor(e.length/2);return(e.length%2===0?(e[i-1]+e[i])/2:e[i]).toFixed(1)});avgFilmAge=u(()=>{let t=this.yearFilms(),e=this.selectedYear();if(t.length<2)return 0;let i=t.reduce((d,_)=>d+(e-_.year),0)/t.length;return Math.round(i)});maxBarValue=u(()=>{let t=this.stats(),e=[...t.topGenres.map(i=>i.count),...t.topDirectors.map(i=>i.count),...t.topDecades.map(i=>i.count)];return Math.max(1,...e)});ngOnInit(){this.catalog.load(),this.titleService.setTitle("Year in Review \u2014 BW Cinema");let t=this.availableYears();t.length>0&&this.selectedYear.set(t[0])}barWidth(t){return t/this.maxBarValue()*100}monthHeight(t){let e=Math.max(1,...this.stats().monthlyBreakdown.map(i=>i.count));return t===0?2:t/e*85}shareWrapped(){let t=this.stats(),e=this.selectedYear(),i=t.topGenres[0]?.name??"",d=t.topDirectors[0]?.name??"",_=[`My ${e} BW Cinema Wrapped:`,`${t.totalFilms} classic B&W films watched`,t.avgRating>0?`Average rating: ${t.avgRating.toFixed(1)}/10`:"",i?`Favorite genre: ${i}`:"",d?`Most watched director: ${d}`:"",`${t.favoriteCount} favorites, ${t.reviewCount} reviews`,"","bw-cinema.app/wrapped"].filter(Boolean).join(`
`);navigator.share?navigator.share({title:`${e} BW Cinema Wrapped`,text:_}).catch(()=>{}):navigator.clipboard.writeText(_).then(()=>this.notifications.show("Wrapped stats copied to clipboard!","success"),()=>this.notifications.show("Failed to copy","error"))}uniqueGenrePct=u(()=>{let t=this.yearFilms();if(t.length<5)return null;let e=new Set(this.catalog.movies().flatMap(_=>_.genres));if(e.size===0)return null;let i=new Set(t.flatMap(_=>_.genres)),d=Math.round(i.size/e.size*100);return d>0&&d<100?d:null});coDirectedPct=u(()=>{let t=this.yearFilms();if(t.length<5)return null;let e=t.filter(d=>d.directors.length>1).length,i=Math.round(e/t.length*100);return i>0&&i<100?i:null});silentEraWatchedPct=u(()=>{let t=this.yearFilms();if(t.length<5)return null;let e=t.filter(d=>d.year<1930).length,i=Math.round(e/t.length*100);return i>0&&i<100?i:null});avgTitleLength=u(()=>{let t=this.yearFilms();return t.length<3?null:Math.round(t.reduce((e,i)=>e+i.title.length,0)/t.length)});shortestTitleWatched=u(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=t.reduce((i,d)=>i.title.length<=d.title.length?i:d);return e.title.length<=15?e.title:null});longestTitleWatched=u(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=t.reduce((i,d)=>i.title.length>=d.title.length?i:d);return e.title.length>=15?e.title:null});highlyRatedWatchedCount=u(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=t.filter(i=>i.voteAverage>=7).length;return e>0&&e<t.length?e:null});medianWatchedYear=u(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=t.map(d=>d.year).sort((d,_)=>d-_),i=Math.floor(e.length/2);return e.length%2===0?Math.round((e[i-1]+e[i])/2):e[i]});nonEnglishWatchedPct=u(()=>{let t=this.yearFilms();if(t.length<5)return null;let e=t.filter(d=>d.language&&d.language!=="English"&&d.language!=="en").length,i=Math.round(e/t.length*100);return i>0&&i<100?i:null});streamableWatchedPct=u(()=>{let t=this.yearFilms();if(t.length<5)return null;let e=Math.round(t.filter(i=>i.isStreamable).length/t.length*100);return e>0&&e<100?e:null});avgWatchedYear=u(()=>{let t=this.yearFilms();return t.length<3?null:Math.round(t.reduce((i,d)=>i+d.year,0)/t.length)});emptyMonths(){return["J","F","M","A","M","J","J","A","S","O","N","D"].map(e=>({month:e,count:0}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-wrapped"]],decls:3,vars:1,consts:[[1,"wrapped","container"],["role","alert",1,"catalog-error"],[3,"click"],[1,"wrapped__header"],[1,"wrapped__eyebrow"],[1,"wrapped__title"],[1,"wrapped__year-select"],[1,"wrapped__year-btn",3,"wrapped__year-btn--active"],[1,"wrapped__share"],[1,"wrapped__empty"],[1,"wrapped__few"],[1,"wrapped__year-btn",3,"click"],[1,"wrapped__share-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"wrapped__empty-title"],[1,"wrapped__empty-text"],["routerLink","/browse",1,"btn-primary"],[1,"wrapped__few-title"],[1,"wrapped__few-text"],[1,"wrapped__hero-stats"],[1,"wrapped__hero-stat"],[1,"wrapped__hero-value"],[1,"wrapped__hero-label"],[1,"wrapped__hero-stat","wrapped__hero-stat--text"],[1,"wrapped__cards"],[1,"wrapped__card"],[1,"wrapped__card-title"],[1,"wrapped__months"],[1,"wrapped__month"],[1,"wrapped__highlights"],[1,"wrapped__highlight",3,"routerLink"],[1,"wrapped__decade-range"],[1,"wrapped__films"],[1,"wrapped__hero-value",2,"font-size","0.85em"],[1,"wrapped__bars"],[1,"wrapped__bar-row"],[1,"wrapped__bar-label","wrapped__bar-label--link",3,"routerLink"],[1,"wrapped__bar-track"],[1,"wrapped__bar-fill"],[1,"wrapped__bar-value"],[1,"wrapped__month-bar"],[1,"wrapped__month-label"],[1,"wrapped__month-count"],["loading","lazy",1,"wrapped__highlight-poster",3,"src","alt"],[1,"wrapped__highlight-placeholder"],[1,"wrapped__highlight-text"],[1,"wrapped__highlight-label"],[1,"wrapped__highlight-title"],[1,"wrapped__highlight-meta"],[3,"movies"]],template:function(e,i){if(e&1&&c(0,ue,6,1,"div",0)(1,ve,2,0,"div",0)(2,wt,13,3,"div",0),e&2){let d;p((d=i.catalog.error())?0:i.catalog.loading()?1:2,d)}},dependencies:[ne,re,le],styles:[".wrapped[_ngcontent-%COMP%]{padding:var(--space-xl) 0 var(--space-3xl)}.wrapped__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.wrapped__eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2em;font-size:.8rem;font-weight:600;color:var(--accent-gold);margin:0 0 var(--space-sm)}.wrapped__title[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:900;background:linear-gradient(180deg,var(--text-primary) 40%,var(--accent-gold) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:var(--space-lg)}.wrapped__year-select[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);justify-content:center;flex-wrap:wrap}.wrapped__year-btn[_ngcontent-%COMP%]{padding:6px 16px;border-radius:20px;background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}.wrapped__year-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.wrapped__year-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.wrapped__share[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.wrapped__share-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:8px 20px;background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:20px;color:var(--accent-gold);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}.wrapped__share-btn[_ngcontent-%COMP%]:hover{background:var(--accent-gold);color:var(--bg-deep)}.wrapped__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) 0}.wrapped__empty-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.3rem;margin-bottom:var(--space-sm)}.wrapped__empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);margin-bottom:var(--space-lg)}.wrapped__few[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) var(--space-lg)}.wrapped__few-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.3rem;margin-bottom:var(--space-sm)}.wrapped__few-text[_ngcontent-%COMP%]{color:var(--text-tertiary);margin-bottom:var(--space-lg)}.wrapped__hero-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:var(--space-md);margin-bottom:var(--space-2xl)}.wrapped__hero-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-xl)}.wrapped__hero-value[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:2.5rem;font-weight:700;color:var(--accent-gold);line-height:1;margin-bottom:var(--space-xs)}.wrapped__hero-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.08em;font-weight:600}.wrapped__cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-lg);margin-bottom:var(--space-2xl)}.wrapped__card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-xl);padding:var(--space-lg)}.wrapped__card-title[_ngcontent-%COMP%]{font-size:1rem;margin:0 0 var(--space-md);color:var(--text-primary)}.wrapped__bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.wrapped__bar-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.wrapped__bar-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);min-width:90px;flex-shrink:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wrapped__bar-label--link[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-secondary);transition:color .2s}.wrapped__bar-label--link[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.wrapped__bar-track[_ngcontent-%COMP%]{flex:1;height:8px;background:var(--bg-raised);border-radius:4px;overflow:hidden}.wrapped__bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-gold),#c49b2c);border-radius:4px;min-width:4px;transition:width .4s ease}.wrapped__bar-value[_ngcontent-%COMP%]{font-size:.8rem;color:var(--accent-gold);font-weight:600;min-width:24px;text-align:right}.wrapped__months[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:4px;height:120px}.wrapped__month[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;height:100%;position:relative}.wrapped__month-bar[_ngcontent-%COMP%]{width:100%;background:linear-gradient(0deg,var(--accent-gold),#c49b2c);border-radius:3px 3px 0 0;min-height:2px;transition:height .4s ease}.wrapped__month-label[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);margin-top:4px}.wrapped__month-count[_ngcontent-%COMP%]{position:absolute;top:-16px;font-size:.65rem;color:var(--accent-gold);font-weight:600}.wrapped__highlights[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-md);margin-bottom:var(--space-2xl)}.wrapped__highlight[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:inherit;transition:border-color .2s,background-color .2s}.wrapped__highlight[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);background:var(--bg-raised);color:inherit}.wrapped__highlight-poster[_ngcontent-%COMP%]{width:48px;height:72px;object-fit:cover;border-radius:var(--radius-sm);flex-shrink:0}.wrapped__highlight-placeholder[_ngcontent-%COMP%]{width:48px;height:72px;background:var(--bg-raised);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);font-size:.85rem;color:var(--accent-gold);flex-shrink:0}.wrapped__highlight-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.wrapped__highlight-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.06em;font-weight:600}.wrapped__highlight-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.05rem;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wrapped__highlight[_ngcontent-%COMP%]:hover   .wrapped__highlight-title[_ngcontent-%COMP%]{color:var(--accent-gold)}.wrapped__highlight-meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}.wrapped__films[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.wrapped__films[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.wrapped__hero-stat--text[_ngcontent-%COMP%]   .wrapped__hero-value[_ngcontent-%COMP%]{font-size:1.5rem}@media(max-width:768px){.wrapped__title[_ngcontent-%COMP%]{font-size:2rem}.wrapped__hero-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.wrapped__hero-value[_ngcontent-%COMP%]{font-size:2rem}.wrapped__cards[_ngcontent-%COMP%], .wrapped__highlights[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:480px){.wrapped__title[_ngcontent-%COMP%], .wrapped__hero-value[_ngcontent-%COMP%]{font-size:1.6rem}.wrapped__bar-label[_ngcontent-%COMP%]{min-width:70px;font-size:.8rem}}"],changeDetection:0})};export{de as WrappedComponent};
