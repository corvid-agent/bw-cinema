import{a as te}from"./chunk-MAZ6WOLX.js";import{a as ee}from"./chunk-SGVJUPTJ.js";import{a as X}from"./chunk-5BGZ6L4W.js";import{a as Z}from"./chunk-7G6M72YL.js";import{$ as m,F as V,Ha as y,K as O,Ka as h,O as r,R as j,Za as q,_ as s,ba as H,ca as E,da as W,db as K,ea as x,fa as i,ga as a,ha as C,la as B,lb as Q,na as $,pa as u,ta as k,ua as J,v as P,wa as l,x as A,xa as c,y as Y,ya as f,z as L}from"./chunk-TOYJLBVG.js";var de=n=>["/genre",n],ce=n=>["/director",n],pe=n=>["/decade",n],z=n=>["/movie",n],se=(n,t)=>t.month,ie=(n,t)=>t.name,me=(n,t)=>t.decade;function _e(n,t){n&1&&(i(0,"div",0),C(1,"app-loading-spinner"),a())}function ge(n,t){if(n&1){let e=B();i(0,"button",8),$("click",function(){let d=A(e).$implicit,p=u(2);return Y(p.selectedYear.set(d))}),l(1),a()}if(n&2){let e=t.$implicit,o=u(2);J("wrapped__year-btn--active",e===o.selectedYear()),r(),c(e)}}function ue(n,t){if(n&1){let e=B();i(0,"div",6)(1,"button",9),$("click",function(){A(e);let d=u(2);return Y(d.shareWrapped())}),L(),i(2,"svg",10),C(3,"circle",11)(4,"circle",12)(5,"circle",13)(6,"line",14)(7,"line",15),a(),l(8," Share Your Wrapped "),a()()}}function ve(n,t){if(n&1&&(i(0,"div",7)(1,"p",16),l(2),a(),i(3,"p",17),l(4,"Start watching to see your year in review!"),a(),i(5,"a",18),l(6,"Browse Films"),a()()),n&2){let e=u(2);r(2),f("No films watched in ",e.selectedYear())}}function he(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Languages"),a()()),n&2){let e=u(3);r(2),c(e.languagesWatched())}}function xe(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4),a()()),n&2){let e=t;r(2),c(e.name),r(2),f("Busiest Month (",e.count,")")}}function Ce(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Month Streak"),a()()),n&2){let e=u(3);r(2),c(e.longestStreak())}}function fe(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Directors"),a()()),n&2){let e=u(3);r(2),c(e.directorsExplored())}}function we(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Genres"),a()()),n&2){let e=u(3);r(2),c(e.genresExplored())}}function be(n,t){n&1&&(i(0,"div",23)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Decade Span"),a()()),n&2&&(r(2),c(t))}function ye(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Free to Stream"),a()()),n&2){let e=u(3);r(2),f("",e.streamablePct(),"%")}}function Me(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Decades Covered"),a()()),n&2){let e=u(3);r(2),c(e.uniqueDecadeCount())}}function Se(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Avg Film Age (yrs)"),a()()),n&2){let e=u(3);r(2),c(e.avgFilmAge())}}function Ee(n,t){n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Avg TMDb Rating"),a()()),n&2&&(r(2),c(t))}function We(n,t){n&1&&(i(0,"div",23)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Top Decade"),a()()),n&2&&(r(2),c(t))}function Fe(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Silent Era Films"),a()()),n&2){let e=u(3);r(2),c(e.silentEraWatched())}}function De(n,t){n&1&&(i(0,"div",23)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Top Genre"),a()()),n&2&&(r(2),c(t))}function Pe(n,t){n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Oldest Film (yrs)"),a()()),n&2&&(r(2),c(t))}function Oe(n,t){n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Avg Your Rating"),a()()),n&2&&(r(2),c(t))}function ke(n,t){n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Newest Film"),a()()),n&2&&(r(2),c(t))}function Te(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Co-directed Films"),a()()),n&2){let e=u(3);r(2),c(e.coDirectedCount())}}function Ie(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Repeat Directors"),a()()),n&2){let e=u(3);r(2),c(e.repeatDirectorCount())}}function Re(n,t){if(n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Non-English Films"),a()()),n&2){let e=u(3);r(2),c(e.nonEnglishWatchedCount())}}function Ne(n,t){n&1&&(i(0,"div",20)(1,"span",21),l(2),a(),i(3,"span",22),l(4,"Median Rating"),a()()),n&2&&(r(2),c(t))}function ze(n,t){if(n&1&&(i(0,"div",34)(1,"a",35),l(2),a(),i(3,"div",36),C(4,"div",37),a(),i(5,"span",38),l(6),a()()),n&2){let e=t.$implicit,o=u(4);r(),x("routerLink",y(5,de,e.name)),r(),c(e.name),r(2),k("width",o.barWidth(e.count),"%"),r(2),c(e.count)}}function Ae(n,t){if(n&1&&(i(0,"div",25)(1,"h3",26),l(2,"Top Genres"),a(),i(3,"div",33),E(4,ze,7,7,"div",34,ie),a()()),n&2){let e=u(3);r(4),W(e.stats().topGenres.slice(0,5))}}function Ye(n,t){if(n&1&&(i(0,"div",34)(1,"a",35),l(2),a(),i(3,"div",36),C(4,"div",37),a(),i(5,"span",38),l(6),a()()),n&2){let e=t.$implicit,o=u(4);r(),x("routerLink",y(5,ce,e.name)),r(),c(e.name),r(2),k("width",o.barWidth(e.count),"%"),r(2),c(e.count)}}function Be(n,t){if(n&1&&(i(0,"div",25)(1,"h3",26),l(2,"Top Directors"),a(),i(3,"div",33),E(4,Ye,7,7,"div",34,ie),a()()),n&2){let e=u(3);r(4),W(e.stats().topDirectors.slice(0,5))}}function $e(n,t){if(n&1&&(i(0,"div",34)(1,"a",35),l(2),a(),i(3,"div",36),C(4,"div",37),a(),i(5,"span",38),l(6),a()()),n&2){let e=t.$implicit,o=u(4);r(),x("routerLink",y(5,pe,e.decade)),r(),f("",e.decade,"s"),r(2),k("width",o.barWidth(e.count),"%"),r(2),c(e.count)}}function Ge(n,t){if(n&1&&(i(0,"div",25)(1,"h3",26),l(2,"Decades Explored"),a(),i(3,"div",33),E(4,$e,7,7,"div",34,me),a()()),n&2){let e=u(3);r(4),W(e.stats().topDecades.slice(0,5))}}function Ue(n,t){if(n&1&&(i(0,"span",41),l(1),a()),n&2){let e=u().$implicit;r(),c(e.count)}}function Le(n,t){if(n&1&&(i(0,"div",28),C(1,"div",39),i(2,"span",40),l(3),a(),s(4,Ue,2,1,"span",41),a()),n&2){let e=t.$implicit,o=u(3);r(),k("height",o.monthHeight(e.count),"%"),r(2),c(e.month),r(),m(e.count>0?4:-1)}}function Ve(n,t){if(n&1&&C(0,"img",42),n&2){let e=u();x("src",e.posterUrl,O)("alt",e.title)}}function je(n,t){if(n&1&&(i(0,"div",43),l(1),a()),n&2){let e=u();r(),c(e.year)}}function He(n,t){if(n&1&&(i(0,"a",30),s(1,Ve,1,2,"img",42)(2,je,2,1,"div",43),i(3,"div",44)(4,"span",45),l(5,"Oldest Film"),a(),i(6,"span",46),l(7),a(),i(8,"span",47),l(9),a()()()),n&2){let e=t;x("routerLink",y(4,z,e.id)),r(),m(e.posterUrl?1:2),r(6),c(e.title),r(2),c(e.year)}}function Je(n,t){if(n&1&&C(0,"img",42),n&2){let e=u();x("src",e.posterUrl,O)("alt",e.title)}}function qe(n,t){if(n&1&&(i(0,"div",43),l(1),a()),n&2){let e=u();r(),c(e.year)}}function Ke(n,t){if(n&1&&(i(0,"a",30),s(1,Je,1,2,"img",42)(2,qe,2,1,"div",43),i(3,"div",44)(4,"span",45),l(5,"Most Recent Film"),a(),i(6,"span",46),l(7),a(),i(8,"span",47),l(9),a()()()),n&2){let e=t;x("routerLink",y(4,z,e.id)),r(),m(e.posterUrl?1:2),r(6),c(e.title),r(2),c(e.year)}}function Qe(n,t){if(n&1&&C(0,"img",42),n&2){let e=u();x("src",e.posterUrl,O)("alt",e.title)}}function Xe(n,t){n&1&&(i(0,"div",43),l(1,"\u2605"),a())}function Ze(n,t){n&1&&(i(0,"span",47),l(1),a()),n&2&&(r(),f("",t,"/10"))}function et(n,t){if(n&1&&(i(0,"a",30),s(1,Qe,1,2,"img",42)(2,Xe,2,0,"div",43),i(3,"div",44)(4,"span",45),l(5,"Your Highest Rated"),a(),i(6,"span",46),l(7),a(),s(8,Ze,2,1,"span",47),a()()),n&2){let e,o=t,d=u(3);x("routerLink",y(4,z,o.id)),r(),m(o.posterUrl?1:2),r(6),c(o.title),r(),m((e=d.highestRating())?8:-1,e)}}function tt(n,t){if(n&1&&C(0,"img",42),n&2){let e=u();x("src",e.posterUrl,O)("alt",e.title)}}function nt(n,t){n&1&&(i(0,"div",43),l(1,"#1"),a())}function it(n,t){if(n&1&&(i(0,"a",30),s(1,tt,1,2,"img",42)(2,nt,2,0,"div",43),i(3,"div",44)(4,"span",45),l(5),a(),i(6,"span",46),l(7),a(),i(8,"span",47),l(9),a()()()),n&2){let e=t,o=u(3);x("routerLink",y(5,z,e.id)),r(),m(e.posterUrl?1:2),r(4),f("First Film of ",o.selectedYear()),r(2),c(e.title),r(2),c(e.year)}}function at(n,t){n&1&&(i(0,"p",31),l(1),a()),n&2&&(r(),f("Average release year of your picks: ",t))}function ot(n,t){if(n&1&&(i(0,"section",32)(1,"h2"),l(2),a(),C(3,"app-movie-grid",48),a()),n&2){let e=u(3);r(2),f("All Films Watched in ",e.selectedYear()),r(),x("movies",e.yearFilms())}}function rt(n,t){if(n&1&&(i(0,"div",19)(1,"div",20)(2,"span",21),l(3),a(),i(4,"span",22),l(5,"Films Watched"),a()(),i(6,"div",20)(7,"span",21),l(8),a(),i(9,"span",22),l(10,"Avg Rating"),a()(),i(11,"div",20)(12,"span",21),l(13),a(),i(14,"span",22),l(15,"Favorites"),a()(),i(16,"div",20)(17,"span",21),l(18),a(),i(19,"span",22),l(20,"Reviews"),a()(),s(21,he,5,1,"div",20),s(22,xe,5,2,"div",20),s(23,Ce,5,1,"div",20),s(24,fe,5,1,"div",20),s(25,we,5,1,"div",20),s(26,be,5,1,"div",23),s(27,ye,5,1,"div",20),s(28,Me,5,1,"div",20),s(29,Se,5,1,"div",20),s(30,Ee,5,1,"div",20),s(31,We,5,1,"div",23),s(32,Fe,5,1,"div",20),s(33,De,5,1,"div",23),s(34,Pe,5,1,"div",20),s(35,Oe,5,1,"div",20),s(36,ke,5,1,"div",20),s(37,Te,5,1,"div",20),s(38,Ie,5,1,"div",20),s(39,Re,5,1,"div",20),s(40,Ne,5,1,"div",20),a(),i(41,"div",24),s(42,Ae,6,0,"div",25),s(43,Be,6,0,"div",25),s(44,Ge,6,0,"div",25),i(45,"div",25)(46,"h3",26),l(47,"Monthly Activity"),a(),i(48,"div",27),E(49,Le,5,4,"div",28,se),a()()(),i(51,"div",29),s(52,He,10,6,"a",30),s(53,Ke,10,6,"a",30),s(54,et,9,6,"a",30),s(55,it,10,7,"a",30),a(),s(56,at,2,1,"p",31),s(57,ot,4,2,"section",32)),n&2){let e,o,d,p,w,T,M,I,b,R,F,D,N,S,_=u(2);r(3),c(_.stats().totalFilms),r(5),c(_.stats().avgRating>0?_.stats().avgRating.toFixed(1):"\u2014"),r(5),c(_.stats().favoriteCount),r(5),c(_.stats().reviewCount),r(3),m(_.languagesWatched()>1?21:-1),r(),m((e=_.busiestMonth())?22:-1,e),r(),m(_.longestStreak()>1?23:-1),r(),m(_.directorsExplored()>1?24:-1),r(),m(_.genresExplored()>1?25:-1),r(),m((o=_.decadeSpan())?26:-1,o),r(),m(_.streamablePct()>0&&_.streamablePct()<100?27:-1),r(),m(_.uniqueDecadeCount()>1?28:-1),r(),m(_.avgFilmAge()>0?29:-1),r(),m((d=_.avgCatalogRating())?30:-1,d),r(),m((p=_.mostWatchedDecadeName())?31:-1,p),r(),m(_.silentEraWatched()>0?32:-1),r(),m((w=_.mostWatchedGenreName())?33:-1,w),r(),m((T=_.oldestFilmAge())?34:-1,T),r(),m((M=_.avgUserRating())?35:-1,M),r(),m((I=_.newestFilmWatched())?36:-1,I),r(),m(_.coDirectedCount()>0?37:-1),r(),m(_.repeatDirectorCount()>0?38:-1),r(),m(_.nonEnglishWatchedCount()>0?39:-1),r(),m((b=_.medianRating())?40:-1,b),r(2),m(_.stats().topGenres.length>0?42:-1),r(),m(_.stats().topDirectors.length>0?43:-1),r(),m(_.stats().topDecades.length>0?44:-1),r(5),W(_.stats().monthlyBreakdown),r(3),m((R=_.stats().oldestFilm)?52:-1,R),r(),m((F=_.stats().newestFilm)?53:-1,F),r(),m((D=_.stats().highestRated)?54:-1,D),r(),m((N=_.stats().firstWatched)?55:-1,N),r(),m((S=_.avgWatchedYear())?56:-1,S),r(),m(_.yearFilms().length>0?57:-1)}}function lt(n,t){if(n&1&&(i(0,"div",0)(1,"div",1)(2,"p",2),l(3,"Year in Review"),a(),i(4,"h1",3),l(5),a(),i(6,"div",4),E(7,ge,2,3,"button",5,H),a(),s(9,ue,9,0,"div",6),a(),s(10,ve,7,1,"div",7)(11,rt,58,33),a()),n&2){let e=u();r(5),f("",e.selectedYear()," Wrapped"),r(2),W(e.availableYears()),r(2),m(e.stats().totalFilms>0?9:-1),r(),m(e.stats().totalFilms===0?10:11)}}var ne=class n{catalog=P(Q);collection=P(X);titleService=P(q);notifications=P(Z);selectedYear=V(new Date().getFullYear());availableYears=h(()=>{let t=this.collection.watched();return[...new Set(t.map(o=>new Date(o.watchedAt).getFullYear()))].sort((o,d)=>d-o)});yearWatched=h(()=>{let t=this.selectedYear();return this.collection.watched().filter(e=>new Date(e.watchedAt).getFullYear()===t)});yearFilms=h(()=>{let t=this.catalog.movies(),e=new Map(t.map(o=>[o.id,o]));return this.yearWatched().map(o=>e.get(o.movieId)).filter(o=>!!o)});stats=h(()=>{let t=this.yearWatched(),e=this.yearFilms(),o=this.collection.favoriteIds();if(e.length===0)return{totalFilms:0,totalHours:0,avgRating:0,ratedCount:0,topGenres:[],topDirectors:[],topDecades:[],oldestFilm:null,newestFilm:null,highestRated:null,firstWatched:null,monthlyBreakdown:this.emptyMonths(),favoriteCount:0,reviewCount:0};let d=new Map;e.forEach(g=>g.genres.forEach(v=>d.set(v,(d.get(v)??0)+1)));let p=[...d.entries()].map(([g,v])=>({name:g,count:v})).sort((g,v)=>v.count-g.count),w=new Map;e.forEach(g=>g.directors.forEach(v=>w.set(v,(w.get(v)??0)+1)));let T=[...w.entries()].map(([g,v])=>({name:g,count:v})).sort((g,v)=>v.count-g.count),M=new Map;e.forEach(g=>{let v=Math.floor(g.year/10)*10;M.set(v,(M.get(v)??0)+1)});let I=[...M.entries()].map(([g,v])=>({decade:g,count:v})).sort((g,v)=>v.count-g.count),b=t.filter(g=>g.userRating!==null&&g.userRating>0),R=b.length>0?b.reduce((g,v)=>g+(v.userRating??0),0)/b.length:0,F=b.sort((g,v)=>(v.userRating??0)-(g.userRating??0))[0],D=new Map(e.map(g=>[g.id,g])),N=F?D.get(F.movieId)??null:null,S=[...e].sort((g,v)=>g.year-v.year),_=S[0]??null,ae=S[S.length-1]??null,G=[...t].sort((g,v)=>g.watchedAt-v.watchedAt),oe=G.length>0?D.get(G[0].movieId)??null:null,U=this.emptyMonths();t.forEach(g=>{let v=new Date(g.watchedAt).getMonth();U[v].count++});let re=e.filter(g=>o.has(g.id)).length,le=t.filter(g=>g.review&&g.review.trim().length>0).length;return{totalFilms:e.length,totalHours:0,avgRating:R,ratedCount:b.length,topGenres:p,topDirectors:T,topDecades:I,oldestFilm:_,newestFilm:ae,highestRated:N,firstWatched:oe,monthlyBreakdown:U,favoriteCount:re,reviewCount:le}});languagesWatched=h(()=>{let t=this.yearFilms();return new Set(t.map(o=>o.language).filter(Boolean)).size});highestRating=h(()=>{let e=this.yearWatched().filter(d=>d.userRating!==null&&d.userRating>0);return e.length===0?null:e.reduce((d,p)=>(p.userRating??0)>(d.userRating??0)?p:d).userRating});busiestMonth=h(()=>{let t=this.stats().monthlyBreakdown,e=["January","February","March","April","May","June","July","August","September","October","November","December"],o=null;return t.forEach((d,p)=>{d.count>0&&(!o||d.count>o.count)&&(o={name:e[p],count:d.count})}),o});longestStreak=h(()=>{let t=this.stats().monthlyBreakdown,e=0,o=0;for(let d of t)d.count>0?(o++,o>e&&(e=o)):o=0;return e});directorsExplored=h(()=>{let t=this.yearFilms(),e=new Set;for(let o of t)for(let d of o.directors)e.add(d);return e.size});genresExplored=h(()=>{let t=new Set;for(let e of this.yearFilms())for(let o of e.genres)t.add(o);return t.size});decadeSpan=h(()=>{let t=this.yearFilms();if(t.length<2)return null;let e=new Set(t.map(d=>Math.floor(d.year/10)*10));if(e.size<2)return null;let o=[...e].sort((d,p)=>d-p);return`${o[0]}s\u2013${o[o.length-1]}s`});streamablePct=h(()=>{let t=this.yearFilms();if(t.length===0)return 0;let e=t.filter(o=>o.isStreamable).length;return Math.round(e/t.length*100)});uniqueDecadeCount=h(()=>{let t=this.yearFilms();return t.length<2?0:new Set(t.map(e=>Math.floor(e.year/10)*10)).size});mostWatchedDecadeName=h(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=new Map;for(let d of t){let p=Math.floor(d.year/10)*10;e.set(p,(e.get(p)??0)+1)}let o=[...e.entries()].sort((d,p)=>p[1]-d[1])[0];return!o||o[1]<2?null:`${o[0]}s`});avgCatalogRating=h(()=>{let e=this.yearFilms().filter(o=>o.voteAverage>0);return e.length<3?null:(e.reduce((o,d)=>o+d.voteAverage,0)/e.length).toFixed(1)});oldestFilmAge=h(()=>{let t=this.yearFilms();if(t.length<2)return null;let e=this.selectedYear(),o=Math.min(...t.map(p=>p.year)),d=e-o;return d>=50?d:null});mostWatchedGenreName=h(()=>{let t=this.yearFilms();if(t.length<3)return null;let e=new Map;for(let d of t)for(let p of d.genres)e.set(p,(e.get(p)??0)+1);let o=[...e.entries()].sort((d,p)=>p[1]-d[1])[0];return!o||o[1]<2?null:o[0]});newestFilmWatched=h(()=>{let t=this.yearFilms();if(t.length<2)return null;let e=Math.max(...t.map(d=>d.year)),o=Math.min(...t.map(d=>d.year));return e-o>=10?e:null});avgUserRating=h(()=>{let e=this.yearWatched().filter(o=>o.userRating!=null&&o.userRating>0);return e.length<3?null:(e.reduce((o,d)=>o+(d.userRating??0),0)/e.length).toFixed(1)});silentEraWatched=h(()=>this.yearFilms().filter(t=>t.year<1930).length);coDirectedCount=h(()=>this.yearFilms().filter(t=>t.directors.length>1).length);repeatDirectorCount=h(()=>{let t=this.yearFilms();if(t.length<3)return 0;let e=new Map;for(let d of t)for(let p of d.directors)e.set(p,(e.get(p)??0)+1);let o=0;for(let d of e.values())d>=2&&o++;return o});nonEnglishWatchedCount=h(()=>{let t=this.yearFilms();return t.length<3?0:t.filter(e=>e.language&&e.language!=="English"&&e.language!=="en").length});medianRating=h(()=>{let t=this.yearFilms().filter(p=>p.voteAverage>0);if(t.length<3)return null;let e=t.map(p=>p.voteAverage).sort((p,w)=>p-w),o=Math.floor(e.length/2);return(e.length%2===0?(e[o-1]+e[o])/2:e[o]).toFixed(1)});avgFilmAge=h(()=>{let t=this.yearFilms(),e=this.selectedYear();if(t.length<2)return 0;let o=t.reduce((d,p)=>d+(e-p.year),0)/t.length;return Math.round(o)});maxBarValue=h(()=>{let t=this.stats(),e=[...t.topGenres.map(o=>o.count),...t.topDirectors.map(o=>o.count),...t.topDecades.map(o=>o.count)];return Math.max(1,...e)});ngOnInit(){this.catalog.load(),this.titleService.setTitle("Year in Review \u2014 BW Cinema");let t=this.availableYears();t.length>0&&this.selectedYear.set(t[0])}barWidth(t){return t/this.maxBarValue()*100}monthHeight(t){let e=Math.max(1,...this.stats().monthlyBreakdown.map(o=>o.count));return t===0?2:t/e*85}shareWrapped(){let t=this.stats(),e=this.selectedYear(),o=t.topGenres[0]?.name??"",d=t.topDirectors[0]?.name??"",p=[`My ${e} BW Cinema Wrapped:`,`${t.totalFilms} classic B&W films watched`,t.avgRating>0?`Average rating: ${t.avgRating.toFixed(1)}/10`:"",o?`Favorite genre: ${o}`:"",d?`Most watched director: ${d}`:"",`${t.favoriteCount} favorites, ${t.reviewCount} reviews`,"","bw-cinema.app/wrapped"].filter(Boolean).join(`
`);navigator.share?navigator.share({title:`${e} BW Cinema Wrapped`,text:p}).catch(()=>{}):navigator.clipboard.writeText(p).then(()=>this.notifications.show("Wrapped stats copied to clipboard!","success"),()=>this.notifications.show("Failed to copy","error"))}avgWatchedYear=h(()=>{let t=this.yearFilms();return t.length<3?null:Math.round(t.reduce((o,d)=>o+d.year,0)/t.length)});emptyMonths(){return["J","F","M","A","M","J","J","A","S","O","N","D"].map(e=>({month:e,count:0}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=j({type:n,selectors:[["app-wrapped"]],decls:2,vars:1,consts:[[1,"wrapped","container"],[1,"wrapped__header"],[1,"wrapped__eyebrow"],[1,"wrapped__title"],[1,"wrapped__year-select"],[1,"wrapped__year-btn",3,"wrapped__year-btn--active"],[1,"wrapped__share"],[1,"wrapped__empty"],[1,"wrapped__year-btn",3,"click"],[1,"wrapped__share-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"wrapped__empty-title"],[1,"wrapped__empty-text"],["routerLink","/browse",1,"btn-primary"],[1,"wrapped__hero-stats"],[1,"wrapped__hero-stat"],[1,"wrapped__hero-value"],[1,"wrapped__hero-label"],[1,"wrapped__hero-stat","wrapped__hero-stat--text"],[1,"wrapped__cards"],[1,"wrapped__card"],[1,"wrapped__card-title"],[1,"wrapped__months"],[1,"wrapped__month"],[1,"wrapped__highlights"],[1,"wrapped__highlight",3,"routerLink"],[1,"wrapped__decade-range"],[1,"wrapped__films"],[1,"wrapped__bars"],[1,"wrapped__bar-row"],[1,"wrapped__bar-label","wrapped__bar-label--link",3,"routerLink"],[1,"wrapped__bar-track"],[1,"wrapped__bar-fill"],[1,"wrapped__bar-value"],[1,"wrapped__month-bar"],[1,"wrapped__month-label"],[1,"wrapped__month-count"],["loading","lazy",1,"wrapped__highlight-poster",3,"src","alt"],[1,"wrapped__highlight-placeholder"],[1,"wrapped__highlight-text"],[1,"wrapped__highlight-label"],[1,"wrapped__highlight-title"],[1,"wrapped__highlight-meta"],[3,"movies"]],template:function(e,o){e&1&&s(0,_e,2,0,"div",0)(1,lt,12,3,"div",0),e&2&&m(o.catalog.loading()?0:1)},dependencies:[K,ee,te],styles:[".wrapped[_ngcontent-%COMP%]{padding:var(--space-xl) 0 var(--space-3xl)}.wrapped__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.wrapped__eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2em;font-size:.8rem;font-weight:600;color:var(--accent-gold);margin:0 0 var(--space-sm)}.wrapped__title[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:900;background:linear-gradient(180deg,var(--text-primary) 40%,var(--accent-gold) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:var(--space-lg)}.wrapped__year-select[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);justify-content:center;flex-wrap:wrap}.wrapped__year-btn[_ngcontent-%COMP%]{padding:6px 16px;border-radius:20px;background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}.wrapped__year-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.wrapped__year-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.wrapped__share[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.wrapped__share-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:8px 20px;background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:20px;color:var(--accent-gold);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}.wrapped__share-btn[_ngcontent-%COMP%]:hover{background:var(--accent-gold);color:var(--bg-deep)}.wrapped__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) 0}.wrapped__empty-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.3rem;margin-bottom:var(--space-sm)}.wrapped__empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);margin-bottom:var(--space-lg)}.wrapped__hero-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:var(--space-md);margin-bottom:var(--space-2xl)}.wrapped__hero-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-xl)}.wrapped__hero-value[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:2.5rem;font-weight:700;color:var(--accent-gold);line-height:1;margin-bottom:var(--space-xs)}.wrapped__hero-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.08em;font-weight:600}.wrapped__cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-lg);margin-bottom:var(--space-2xl)}.wrapped__card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-xl);padding:var(--space-lg)}.wrapped__card-title[_ngcontent-%COMP%]{font-size:1rem;margin:0 0 var(--space-md);color:var(--text-primary)}.wrapped__bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.wrapped__bar-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.wrapped__bar-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);min-width:90px;flex-shrink:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wrapped__bar-label--link[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-secondary);transition:color .2s}.wrapped__bar-label--link[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.wrapped__bar-track[_ngcontent-%COMP%]{flex:1;height:8px;background:var(--bg-raised);border-radius:4px;overflow:hidden}.wrapped__bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-gold),#c49b2c);border-radius:4px;min-width:4px;transition:width .4s ease}.wrapped__bar-value[_ngcontent-%COMP%]{font-size:.8rem;color:var(--accent-gold);font-weight:600;min-width:24px;text-align:right}.wrapped__months[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:4px;height:120px}.wrapped__month[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;height:100%;position:relative}.wrapped__month-bar[_ngcontent-%COMP%]{width:100%;background:linear-gradient(0deg,var(--accent-gold),#c49b2c);border-radius:3px 3px 0 0;min-height:2px;transition:height .4s ease}.wrapped__month-label[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);margin-top:4px}.wrapped__month-count[_ngcontent-%COMP%]{position:absolute;top:-16px;font-size:.65rem;color:var(--accent-gold);font-weight:600}.wrapped__highlights[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-md);margin-bottom:var(--space-2xl)}.wrapped__highlight[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:inherit;transition:border-color .2s,background-color .2s}.wrapped__highlight[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);background:var(--bg-raised);color:inherit}.wrapped__highlight-poster[_ngcontent-%COMP%]{width:48px;height:72px;object-fit:cover;border-radius:var(--radius-sm);flex-shrink:0}.wrapped__highlight-placeholder[_ngcontent-%COMP%]{width:48px;height:72px;background:var(--bg-raised);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);font-size:.85rem;color:var(--accent-gold);flex-shrink:0}.wrapped__highlight-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.wrapped__highlight-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.06em;font-weight:600}.wrapped__highlight-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.05rem;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wrapped__highlight[_ngcontent-%COMP%]:hover   .wrapped__highlight-title[_ngcontent-%COMP%]{color:var(--accent-gold)}.wrapped__highlight-meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}.wrapped__films[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.wrapped__films[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.wrapped__hero-stat--text[_ngcontent-%COMP%]   .wrapped__hero-value[_ngcontent-%COMP%]{font-size:1.5rem}@media(max-width:768px){.wrapped__title[_ngcontent-%COMP%]{font-size:2rem}.wrapped__hero-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.wrapped__hero-value[_ngcontent-%COMP%]{font-size:2rem}.wrapped__cards[_ngcontent-%COMP%], .wrapped__highlights[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:480px){.wrapped__title[_ngcontent-%COMP%], .wrapped__hero-value[_ngcontent-%COMP%]{font-size:1.6rem}.wrapped__bar-label[_ngcontent-%COMP%]{min-width:70px;font-size:.8rem}}"],changeDetection:0})};export{ne as WrappedComponent};
