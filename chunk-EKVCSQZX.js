import{a as Z}from"./chunk-MAZ6WOLX.js";import{a as X}from"./chunk-SGVJUPTJ.js";import{a as Q}from"./chunk-5BGZ6L4W.js";import"./chunk-7G6M72YL.js";import{$ as _,A as V,F as P,Ha as I,K as N,Ka as x,O as d,R as Y,Za as H,_ as p,ca as T,cb as q,da as F,db as J,ea as y,fa as a,ga as r,ha as E,la as k,lb as K,na as M,pa as g,ta as R,v as D,wa as l,x as b,xa as u,y as w,ya as v,z,za as O}from"./chunk-TOYJLBVG.js";var A=i=>["/movie",i],te=i=>["/director",i],ne=i=>["/genre",i],oe=i=>["/decade",i],B=(i,t)=>t.id,ie=(i,t)=>t.decade,re=(i,t)=>t.name;function ae(i,t){i&1&&(a(0,"div",0),E(1,"app-loading-spinner"),r())}function le(i,t){i&1&&l(0),i&2&&v(" \xB7 ",t," free films to discover")}function ce(i,t){i&1&&l(0),i&2&&v(" \xB7 avg \u2605 ",t)}function de(i,t){i&1&&l(0),i&2&&v(" \xB7 ",t," languages")}function se(i,t){i&1&&l(0),i&2&&v(" \xB7 ",t," genres")}function me(i,t){i&1&&l(0),i&2&&v(" \xB7 ",t," directors")}function pe(i,t){i&1&&l(0),i&2&&v(" \xB7 avg ",t,"yr old")}function _e(i,t){i&1&&l(0),i&2&&v(" \xB7 ",t," non-English")}function ge(i,t){i&1&&l(0),i&2&&v(" \xB7 ",t," silent-era")}function xe(i,t){i&1&&l(0),i&2&&v(" \xB7 median year ",t)}function ue(i,t){if(i&1){let e=k();a(0,"button",13),M("click",function(){b(e);let o=g(2);return w(o.pickUnwatched())}),l(1," Pick an Unwatched Film "),r()}}function fe(i,t){if(i&1&&E(0,"img",26),i&2){let e=g().$implicit;y("src",e.posterUrl,N)("alt",e.title)}}function he(i,t){if(i&1&&(a(0,"div",27),l(1),r()),i&2){let e=g().$implicit;d(),u(e.title)}}function ve(i,t){if(i&1&&(a(0,"a",22),p(1,fe,1,2,"img",26)(2,he,2,1,"div",27),a(3,"div",28)(4,"h3"),l(5),r(),a(6,"p"),l(7),r(),a(8,"p",29),l(9),r()()()),i&2){let e=t.$implicit;y("routerLink",I(6,A,e.id)),d(),_(e.posterUrl?1:2),d(4),u(e.title),d(2),O("",e.year," \xB7 ",e.directors.join(", ")),d(2),u(e.genres.slice(0,2).join(", "))}}function Ce(i,t){if(i&1){let e=k();a(0,"div",14)(1,"h2"),l(2,"Tonight's Double Feature"),r(),a(3,"p",20),l(4,"Two complementary films for a perfect movie night"),r(),a(5,"div",21),T(6,ve,10,8,"a",22,B),r(),a(8,"div",23)(9,"button",24),M("click",function(){b(e);let o=g(2);return w(o.pickDoubleFeature())}),l(10,"Shuffle Pair"),r(),a(11,"button",25),M("click",function(){b(e);let o=g(2);return w(o.doubleFeature.set([]))}),l(12,"Dismiss"),r()()()}if(i&2){let e=g(2);d(6),F(e.doubleFeature())}}function be(i,t){if(i&1&&E(0,"img",26),i&2){let e=g().$implicit;y("src",e.posterUrl,N)("alt",e.title)}}function we(i,t){if(i&1&&(a(0,"div",27),l(1),r()),i&2){let e=g().$implicit;d(),u(e.title)}}function Me(i,t){if(i&1&&(a(0,"a",22)(1,"span",31),l(2),r(),p(3,be,1,2,"img",26)(4,we,2,1,"div",27),a(5,"div",28)(6,"h3"),l(7),r(),a(8,"p"),l(9),r(),a(10,"p",29),l(11),r()()()),i&2){let e=t.$implicit,n=t.$index;y("routerLink",I(7,A,e.id)),d(2),u(n+1),d(),_(e.posterUrl?3:4),d(4),u(e.title),d(2),O("",e.year," \xB7 ",e.directors.join(", ")),d(2),u(e.genres.slice(0,2).join(", "))}}function ye(i,t){if(i&1){let e=k();a(0,"div",14)(1,"h2"),l(2),r(),a(3,"p",20),l(4,"A curated triple feature for an all-day movie marathon"),r(),a(5,"div",30),T(6,Me,12,9,"a",22,B),r(),a(8,"div",23)(9,"button",24),M("click",function(){b(e);let o=g(2);return w(o.pickFilmFestival())}),l(10,"Shuffle Festival"),r(),a(11,"button",25),M("click",function(){b(e);let o=g(2);return w(o.filmFestival.set({theme:"",films:[]}))}),l(12,"Dismiss"),r()()()}if(i&2){let e=g(2);d(2),u(e.filmFestival().theme),d(4),F(e.filmFestival().films)}}function Ee(i,t){if(i&1&&(a(0,"div",15)(1,"div",32)(2,"span",33),l(3,"Catalog Progress"),r(),a(4,"span",34),l(5),r()(),a(6,"div",35),E(7,"div",36),r(),a(8,"span",37),l(9),r()()),i&2){let e=t;d(5),v("",e.pct,"%"),d(2),R("width",e.pct,"%"),d(2),O("",e.watched," of ",e.total," streamable films watched")}}function Se(i,t){if(i&1&&(a(0,"a",16)(1,"span",38),l(2,"Next Up"),r(),a(3,"span",39),l(4),r(),a(5,"span",40),l(6),r()()),i&2){let e=t;y("routerLink",I(4,A,e.id)),d(4),O("",e.title," (",e.year,")"),d(2),u(e.voteAverage.toFixed(1))}}function ke(i,t){if(i&1&&(a(0,"a",17)(1,"span",41),l(2,"Director to Explore"),r(),a(3,"span",42),l(4),r(),a(5,"span",43),l(6),r()()),i&2){let e=t;y("routerLink",I(3,te,e.name)),d(4),u(e.name),d(2),v("",e.count," unwatched films")}}function Pe(i,t){if(i&1&&(a(0,"a",17)(1,"span",41),l(2,"Genre to Explore"),r(),a(3,"span",42),l(4),r(),a(5,"span",43),l(6),r()()),i&2){let e=t;y("routerLink",I(3,ne,e.name)),d(4),u(e.name),d(2),v("",e.count," unwatched films")}}function Oe(i,t){if(i&1&&(a(0,"a",45),l(1),a(2,"span",46),l(3),r()()),i&2){let e=t.$implicit;y("routerLink",I(3,oe,e.decade)),d(),v("",e.decade,"s "),d(2),u(e.count)}}function Ie(i,t){i&1&&(a(0,"div",18)(1,"span",44),l(2,"Unwatched by decade:"),r(),T(3,Oe,4,5,"a",45,ie),r()),i&2&&(d(3),F(t))}function Te(i,t){if(i&1&&(a(0,"p",47),l(1,"Your most-explored mood: "),a(2,"strong"),l(3),r(),l(4),r()),i&2){let e=t;d(3),u(e.mood.name),d(),v(" (",e.count," films)")}}function Fe(i,t){if(i&1&&(a(0,"p",48),l(1,"Least explored: "),a(2,"strong"),l(3),r(),l(4),r()),i&2){let e=t;d(3),u(e.mood.name),d(),v(" \u2014 ",e.pct,"% watched. Try something new!")}}function De(i,t){if(i&1&&(a(0,"p",48),l(1),r()),i&2){let e=g(3);d(),O("",e.completedMoodCount()," mood",e.completedMoodCount()>1?"s":""," fully explored!")}}function ze(i,t){if(i&1&&(a(0,"span",58),l(1),r()),i&2){let e=g().$implicit,n=g(3);d(),v("",n.moodWatchedCount(e)," watched")}}function Ve(i,t){i&1&&(a(0,"span",59),l(1,"Complete!"),r())}function Le(i,t){if(i&1){let e=k();a(0,"button",53),M("click",function(){let o=b(e).$implicit,c=g(3);return w(c.selectMood(o))}),a(1,"span",54),l(2),r(),a(3,"span",55),l(4),r(),a(5,"span",56),l(6),r(),a(7,"span",57),l(8),r(),p(9,ze,2,1,"span",58),p(10,Ve,2,0,"span",59),r()}if(i&2){let e=t.$implicit,n=g(3);d(2),u(e.icon),d(2),u(e.name),d(2),u(e.description),d(2),v("",n.moodCount(e)," films"),d(),_(n.moodWatchedCount(e)>0?9:-1),d(),_(n.moodWatchedCount(e)>0&&n.moodWatchedCount(e)>=n.moodCount(e)?10:-1)}}function Ne(i,t){if(i&1){let e=k();a(0,"div",62)(1,"button",24),M("click",function(){b(e);let o=g(4);return w(o.showMoreRecs())}),l(2,"Show More Recommendations"),r()()}}function Re(i,t){if(i&1&&(a(0,"section",51)(1,"h2"),l(2,"Recommended for You"),r(),a(3,"p",60),l(4,"Based on your watched films"),r(),E(5,"app-movie-grid",61),p(6,Ne,3,0,"div",62),r()),i&2){let e=g(3);d(5),y("movies",e.recommendations().slice(0,e.recLimit())),d(),_(e.recommendations().length>e.recLimit()?6:-1)}}function Ae(i,t){i&1&&(a(0,"section",52)(1,"div",63),z(),a(2,"svg",64),E(3,"polygon",65),r()(),V(),a(4,"h3"),l(5,"Start watching to get personalized picks"),r(),a(6,"p",60),l(7,"Mark films as watched and we'll recommend similar titles"),r()())}function Be(i,t){if(i&1&&(a(0,"div",67)(1,"div",68)(2,"span",69),l(3),r(),a(4,"span",70),l(5),r(),a(6,"span",71),l(7),r()(),a(8,"div",72),E(9,"div",73),r()()),i&2){let e=t.$implicit;d(3),u(e.icon),d(2),u(e.name),d(2),O("",e.watched,"/",e.total),d(2),R("width",e.pct,"%")}}function Ue(i,t){i&1&&(a(0,"section",51)(1,"h2"),l(2,"Your Exploration Progress"),r(),a(3,"p",60),l(4,"How many streamable films you've watched per mood"),r(),a(5,"div",66),T(6,Be,10,6,"div",67,re),r()()),i&2&&(d(6),F(t))}function $e(i,t){if(i&1&&(a(0,"section",51)(1,"h2"),l(2,"More to Discover"),r(),a(3,"p",60),l(4,"Highly rated streamable films from the catalog"),r(),E(5,"app-movie-grid",61),r()),i&2){let e=g(3);d(5),y("movies",e.recentlyAdded())}}function je(i,t){if(i&1&&(p(0,Te,5,2,"p",47),p(1,Fe,5,2,"p",48),p(2,De,2,2,"p",48),a(3,"div",49),T(4,Le,11,6,"button",50,B),r(),p(6,Re,7,2,"section",51)(7,Ae,8,0,"section",52),p(8,Ue,8,0,"section",51),p(9,$e,6,1,"section",51)),i&2){let e,n,o,c=g(2);_((e=c.topMood())?0:-1,e),d(),_((n=c.leastExploredMood())?1:-1,n),d(),_(c.completedMoodCount()>0?2:-1),d(2),F(c.moods),d(2),_(c.recommendations().length>0?6:7),d(2),_((o=c.watchProgress())?8:-1,o),d(),_(c.recentlyAdded().length>0?9:-1)}}function Ge(i,t){if(i&1){let e=k();a(0,"div",62)(1,"button",24),M("click",function(){b(e);let o=g(4);return w(o.loadMore())}),l(2,"Load More"),r()()}}function We(i,t){if(i&1&&(E(0,"app-movie-grid",61),p(1,Ge,3,0,"div",62)),i&2){let e=g(3);y("movies",e.moodFilmsPage()),d(),_(e.moodFilmsPage().length<e.moodFilms().length?1:-1)}}function Ye(i,t){if(i&1){let e=k();a(0,"div",80)(1,"p"),l(2,"No streamable films found for this mood."),r(),a(3,"button",24),M("click",function(){b(e);let o=g(3);return w(o.activeMood.set(null))}),l(4,"Try another mood"),r()()}}function He(i,t){if(i&1){let e=k();a(0,"div",19)(1,"button",74),M("click",function(){b(e);let o=g(2);return w(o.activeMood.set(null))}),z(),a(2,"svg",75),E(3,"polyline",76),r(),l(4," All Moods "),r(),V(),a(5,"div",77)(6,"span",78),l(7),r(),a(8,"div")(9,"h2"),l(10),r(),a(11,"p",56),l(12),r()()(),a(13,"div",79)(14,"button",24),M("click",function(){b(e);let o=g(2);return w(o.shuffleMood())}),l(15,"Shuffle"),r(),a(16,"span",57),l(17),r()(),p(18,We,2,2)(19,Ye,5,0,"div",80),r()}if(i&2){let e=g(2);d(7),u(e.activeMood().icon),d(3),u(e.activeMood().name),d(2),u(e.activeMood().description),d(5),v("",e.moodFilms().length," films found"),d(),_(e.moodFilms().length>0?18:19)}}function qe(i,t){if(i&1){let e=k();a(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Explore"),r(),a(4,"p",2),l(5,"Discover films by mood, or let fate decide"),p(6,le,1,1),p(7,ce,1,1),p(8,de,1,1),p(9,se,1,1),p(10,me,1,1),p(11,pe,1,1),p(12,_e,1,1),p(13,ge,1,1),p(14,xe,1,1),r()(),a(15,"div",3)(16,"button",4),M("click",function(){b(e);let o=g();return w(o.pickRandom())}),z(),a(17,"svg",5),E(18,"path",6)(19,"polyline",7)(20,"polyline",8)(21,"polyline",9)(22,"polyline",10)(23,"line",11),r(),l(24," Surprise Me "),r(),p(25,ue,2,0,"button",12),V(),a(26,"button",13),M("click",function(){b(e);let o=g();return w(o.pickDoubleFeature())}),l(27," Double Feature "),r(),a(28,"button",13),M("click",function(){b(e);let o=g();return w(o.pickFilmFestival())}),l(29," Film Festival "),r(),a(30,"button",13),M("click",function(){b(e);let o=g();return w(o.pickSerendipity())}),l(31," Serendipity "),r(),a(32,"button",13),M("click",function(){b(e);let o=g();return w(o.blindWatch())}),l(33," Blind Watch "),r()(),p(34,Ce,13,0,"div",14),p(35,ye,13,1,"div",14),p(36,Ee,10,5,"div",15),p(37,Se,7,6,"a",16),p(38,ke,7,5,"a",17),p(39,Pe,7,5,"a",17),p(40,Ie,5,0,"div",18),p(41,je,10,6)(42,He,20,5,"div",19),r()}if(i&2){let e,n,o,c,s,f,m,h,S,U,$,j,G,W,C=g();d(6),_((e=C.totalUnwatchedStreamable())?6:-1,e),d(),_((n=C.unwatchedAvgRating())?7:-1,n),d(),_((o=C.unwatchedLanguageCount())?8:-1,o),d(),_((c=C.unwatchedGenreCount())?9:-1,c),d(),_((s=C.unwatchedDirectorCount())?10:-1,s),d(),_((f=C.unwatchedAvgAge())?11:-1,f),d(),_((m=C.unwatchedNonEnglishCount())?12:-1,m),d(),_((h=C.unwatchedSilentEraCount())?13:-1,h),d(),_((S=C.unwatchedMedianYear())?14:-1,S),d(11),_(C.unwatchedCount()>0?25:-1),d(9),_(C.doubleFeature().length===2?34:-1),d(),_(C.filmFestival().films.length===3?35:-1),d(),_((U=C.catalogProgress())?36:-1,U),d(),_(($=C.topRatedUnwatched())?37:-1,$),d(),_((j=C.directorToExplore())?38:-1,j),d(),_((G=C.genreToExplore())?39:-1,G),d(),_((W=C.unwatchedDecadeBreakdown())?40:-1,W),d(),_(C.activeMood()?42:41)}}var L=[{id:"noir",name:"Dark & Moody",description:"Shadowy crime, mystery, and suspense",icon:"\u{1F311}",genres:["Crime","Mystery","Film Noir","Thriller"]},{id:"fun",name:"Light & Fun",description:"Comedies, musicals, and feel-good films",icon:"\u2600\uFE0F",genres:["Comedy","Musical","Music","Family"]},{id:"deep",name:"Thought-Provoking",description:"Dramas that stay with you",icon:"\u{1F3AD}",genres:["Drama"]},{id:"thrills",name:"Edge of Your Seat",description:"Horror, thriller, and sci-fi",icon:"\u26A1",genres:["Horror","Thriller","Science Fiction"]},{id:"romance",name:"Romantic",description:"Love stories across the decades",icon:"\u{1F4AB}",genres:["Romance"]},{id:"adventure",name:"Adventure & Action",description:"Swashbucklers, westerns, and epic journeys",icon:"\u{1F5FA}\uFE0F",genres:["Adventure","Action","Western","War"]},{id:"silent",name:"Silent Cinema",description:"Pioneering films from the silent era",icon:"\u{1F39E}\uFE0F",genres:[],yearRange:[1890,1929]},{id:"foreign",name:"World Cinema",description:"International masterpieces beyond English",icon:"\u{1F30D}",genres:[]}],ee=class i{catalog=D(K);collection=D(Q);router=D(q);titleService=D(H);moods=L;activeMood=P(null);doubleFeature=P([]);filmFestival=P({theme:"",films:[]});moodPage=P(1);shuffleSeed=P(0);moodFilms=x(()=>{let t=this.activeMood();if(!t)return[];let e=this.catalog.movies().filter(o=>o.isStreamable);if(t.id==="foreign")e=e.filter(o=>o.language&&o.language!=="English");else if(t.yearRange)e=e.filter(o=>o.year>=t.yearRange[0]&&o.year<=t.yearRange[1]);else if(t.genres.length>0){let o=new Set(t.genres.map(c=>c.toLowerCase()));e=e.filter(c=>c.genres.some(s=>o.has(s.toLowerCase())))}let n=this.shuffleSeed();return this.seededShuffle([...e],n)});moodFilmsPage=x(()=>this.moodFilms().slice(0,this.moodPage()*24));recLimit=P(12);recommendations=x(()=>this.catalog.getRecommendations(this.collection.watchedIds(),48));recentlyAdded=x(()=>this.catalog.movies().filter(t=>t.isStreamable&&t.voteAverage>=6&&t.posterUrl).slice(-12).reverse());watchProgress=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=this.catalog.movies().filter(o=>o.isStreamable),n=e.filter(o=>t.has(o.id));return L.map(o=>{let c=m=>{if(o.id==="foreign")return m.language!=null&&m.language!=="English";if(o.yearRange)return m.year>=o.yearRange[0]&&m.year<=o.yearRange[1];if(o.genres.length>0){let h=new Set(o.genres.map(S=>S.toLowerCase()));return m.genres.some(S=>h.has(S.toLowerCase()))}return!1},s=e.filter(c).length,f=n.filter(c).length;return{name:o.name,icon:o.icon,total:s,watched:f,pct:s>0?Math.round(f/s*100):0}}).filter(o=>o.total>0)});catalogProgress=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=this.catalog.movies().filter(s=>s.isStreamable),n=e.length;if(n===0)return null;let o=e.filter(s=>t.has(s.id)).length,c=Math.round(o/n*100);return{watched:o,total:n,pct:c}});unwatchedCount=x(()=>{let t=this.collection.watchedIds();return this.catalog.movies().filter(e=>!t.has(e.id)&&e.isStreamable).length});topMood=x(()=>{if(this.collection.watchedIds().size===0)return null;let e=null;for(let n of L){let o=this.moodWatchedCount(n);o>0&&(!e||o>e.count)&&(e={mood:n,count:o})}return e});leastExploredMood=x(()=>{let t=this.watchProgress();if(!t||t.length<2)return null;let e=t.filter(c=>c.total>0&&c.watched>0);if(e.length<2)return null;let n=e.reduce((c,s)=>c.pct<s.pct?c:s);if(n.pct>=80)return null;let o=L.find(c=>c.name===n.name);return o?{mood:o,pct:n.pct}:null});completedMoodCount=x(()=>{let t=this.watchProgress();return t?t.filter(e=>e.total>0&&e.watched>=e.total).length:0});directorToExplore=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Map;for(let o of this.catalog.movies())if(!(!o.isStreamable||t.has(o.id)))for(let c of o.directors)e.set(c,(e.get(c)??0)+1);let n=[...e.entries()].filter(([,o])=>o>=3).sort((o,c)=>c[1]-o[1]);return n.length>0?{name:n[0][0],count:n[0][1]}:null});genreToExplore=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Map;for(let o of this.catalog.movies())if(!(!o.isStreamable||t.has(o.id)))for(let c of o.genres)e.set(c,(e.get(c)??0)+1);let n=[...e.entries()].filter(([,o])=>o>=5).sort((o,c)=>c[1]-o[1]);return n.length>0?{name:n[0][0],count:n[0][1]}:null});unwatchedAvgRating=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=this.catalog.movies().filter(n=>n.isStreamable&&!t.has(n.id)&&n.voteAverage>0);return e.length<10?null:(e.reduce((n,o)=>n+o.voteAverage,0)/e.length).toFixed(1)});unwatchedLanguageCount=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Set;for(let n of this.catalog.movies())n.isStreamable&&!t.has(n.id)&&n.language&&e.add(n.language);return e.size>1?e.size:null});unwatchedGenreCount=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Set;for(let n of this.catalog.movies())if(n.isStreamable&&!t.has(n.id))for(let o of n.genres)e.add(o);return e.size>1?e.size:null});unwatchedDirectorCount=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Set;for(let n of this.catalog.movies())if(n.isStreamable&&!t.has(n.id))for(let o of n.directors)e.add(o);return e.size>1?e.size:null});unwatchedAvgAge=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Date().getFullYear(),n=0,o=0;for(let c of this.catalog.movies())c.isStreamable&&!t.has(c.id)&&(n+=e-c.year,o++);return o>0?Math.round(n/o):null});unwatchedNonEnglishCount=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=0;for(let n of this.catalog.movies())n.isStreamable&&!t.has(n.id)&&n.language&&n.language!=="English"&&n.language!=="en"&&e++;return e>0?e:null});unwatchedSilentEraCount=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=0;for(let n of this.catalog.movies())n.isStreamable&&!t.has(n.id)&&n.year<1930&&e++;return e>0?e:null});totalUnwatchedStreamable=x(()=>{let t=this.collection.watchedIds();return t.size===0?null:this.catalog.movies().filter(e=>e.isStreamable&&!t.has(e.id)).length});topRatedUnwatched=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=this.catalog.movies().filter(n=>n.isStreamable&&!t.has(n.id)&&n.voteAverage>0).sort((n,o)=>o.voteAverage-n.voteAverage);return e.length>0?e[0]:null});unwatchedDecadeBreakdown=x(()=>{let t=this.collection.watchedIds();if(t.size===0)return null;let e=new Map;for(let o of this.catalog.movies())if(o.isStreamable&&!t.has(o.id)){let c=Math.floor(o.year/10)*10;e.set(c,(e.get(c)??0)+1)}let n=[...e.entries()].sort((o,c)=>c[1]-o[1]).slice(0,5).map(([o,c])=>({decade:o,count:c}));return n.length>0?n:null});moodWatchedCount(t){let e=this.collection.watchedIds();if(e.size===0)return 0;let n=this.catalog.movies().filter(o=>e.has(o.id));if(t.id==="foreign")return n.filter(o=>o.language&&o.language!=="English").length;if(t.yearRange)return n.filter(o=>o.year>=t.yearRange[0]&&o.year<=t.yearRange[1]).length;if(t.genres.length>0){let o=new Set(t.genres.map(c=>c.toLowerCase()));return n.filter(c=>c.genres.some(s=>o.has(s.toLowerCase()))).length}return 0}moodCount(t){let e=this.catalog.movies().filter(n=>n.isStreamable);if(t.id==="foreign")return e.filter(n=>n.language&&n.language!=="English").length;if(t.yearRange)return e.filter(n=>n.year>=t.yearRange[0]&&n.year<=t.yearRange[1]).length;if(t.genres.length>0){let n=new Set(t.genres.map(o=>o.toLowerCase()));return e.filter(o=>o.genres.some(c=>n.has(c.toLowerCase()))).length}return 0}ngOnInit(){this.catalog.load(),this.titleService.setTitle("Explore \u2014 BW Cinema"),this.shuffleSeed.set(Date.now())}selectMood(t){this.activeMood.set(t),this.moodPage.set(1),this.shuffleSeed.set(Date.now())}shuffleMood(){this.shuffleSeed.set(Date.now()),this.moodPage.set(1)}pickRandom(){let t=this.catalog.movies().filter(e=>e.isStreamable);t.length!==0&&this.router.navigate(["/movie",t[Math.floor(Math.random()*t.length)].id])}loadMore(){this.moodPage.update(t=>t+1)}showMoreRecs(){this.recLimit.update(t=>t+12)}pickDoubleFeature(){let t=this.collection.watchedIds(),e=this.catalog.movies().filter(m=>m.isStreamable&&!t.has(m.id)&&m.posterUrl&&m.voteAverage>=6);if(e.length<2)return;let n=e[Math.floor(Math.random()*e.length)],o=new Set(n.genres.map(m=>m.toLowerCase())),c=Math.floor(n.year/10)*10,s=e.filter(m=>m.id!==n.id).map(m=>{let h=0;return m.genres.some(S=>o.has(S.toLowerCase()))&&(h+=3),Math.floor(m.year/10)*10===c&&(h+=1),m.directors.some(S=>n.directors.includes(S))||(h+=1),{movie:m,score:h}}).filter(m=>m.score>=3).sort((m,h)=>h.score-m.score),f=s.length>0?s[Math.floor(Math.random()*Math.min(s.length,10))].movie:e.filter(m=>m.id!==n.id)[Math.floor(Math.random()*(e.length-1))];this.doubleFeature.set([n,f])}pickFilmFestival(){let t=this.collection.watchedIds(),e=this.catalog.movies().filter(s=>s.isStreamable&&!t.has(s.id)&&s.posterUrl&&s.voteAverage>=5.5);if(e.length<3)return;let n=[{name:"Director Spotlight",pick:()=>this.pickByDirector(e)},{name:"Genre Deep Dive",pick:()=>this.pickByGenre(e)},{name:"Decade Marathon",pick:()=>this.pickByDecade(e)}],c=n[Math.floor(Math.random()*n.length)].pick();c&&this.filmFestival.set({theme:c.theme,films:c.films})}pickByDirector(t){let e=new Map;for(let f of t)for(let m of f.directors){let h=e.get(m)??[];h.push(f),e.set(m,h)}let n=[...e.entries()].filter(([,f])=>f.length>=3);if(n.length===0)return this.pickByGenre(t);let[o,c]=n[Math.floor(Math.random()*n.length)],s=[...c].sort(()=>Math.random()-.5).slice(0,3);return{theme:`${o} Festival`,films:s}}pickByGenre(t){let e=new Map;for(let f of t)for(let m of f.genres){let h=e.get(m)??[];h.push(f),e.set(m,h)}let n=[...e.entries()].filter(([,f])=>f.length>=6);if(n.length===0)return null;let[o,c]=n[Math.floor(Math.random()*n.length)],s=[...c].sort(()=>Math.random()-.5).slice(0,3);return{theme:`${o} Triple Feature`,films:s}}pickByDecade(t){let e=new Map;for(let f of t){let m=Math.floor(f.year/10)*10,h=e.get(m)??[];h.push(f),e.set(m,h)}let n=[...e.entries()].filter(([,f])=>f.length>=6);if(n.length===0)return this.pickByGenre(t);let[o,c]=n[Math.floor(Math.random()*n.length)],s=[...c].sort(()=>Math.random()-.5).slice(0,3);return{theme:`Best of the ${o}s`,films:s}}pickSerendipity(){let t=this.collection.watchedIds(),e=this.catalog.movies().filter(n=>n.isStreamable&&!t.has(n.id));e.length!==0&&this.router.navigate(["/movie",e[Math.floor(Math.random()*e.length)].id])}pickUnwatched(){let t=this.collection.watchedIds(),e=this.catalog.movies().filter(n=>!t.has(n.id)&&n.isStreamable);e.length!==0&&this.router.navigate(["/movie",e[Math.floor(Math.random()*e.length)].id])}blindWatch(){let t=this.collection.watchedIds(),e=this.catalog.movies().filter(o=>o.isStreamable&&!t.has(o.id));if(e.length===0)return;let n=e[Math.floor(Math.random()*e.length)];this.router.navigate(["/watch",n.id])}unwatchedMedianYear=x(()=>{let t=this.collection.watchedIds(),e=this.catalog.movies().filter(c=>c.isStreamable&&!t.has(c.id));if(e.length<10)return null;let n=e.map(c=>c.year).sort((c,s)=>c-s),o=Math.floor(n.length/2);return n.length%2===0?Math.round((n[o-1]+n[o])/2):n[o]});seededShuffle(t,e){let n=e,o=()=>(n=n*1103515245+12345&2147483647,n/2147483647);for(let c=t.length-1;c>0;c--){let s=Math.floor(o()*(c+1));[t[c],t[s]]=[t[s],t[c]]}return t}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=Y({type:i,selectors:[["app-explore"]],decls:2,vars:1,consts:[[1,"explore","container"],[1,"explore__header"],[1,"explore__subtitle"],[1,"explore__random"],[1,"explore__random-btn",3,"click"],["width","22","height","22","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],["points","7.5 4.21 12 6.81 16.5 4.21"],["points","7.5 19.79 7.5 14.6 3 12"],["points","21 12 16.5 14.6 16.5 19.79"],["points","3.27 6.96 12 12.01 20.73 6.96"],["x1","12","y1","22.08","x2","12","y2","12"],[1,"explore__random-btn","explore__random-btn--secondary"],[1,"explore__random-btn","explore__random-btn--secondary",3,"click"],[1,"explore__double"],[1,"explore__catalog-progress"],[1,"explore__next-up",3,"routerLink"],[1,"explore__director-explore",3,"routerLink"],[1,"explore__unwatched-decades"],[1,"explore__active-mood"],[1,"explore__double-desc"],[1,"explore__double-pair"],[1,"explore__double-card",3,"routerLink"],[1,"explore__double-actions"],[1,"btn-secondary",3,"click"],[1,"btn-ghost",3,"click"],[3,"src","alt"],[1,"explore__double-placeholder"],[1,"explore__double-info"],[1,"explore__double-genres"],[1,"explore__festival-trio"],[1,"explore__festival-num"],[1,"explore__catalog-header"],[1,"explore__catalog-label"],[1,"explore__catalog-pct"],[1,"explore__catalog-track"],[1,"explore__catalog-fill"],[1,"explore__catalog-detail"],[1,"explore__next-up-label"],[1,"explore__next-up-title"],[1,"explore__next-up-rating"],[1,"explore__director-explore-label"],[1,"explore__director-explore-name"],[1,"explore__director-explore-count"],[1,"explore__unwatched-decades-label"],[1,"explore__unwatched-decade-chip",3,"routerLink"],[1,"explore__unwatched-decade-count"],[1,"explore__top-mood"],[1,"explore__least-mood"],[1,"explore__moods"],[1,"explore__mood-card"],[1,"explore__section"],[1,"explore__section","explore__start-watching"],[1,"explore__mood-card",3,"click"],[1,"explore__mood-icon"],[1,"explore__mood-name"],[1,"explore__mood-desc"],[1,"explore__mood-count"],[1,"explore__mood-watched"],[1,"explore__mood-complete"],[1,"explore__section-desc"],[3,"movies"],[1,"explore__load-more"],[1,"explore__start-icon"],["width","32","height","32","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["points","5 3 19 12 5 21 5 3"],[1,"explore__progress-grid"],[1,"explore__progress-item"],[1,"explore__progress-header"],[1,"explore__progress-icon"],[1,"explore__progress-name"],[1,"explore__progress-frac"],[1,"explore__progress-track"],[1,"explore__progress-fill"],[1,"btn-ghost","explore__back",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","15 18 9 12 15 6"],[1,"explore__mood-header"],[1,"explore__mood-icon","explore__mood-icon--lg"],[1,"explore__mood-actions"],[1,"explore__mood-empty"]],template:function(e,n){e&1&&p(0,ae,2,0,"div",0)(1,qe,43,18,"div",0),e&2&&_(n.catalog.loading()?0:1)},dependencies:[J,X,Z],styles:[".explore[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.explore__header[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.explore__subtitle[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.95rem;margin:0}.explore__random[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);margin-bottom:var(--space-2xl)}.explore__random-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-xl);background:linear-gradient(135deg,var(--accent-gold) 0%,#c49b2c 100%);color:var(--bg-deep);border:none;border-radius:var(--radius-lg);font-size:1rem;font-weight:700;cursor:pointer;transition:transform .2s,box-shadow .2s}.explore__random-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #d4af374d}.explore__random-btn--secondary[_ngcontent-%COMP%]{background:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border)}.explore__random-btn--secondary[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold);box-shadow:none}.explore__top-mood[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);margin:0 0 var(--space-md)}.explore__top-mood[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent-gold)}.explore__least-mood[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);margin:0 0 var(--space-md)}.explore__least-mood[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-secondary)}.explore__moods[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:var(--space-md);margin-bottom:var(--space-2xl)}.explore__mood-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-xs);padding:var(--space-lg);background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);cursor:pointer;transition:all .2s;text-align:center;color:var(--text-primary)}.explore__mood-card[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);transform:translateY(-3px);box-shadow:var(--shadow-md)}.explore__mood-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--space-xs)}.explore__mood-icon--lg[_ngcontent-%COMP%]{font-size:2.5rem}.explore__mood-name[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.1rem;font-weight:700}.explore__mood-desc[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);margin:0}.explore__mood-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--accent-gold);font-weight:600}.explore__mood-watched[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary);background:var(--bg-raised);padding:2px 8px;border-radius:8px}.explore__mood-complete[_ngcontent-%COMP%]{font-size:.65rem;font-weight:700;color:var(--accent-gold);background:var(--accent-gold-dim);padding:2px 8px;border-radius:8px;text-transform:uppercase;letter-spacing:.04em}.explore__double[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl);padding:var(--space-xl);background:var(--bg-surface);border:1px solid var(--accent-gold);border-radius:var(--radius-xl);text-align:center}.explore__double[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.explore__double-desc[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.9rem;margin:0 0 var(--space-xl)}.explore__double-pair[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-xl);margin-bottom:var(--space-lg)}.explore__double-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-decoration:none;color:inherit;transition:transform .2s}.explore__double-card[_ngcontent-%COMP%]:hover{color:inherit;transform:translateY(-4px)}.explore__double-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius-lg);box-shadow:var(--shadow-poster);margin-bottom:var(--space-md)}.explore__double-placeholder[_ngcontent-%COMP%]{width:160px;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;font-size:.85rem;color:var(--text-tertiary);text-align:center;padding:var(--space-sm);margin-bottom:var(--space-md)}.explore__double-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin:0 0 4px}.explore__double-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);margin:0}.explore__double-genres[_ngcontent-%COMP%]{color:var(--accent-gold)!important;font-weight:600}.explore__festival-trio[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:var(--space-xl);margin-bottom:var(--space-lg)}.explore__festival-num[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:var(--accent-gold);color:var(--bg-deep);font-size:.75rem;font-weight:700;margin-bottom:var(--space-sm)}.explore__double-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:center}.explore__section[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.explore__section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.explore__section-desc[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.9rem;margin:0 0 var(--space-lg)}.explore__load-more[_ngcontent-%COMP%]{text-align:center;margin-top:var(--space-xl)}.explore__active-mood[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.explore__back[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-xs);font-size:.9rem;margin-bottom:var(--space-lg);color:var(--text-tertiary)}.explore__back[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.explore__mood-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-lg);margin-bottom:var(--space-lg)}.explore__mood-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-lg)}.explore__load-more[_ngcontent-%COMP%]{text-align:center;padding:var(--space-xl) 0}.explore__mood-empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl);color:var(--text-tertiary)}.explore__progress-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-md)}.explore__progress-item[_ngcontent-%COMP%]{padding:var(--space-md);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg)}.explore__progress-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-sm)}.explore__progress-icon[_ngcontent-%COMP%]{font-size:1.1rem}.explore__progress-name[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-primary)}.explore__progress-frac[_ngcontent-%COMP%]{margin-left:auto;font-size:.75rem;color:var(--text-tertiary);font-weight:600}.explore__progress-track[_ngcontent-%COMP%]{height:6px;background:var(--bg-raised);border-radius:3px;overflow:hidden}.explore__progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-gold);border-radius:3px;min-width:2px;transition:width .4s ease}.explore__start-watching[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg)}.explore__start-icon[_ngcontent-%COMP%]{color:var(--accent-gold);margin-bottom:var(--space-md)}.explore__start-watching[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.explore__catalog-progress[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl);padding:var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg)}.explore__catalog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm)}.explore__catalog-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-secondary)}.explore__catalog-pct[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.1rem;font-weight:700;color:var(--accent-gold)}.explore__catalog-track[_ngcontent-%COMP%]{height:8px;background:var(--bg-raised);border-radius:4px;overflow:hidden;margin-bottom:var(--space-xs)}.explore__catalog-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--accent-gold),#c49b2c);border-radius:4px;min-width:2px;transition:width .4s ease}.explore__catalog-detail[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary)}.explore__next-up[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-2xl);padding:var(--space-md) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:inherit;transition:border-color .2s}.explore__next-up[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:inherit}.explore__next-up-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--accent-gold);flex-shrink:0}.explore__next-up-title[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--text-primary);flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.explore__director-explore[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-lg);padding:var(--space-md) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:inherit;transition:border-color .2s}.explore__director-explore[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:inherit}.explore__director-explore-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--accent-gold);flex-shrink:0}.explore__director-explore-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:var(--text-primary);flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.explore__director-explore-count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);flex-shrink:0}.explore__unwatched-decades[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:var(--space-xs);margin-bottom:var(--space-lg)}.explore__unwatched-decades-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);font-weight:600}.explore__unwatched-decade-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;background:var(--bg-surface);border:1px solid var(--border);border-radius:14px;font-size:.8rem;color:var(--text-secondary);text-decoration:none;transition:all .2s}.explore__unwatched-decade-chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.explore__unwatched-decade-count[_ngcontent-%COMP%]{font-size:.65rem;background:var(--bg-raised);padding:1px 5px;border-radius:6px;color:var(--text-tertiary)}.explore__next-up-rating[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.1rem;font-weight:700;color:var(--accent-gold);flex-shrink:0}@media(max-width:480px){.explore__double-pair[_ngcontent-%COMP%], .explore__festival-trio[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--space-lg)}.explore__double-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px}.explore__double[_ngcontent-%COMP%]{padding:var(--space-md)}.explore__random[_ngcontent-%COMP%]{flex-direction:column}.explore__moods[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.explore__mood-card[_ngcontent-%COMP%]{padding:var(--space-md)}.explore__mood-icon[_ngcontent-%COMP%]{font-size:1.5rem}.explore__mood-name[_ngcontent-%COMP%]{font-size:.95rem}.explore__progress-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"],changeDetection:0})};export{ee as ExploreComponent};
