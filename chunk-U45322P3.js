import{a as _e}from"./chunk-G5CE23PJ.js";import{a as ge,b as me}from"./chunk-RH4PY6SG.js";import{a as se}from"./chunk-SGVJUPTJ.js";import{a as ce}from"./chunk-5BGZ6L4W.js";import"./chunk-7G6M72YL.js";import{$ as g,Aa as ee,Ba as te,Ca as ne,Da as ie,F as k,Ha as S,K as X,Ka as m,Ma as oe,O as o,R as Z,Za as ae,_,ca as T,cb as re,da as D,db as le,ea as x,fa as r,ga as l,ha as E,la as I,lb as de,na as y,pa as u,ua as M,v as P,wa as d,x as h,xa as v,y as b,ya as f,z as Q,za as w}from"./chunk-TOYJLBVG.js";var fe=n=>({genres:n}),ue=n=>["/director",n],ve=n=>["/movie",n],Ce=n=>["/genre",n],xe=n=>["/decade",n],O=(n,t)=>t.name,he=(n,t)=>t.decade;function be(n,t){n&1&&(r(0,"div",0),E(1,"app-skeleton-grid",1),l()),n&2&&(o(),x("count",12))}function ye(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4),l()()),n&2){let e=t;o(2),f("",e.decade,"s"),o(2),f("Peak Decade (",e.count,")")}}function Me(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Directors"),l()()),n&2){let e=u(3);o(2),v(e.directorCount())}}function we(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Silent Era"),l()()),n&2){let e=u(3);o(2),v(e.silentEraCount())}}function Se(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Avg Year"),l()()),n&2){let e=u(3);o(2),v(e.avgYear())}}function Ee(n,t){n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Median Year"),l()()),n&2&&(o(2),v(t))}function Pe(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4),l()()),n&2){let e=u(3);o(2),v(t),o(2),f("Pure ",e.name())}}function Te(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"vs Catalog Avg"),l()()),n&2){let e=t;o(),M("genre__stat-value--positive",e.startsWith("+")),o(),v(e)}}function De(n,t){if(n&1&&(r(0,"a",21)(1,"span",19),d(2),l(),r(3,"span",20),d(4),l()()),n&2){let e=t;x("routerLink",S(3,ue,e.name)),o(2),v(e.count),o(2),v(e.name)}}function Ge(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Avg Film Age (yrs)"),l()()),n&2){let e=u(3);o(2),v(e.avgFilmAge())}}function ke(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Co-directed"),l()()),n&2){let e=u(3);o(2),v(e.coDirectedCount())}}function Ie(n,t){if(n&1&&(r(0,"div",18)(1,"span",19),d(2),l(),r(3,"span",20),d(4,"Silent Era"),l()()),n&2){let e=u(3);o(2),v(e.silentEraCount())}}function Oe(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Most recent: ",t))}function Fe(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),ee("You've watched ",e.watchedInGenre()," ",e.name()," film",e.watchedInGenre()!==1?"s":"")}}function Ne(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=t;o(),w("Top rated: ",e.title," (\u2605 ",e.rating,")")}}function Ae(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),w("",e.unwatchedStreamableCount()," free ",e.name()," films you haven't watched")}}function Re(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),f("",e.nonEnglishPct(),"% non-English films")}}function ze(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Median rating: \u2605 ",t))}function Le(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Avg title length: ",t," chars"))}function Ve(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f('Longest title: "',t,'"'))}function Ye(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f('Shortest title: "',t,'"'))}function Be(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),f("",e.highlyRatedCount()," films rated 8.0+")}}function $e(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("",t,"% co-directed"))}function We(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),f("",e.streamableHighRatedCount()," highly-rated free to watch")}}function je(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Most films from the ",t))}function He(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),f("",e.preWarCount()," films from before 1940")}}function qe(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f('Newest: "',t,'"'))}function Ue(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f('Oldest: "',t,'"'))}function Je(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("",t,"% of free films rated 7+"))}function Ke(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Directors from ",t," language backgrounds"))}function Qe(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Ratings range: ",t))}function Xe(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=t;o(),w("Top director: ",e.name," (",e.count," films)")}}function Ze(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Avg ",t," years between films"))}function et(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),f("",e.nonEnglishCount()," non-English films")}}function tt(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("Avg ",t," films per director"))}function nt(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("",t,"% linked to IMDb"))}function it(n,t){n&1&&(r(0,"p",22),d(1),l()),n&2&&(o(),f("",t,"% have poster art"))}function ot(n,t){if(n&1&&(r(0,"p",22),d(1),l()),n&2){let e=u(3);o(),v(e.notableFact())}}function at(n,t){if(n&1&&E(0,"img",36),n&2){let e=u();x("src",e.posterUrl,X)("alt",e.title)}}function rt(n,t){if(n&1&&(r(0,"div",37),d(1),l()),n&2){let e=u();o(),v(e.title[0])}}function lt(n,t){if(n&1&&(r(0,"span",42),d(1),l()),n&2){let e=u();o(),f("\u2605 ",e.voteAverage.toFixed(1))}}function dt(n,t){if(n&1&&(r(0,"div",23)(1,"a",35),_(2,at,1,2,"img",36)(3,rt,2,1,"div",37),r(4,"div",38)(5,"span",39),d(6,"Highest Rated"),l(),r(7,"strong",40),d(8),l(),r(9,"span",41),d(10),l(),_(11,lt,2,1,"span",42),l()()()),n&2){let e=t;o(),x("routerLink",S(6,ve,e.id)),o(),g(e.posterUrl?2:3),o(6),v(e.title),o(2),w("",e.year," \xB7 ",e.directors.join(", ")),o(),g(e.voteAverage>0?11:-1)}}function ct(n,t){if(n&1&&E(0,"app-movie-grid",30),n&2){let e=u(3);x("movies",e.sortedFilms())}}function st(n,t){if(n&1&&E(0,"app-movie-list",30),n&2){let e=u(3);x("movies",e.sortedFilms())}}function _t(n,t){if(n&1&&(r(0,"a",45)(1,"span",46),d(2),l(),r(3,"span",47),d(4),l(),r(5,"span",48),d(6),l()()),n&2){let e=t.$implicit;x("routerLink",S(5,ue,e.name)),o(2),v(e.name),o(2),w("",e.count," film",e.count!==1?"s":""),o(2),v(e.avgRating)}}function gt(n,t){if(n&1&&(r(0,"div",31)(1,"h2",43),d(2),l(),r(3,"div",44),T(4,_t,7,7,"a",45,O),l()()),n&2){let e=u(3);o(2),f("Top Directors in ",e.name()),o(2),D(e.topDirectors())}}function mt(n,t){if(n&1&&(r(0,"a",50),d(1),r(2,"span",51),d(3),l()()),n&2){let e=t.$implicit;x("routerLink",S(3,Ce,e.name)),o(),f(" ",e.name," "),o(2),f("",e.pct,"%")}}function pt(n,t){if(n&1&&(r(0,"div",32)(1,"h2",43),d(2,"Related Genres"),l(),r(3,"div",49),T(4,mt,4,5,"a",50,O),l()()),n&2){let e=u(3);o(4),D(e.relatedGenres())}}function ut(n,t){if(n&1&&(r(0,"a",53),d(1),r(2,"span",54),d(3),l()()),n&2){let e=t.$implicit;x("routerLink",S(3,xe,e.decade)),o(),f(" ",e.decade,"s "),o(2),v(e.count)}}function ft(n,t){if(n&1&&(r(0,"div",33)(1,"h2",43),d(2,"By Decade"),l(),r(3,"div",52),T(4,ut,4,5,"a",53,he),l()()),n&2){let e=u(3);o(4),D(e.decadeBreakdown())}}function vt(n,t){if(n&1&&(r(0,"span",56),d(1),r(2,"span",57),d(3),l()()),n&2){let e=t.$implicit;o(),f(" ",e.name," "),o(2),v(e.count)}}function Ct(n,t){if(n&1&&(r(0,"div",34)(1,"h2",43),d(2,"Languages"),l(),r(3,"div",55),T(4,vt,4,2,"span",56,O),l()()),n&2){let e=u(3);o(4),D(e.languageBreakdown())}}function xt(n,t){if(n&1){let e=I();r(0,"div",17)(1,"div",18)(2,"span",19),d(3),l(),r(4,"span",20),d(5,"Years"),l()(),r(6,"div",18)(7,"span",19),d(8),l(),r(9,"span",20),d(10,"Avg. Rating"),l()(),r(11,"div",18)(12,"span",19),d(13),l(),r(14,"span",20),d(15,"Free to Watch"),l()(),_(16,ye,5,2,"div",18),_(17,Me,5,1,"div",18),_(18,we,5,1,"div",18),r(19,"div",18)(20,"span",19),d(21),l(),r(22,"span",20),d(23,"Streamable"),l()(),_(24,Se,5,1,"div",18),_(25,Ee,5,1,"div",18),_(26,Pe,5,2,"div",18),_(27,Te,5,3,"div",18),_(28,De,5,5,"a",21),_(29,Ge,5,1,"div",18),_(30,ke,5,1,"div",18),_(31,Ie,5,1,"div",18),l(),_(32,Oe,2,1,"p",22),_(33,Fe,2,3,"p",22),_(34,Ne,2,2,"p",22),_(35,Ae,2,2,"p",22),_(36,Re,2,1,"p",22),_(37,ze,2,1,"p",22),_(38,Le,2,1,"p",22),_(39,Ve,2,1,"p",22),_(40,Ye,2,1,"p",22),_(41,Be,2,1,"p",22),_(42,$e,2,1,"p",22),_(43,We,2,1,"p",22),_(44,je,2,1,"p",22),_(45,He,2,1,"p",22),_(46,qe,2,1,"p",22),_(47,Ue,2,1,"p",22),_(48,Je,2,1,"p",22),_(49,Ke,2,1,"p",22),_(50,Qe,2,1,"p",22),_(51,Xe,2,2,"p",22),_(52,Ze,2,1,"p",22),_(53,et,2,1,"p",22),_(54,tt,2,1,"p",22),_(55,nt,2,1,"p",22),_(56,it,2,1,"p",22),_(57,ot,2,1,"p",22),_(58,dt,12,8,"div",23),r(59,"div",24)(60,"div",25)(61,"button",26),y("click",function(){h(e);let a=u(2);return b(a.sortMode.set("rating"))}),d(62,"Top Rated"),l(),r(63,"button",26),y("click",function(){h(e);let a=u(2);return b(a.sortMode.set("newest"))}),d(64,"Newest"),l(),r(65,"button",26),y("click",function(){h(e);let a=u(2);return b(a.sortMode.set("oldest"))}),d(66,"Oldest"),l(),r(67,"button",26),y("click",function(){h(e);let a=u(2);return b(a.sortMode.set("title"))}),d(68,"Title"),l()(),r(69,"div",27)(70,"button",28),y("click",function(){h(e);let a=u(2);return b(a.streamableOnly.set(!a.streamableOnly()))}),d(71),l(),r(72,"app-view-toggle",29),ie("modeChange",function(a){h(e);let c=u(2);return ne(c.viewMode,a)||(c.viewMode=a),b(a)}),l()()(),_(73,ct,1,1,"app-movie-grid",30)(74,st,1,1,"app-movie-list",30),_(75,gt,6,1,"div",31),_(76,pt,6,0,"div",32),_(77,ft,6,0,"div",33),_(78,Ct,6,0,"div",34)}if(n&2){let e,i,a,c,p,C,G,F,N,A,R,z,L,V,Y,B,$,W,j,H,q,U,J,K,s=u(2);o(3),v(s.yearRange()),o(5),v(s.avgRating()),o(5),v(s.streamableCount()),o(3),g((e=s.peakDecade())?16:-1,e),o(),g(s.directorCount()>1?17:-1),o(),g(s.silentEraCount()>0?18:-1),o(3),f("",s.streamablePct(),"%"),o(3),g(s.avgYear()?24:-1),o(),g((i=s.medianYear())?25:-1,i),o(),g((a=s.exclusiveCount())?26:-1,a),o(),g((c=s.ratingVsCatalog())?27:-1,c),o(),g((p=s.mostProlificDirector())?28:-1,p),o(),g(s.avgFilmAge()>0?29:-1),o(),g(s.coDirectedCount()>0?30:-1),o(),g(s.silentEraCount()>0?31:-1),o(),g((C=s.newestFilmYear())?32:-1,C),o(),g(s.watchedInGenre()>0?33:-1),o(),g((G=s.highestRatedTitle())?34:-1,G),o(),g(s.unwatchedStreamableCount()>0?35:-1),o(),g(s.nonEnglishPct()>0?36:-1),o(),g((F=s.medianRating())?37:-1,F),o(),g((N=s.avgTitleLength())?38:-1,N),o(),g((A=s.longestTitle())?39:-1,A),o(),g((R=s.shortestTitle())?40:-1,R),o(),g(s.highlyRatedCount()>0?41:-1),o(),g((z=s.coDirectedPct())?42:-1,z),o(),g(s.streamableHighRatedCount()>0?43:-1),o(),g((L=s.topDecadeLabel())?44:-1,L),o(),g(s.preWarCount()?45:-1),o(),g((V=s.newestFilmTitle())?46:-1,V),o(),g((Y=s.oldestFilmTitle())?47:-1,Y),o(),g((B=s.streamableHighRatedPct())?48:-1,B),o(),g(($=s.uniqueDirectorLanguages())?49:-1,$),o(),g((W=s.ratingsSpread())?50:-1,W),o(),g((j=s.directorWithMostFilms())?51:-1,j),o(),g((H=s.avgFilmYearGap())?52:-1,H),o(),g(s.nonEnglishCount()>0?53:-1),o(),g((q=s.genreAvgDirectorFilmCount())?54:-1,q),o(),g((U=s.imdbLinkedPct())?55:-1,U),o(),g((J=s.posterCoveragePct())?56:-1,J),o(),g(s.notableFact()?57:-1),o(),g((K=s.topFilm())?58:-1,K),o(3),M("genre__sort-btn--active",s.sortMode()==="rating"),o(2),M("genre__sort-btn--active",s.sortMode()==="newest"),o(2),M("genre__sort-btn--active",s.sortMode()==="oldest"),o(2),M("genre__sort-btn--active",s.sortMode()==="title"),o(3),M("genre__streamable-btn--active",s.streamableOnly()),o(),f(" ",s.streamableOnly()?"Free only":"All films"," "),o(),te("mode",s.viewMode),o(),g(s.viewMode()==="grid"?73:74),o(2),g(s.topDirectors().length>0?75:-1),o(),g(s.relatedGenres().length>0?76:-1),o(),g(s.decadeBreakdown().length>0?77:-1),o(),g(s.languageBreakdown().length>0?78:-1)}}function ht(n,t){n&1&&(r(0,"div",16)(1,"p"),d(2,"No films found for this genre."),l(),r(3,"a",58),d(4,"Browse All Films"),l()())}function bt(n,t){if(n&1){let e=I();r(0,"div",0)(1,"div",2)(2,"div")(3,"p",3),d(4,"Genre"),l(),r(5,"h1",4),d(6),l(),r(7,"p",5),d(8),l()(),r(9,"div",6)(10,"a",7),d(11,"Browse with filters"),l(),r(12,"button",8),y("click",function(){h(e);let a=u();return b(a.surpriseMe())}),Q(),r(13,"svg",9),E(14,"rect",10)(15,"circle",11)(16,"circle",12)(17,"circle",13)(18,"circle",14)(19,"circle",15),l()()()(),_(20,xt,79,59)(21,ht,5,0,"div",16),l()}if(n&2){let e=u();o(6),v(e.name()),o(2),w("",e.films().length," film",e.films().length!==1?"s":""," in catalog"),o(2),x("queryParams",S(5,fe,e.name())),o(10),g(e.films().length>0?20:21)}}var pe=class n{name=oe.required();catalog=P(de);collection=P(ce);titleService=P(ae);router=P(re);viewMode=k("grid");sortMode=k("rating");streamableOnly=k(!0);films=m(()=>this.catalog.movies().filter(t=>t.genres.some(e=>e.toLowerCase()===this.name().toLowerCase())));sortedFilms=m(()=>{let t=this.films();this.streamableOnly()&&(t=t.filter(i=>i.isStreamable));let e=[...t];switch(this.sortMode()){case"rating":return e.sort((i,a)=>a.voteAverage-i.voteAverage);case"newest":return e.sort((i,a)=>a.year-i.year);case"oldest":return e.sort((i,a)=>i.year-a.year);case"title":return e.sort((i,a)=>i.title.localeCompare(a.title))}});yearRange=m(()=>{let t=this.films();if(t.length===0)return"\u2014";let e=t.map(i=>i.year);return`${Math.min(...e)}\u2013${Math.max(...e)}`});avgRating=m(()=>{let t=this.films().filter(e=>e.voteAverage>0);return t.length===0?"\u2014":(t.reduce((e,i)=>e+i.voteAverage,0)/t.length).toFixed(1)});streamableCount=m(()=>this.films().filter(t=>t.isStreamable).length);directorCount=m(()=>{let t=new Set;for(let e of this.films())for(let i of e.directors)t.add(i);return t.size});silentEraCount=m(()=>this.films().filter(t=>t.year<1930).length);newestFilmYear=m(()=>{let t=this.films();if(t.length<5)return null;let e=Math.max(...t.map(a=>a.year)),i=Math.min(...t.map(a=>a.year));return e-i>=10?e:null});watchedInGenre=m(()=>{let t=this.collection.watchedIds();return t.size===0?0:this.films().filter(e=>t.has(e.id)).length});streamablePct=m(()=>{let t=this.films();return t.length===0?0:Math.round(t.filter(e=>e.isStreamable).length/t.length*100)});avgYear=m(()=>{let t=this.films();return t.length<3?null:Math.round(t.reduce((e,i)=>e+i.year,0)/t.length)});topFilm=m(()=>{let t=this.films().filter(e=>e.voteAverage>0);return t.length===0?null:t.reduce((e,i)=>i.voteAverage>e.voteAverage?i:e)});topDirectors=m(()=>{let t=new Map;for(let e of this.films())for(let i of e.directors){let a=t.get(i)??{count:0,totalRating:0};a.count++,a.totalRating+=e.voteAverage,t.set(i,a)}return[...t.entries()].filter(([,e])=>e.count>=2).sort((e,i)=>i[1].count-e[1].count).slice(0,8).map(([e,i])=>({name:e,count:i.count,avgRating:(i.totalRating/i.count).toFixed(1)}))});relatedGenres=m(()=>{let t=this.name().toLowerCase(),e=new Map,i=this.films();for(let c of i)for(let p of c.genres)p.toLowerCase()!==t&&e.set(p,(e.get(p)??0)+1);let a=i.length;return[...e.entries()].filter(([,c])=>c>=3).sort((c,p)=>p[1]-c[1]).slice(0,8).map(([c,p])=>({name:c,pct:Math.round(p/a*100)}))});peakDecade=m(()=>{let t=this.decadeBreakdown();return t.length===0?null:t.reduce((e,i)=>i.count>e.count?i:e)});notableFact=m(()=>{let t=this.films();if(t.length<3)return null;let e=t.filter(C=>C.isStreamable),i=t.filter(C=>C.voteAverage>0),a=i.length>0?i.reduce((C,G)=>C+G.voteAverage,0)/i.length:0,c=new Set(t.map(C=>C.language).filter(Boolean)),p=new Set(t.flatMap(C=>C.directors));return e.length===t.length?`All ${t.length} films are free to watch`:a>=7.5&&i.length>=5?`Exceptionally well-rated genre \u2014 ${a.toFixed(1)} average across ${i.length} films`:c.size>=5?`Truly international \u2014 films in ${c.size} languages`:p.size>=t.length*.8&&t.length>=10?`Remarkably diverse \u2014 ${p.size} different directors`:e.length>=50?`${e.length} films available to watch for free`:null});languageBreakdown=m(()=>{let t={en:"English",fr:"French",de:"German",ja:"Japanese",it:"Italian",es:"Spanish",ru:"Russian",sv:"Swedish",da:"Danish",pt:"Portuguese",nl:"Dutch",zh:"Chinese",ko:"Korean",pl:"Polish",cs:"Czech",hu:"Hungarian",fi:"Finnish",el:"Greek",no:"Norwegian",nb:"Norwegian"},e=new Map;for(let i of this.films())if(i.language){let a=t[i.language]??i.language.toUpperCase();e.set(a,(e.get(a)??0)+1)}return e.size<2?[]:[...e.entries()].sort((i,a)=>a[1]-i[1]).slice(0,8).map(([i,a])=>({name:i,count:a}))});ratingVsCatalog=m(()=>{let t=this.films().filter(p=>p.voteAverage>0);if(t.length<5)return null;let e=t.reduce((p,C)=>p+C.voteAverage,0)/t.length,i=this.catalog.movies().filter(p=>p.voteAverage>0);if(i.length===0)return null;let a=i.reduce((p,C)=>p+C.voteAverage,0)/i.length,c=e-a;return Math.abs(c)<.2?null:c>0?`+${c.toFixed(1)}`:c.toFixed(1)});highestRatedTitle=m(()=>{let t=this.topFilm();return!t||t.voteAverage<7?null:{title:t.title.length>30?t.title.slice(0,28)+"...":t.title,rating:t.voteAverage.toFixed(1)}});medianYear=m(()=>{let t=this.films();if(t.length<5)return null;let e=t.map(p=>p.year).sort((p,C)=>p-C),i=Math.floor(e.length/2),a=e.length%2===0?Math.round((e[i-1]+e[i])/2):e[i],c=this.avgYear();return c!==null&&Math.abs(a-c)<3?null:a});exclusiveCount=m(()=>{let t=this.films();if(t.length<5)return null;let e=t.filter(i=>i.genres.length===1).length;return e<1?null:e});mostProlificDirector=m(()=>{let t=new Map;for(let i of this.films())for(let a of i.directors)t.set(a,(t.get(a)??0)+1);let e=[...t.entries()].sort((i,a)=>a[1]-i[1])[0];return!e||e[1]<3?null:{name:e[0],count:e[1]}});avgFilmAge=m(()=>{let t=this.films();if(t.length<2)return 0;let e=new Date().getFullYear();return Math.round(t.reduce((i,a)=>i+(e-a.year),0)/t.length)});coDirectedCount=m(()=>{let t=this.films();return t.length<5?0:t.filter(e=>e.directors.length>1).length});unwatchedStreamableCount=m(()=>{let t=this.films();if(t.length<5)return 0;let e=this.collection.watchedIds();return t.filter(i=>i.isStreamable&&!e.has(i.id)).length});nonEnglishPct=m(()=>{let t=this.films();if(t.length<10)return 0;let e=t.filter(a=>a.language&&a.language!=="English"&&a.language!=="en").length,i=Math.round(e/t.length*100);return i>0&&i<100?i:0});medianRating=m(()=>{let t=this.films().filter(c=>c.voteAverage>0);if(t.length<5)return null;let e=t.map(c=>c.voteAverage).sort((c,p)=>c-p),i=Math.floor(e.length/2);return(e.length%2===0?(e[i-1]+e[i])/2:e[i]).toFixed(1)});highlyRatedCount=m(()=>this.films().filter(t=>t.voteAverage>=8).length);shortestTitle=m(()=>{let t=this.films();if(t.length<5)return null;let e=t.reduce((i,a)=>i.title.length<=a.title.length?i:a);return e.title.length<=12?e.title:null});longestTitle=m(()=>{let t=this.films();if(t.length<5)return null;let e=t.reduce((i,a)=>i.title.length>=a.title.length?i:a);return e.title.length>=20?e.title:null});avgTitleLength=m(()=>{let t=this.films();if(t.length<5)return null;let e=Math.round(t.reduce((i,a)=>i+a.title.length,0)/t.length);return e>0?e:null});coDirectedPct=m(()=>{let t=this.films();if(t.length<10)return null;let e=Math.round(t.filter(i=>i.directors.length>1).length/t.length*100);return e>0&&e<100?e:null});streamableHighRatedCount=m(()=>this.films().filter(t=>t.isStreamable&&t.voteAverage>=7).length);topDecadeLabel=m(()=>{let t=this.films();if(t.length<10)return null;let e=new Map;for(let a of t){let c=Math.floor(a.year/10)*10;e.set(c,(e.get(c)??0)+1)}return e.size<2?null:`${[...e.entries()].sort((a,c)=>c[1]-a[1])[0][0]}s`});ratingsSpread=m(()=>{let t=this.films().filter(p=>p.voteAverage>0);if(t.length<5)return null;let e=t.map(p=>p.voteAverage).sort((p,C)=>p-C),i=e[0],a=e[e.length-1];return a-i>=2?`${i.toFixed(1)}\u2013${a.toFixed(1)}`:null});uniqueDirectorLanguages=m(()=>{let t=this.films();if(t.length<10)return null;let e=new Set(t.filter(i=>i.language).map(i=>i.language));return e.size>=3?e.size:null});streamableHighRatedPct=m(()=>{let t=this.films().filter(a=>a.isStreamable);if(t.length<5)return null;let e=t.filter(a=>a.voteAverage>=7).length,i=Math.round(e/t.length*100);return i>0&&i<100?i:null});oldestFilmTitle=m(()=>{let t=this.films();return t.length<2?null:t.reduce((i,a)=>i.year<=a.year?i:a).title});newestFilmTitle=m(()=>{let t=this.films();return t.length<2?null:t.reduce((i,a)=>i.year>=a.year?i:a).title});imdbLinkedPct=m(()=>{let t=this.films();if(t.length<10)return null;let e=Math.round(t.filter(i=>i.imdbId).length/t.length*100);return e>0&&e<100?e:null});genreAvgDirectorFilmCount=m(()=>{let t=this.films();if(t.length<10)return null;let e=new Map;for(let a of t)for(let c of a.directors)e.set(c,(e.get(c)??0)+1);if(e.size<5)return null;let i=[...e.values()].reduce((a,c)=>a+c,0)/e.size;return i>=1.1?i.toFixed(1):null});nonEnglishCount=m(()=>{let t=this.films();if(t.length<5)return 0;let e=t.filter(i=>i.language&&i.language!=="English"&&i.language!=="en").length;return e>=3?e:0});avgFilmYearGap=m(()=>{let t=this.films();if(t.length<5)return null;let e=t.map(c=>c.year).sort((c,p)=>c-p),i=[];for(let c=1;c<e.length;c++)i.push(e[c]-e[c-1]);let a=i.reduce((c,p)=>c+p,0)/i.length;return a>=.5?a.toFixed(1):null});directorWithMostFilms=m(()=>{let t=this.films();if(t.length<5)return null;let e=new Map;for(let a of t)for(let c of a.directors)e.set(c,(e.get(c)??0)+1);let i=[...e.entries()].sort((a,c)=>c[1]-a[1])[0];return i&&i[1]>=3?{name:i[0],count:i[1]}:null});preWarCount=m(()=>{let t=this.films();if(t.length<5)return 0;let e=t.filter(i=>i.year<1940).length;return e>=3?e:0});posterCoveragePct=m(()=>{let t=this.films();if(t.length<10)return null;let e=Math.round(t.filter(i=>i.posterUrl).length/t.length*100);return e>0&&e<100?e:null});decadeBreakdown=m(()=>{let t=new Map;for(let e of this.films()){let i=Math.floor(e.year/10)*10;t.set(i,(t.get(i)??0)+1)}return[...t.entries()].sort((e,i)=>e[0]-i[0]).map(([e,i])=>({decade:e,count:i}))});ngOnInit(){this.catalog.load(),this.titleService.setTitle(`${this.name()} Films \u2014 BW Cinema`)}surpriseMe(){let t=this.sortedFilms();if(t.length===0)return;let e=t[Math.floor(Math.random()*t.length)];this.router.navigate(["/movie",e.id])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Z({type:n,selectors:[["app-genre"]],inputs:{name:[1,"name"]},decls:2,vars:1,consts:[[1,"genre","container"],[3,"count"],[1,"genre__header"],[1,"genre__eyebrow"],[1,"genre__name"],[1,"genre__meta"],[1,"genre__actions"],["routerLink","/browse",1,"btn-secondary","genre__browse-link",3,"queryParams"],["aria-label","Random film from this genre","title","Random film",1,"genre__surprise-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","1","y","1","width","22","height","22","rx","4"],["cx","8","cy","8","r","1.5","fill","currentColor"],["cx","16","cy","8","r","1.5","fill","currentColor"],["cx","8","cy","16","r","1.5","fill","currentColor"],["cx","16","cy","16","r","1.5","fill","currentColor"],["cx","12","cy","12","r","1.5","fill","currentColor"],[1,"genre__empty"],[1,"genre__stats"],[1,"genre__stat"],[1,"genre__stat-value"],[1,"genre__stat-label"],[1,"genre__stat","genre__stat--link",3,"routerLink"],[1,"genre__fact"],[1,"genre__top-film"],[1,"genre__view-bar"],[1,"genre__sort-btns"],[1,"genre__sort-btn",3,"click"],[1,"genre__bar-right"],[1,"genre__streamable-btn",3,"click"],[3,"modeChange","mode"],[3,"movies"],[1,"genre__directors"],[1,"genre__related"],[1,"genre__decades"],[1,"genre__languages"],[1,"genre__top-film-card",3,"routerLink"],["loading","lazy",1,"genre__top-film-poster",3,"src","alt"],[1,"genre__top-film-placeholder"],[1,"genre__top-film-info"],[1,"genre__top-film-label"],[1,"genre__top-film-title"],[1,"genre__top-film-meta"],[1,"genre__top-film-rating"],[1,"genre__section-title"],[1,"genre__directors-grid"],[1,"genre__director-card",3,"routerLink"],[1,"genre__director-name"],[1,"genre__director-count"],[1,"genre__director-rating"],[1,"genre__related-chips"],[1,"genre__related-chip",3,"routerLink"],[1,"genre__related-pct"],[1,"genre__decades-row"],[1,"genre__decade-chip",3,"routerLink"],[1,"genre__decade-count"],[1,"genre__lang-chips"],[1,"genre__lang-chip"],[1,"genre__lang-count"],["routerLink","/browse",1,"btn-primary"]],template:function(e,i){e&1&&_(0,be,2,1,"div",0)(1,bt,22,7,"div",0),e&2&&g(i.catalog.loading()?0:1)},dependencies:[le,se,ge,me,_e],styles:[".genre[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.genre__header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:var(--space-lg)}.genre__eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.15em;font-size:.8rem;font-weight:600;color:var(--accent-gold);margin:0 0 var(--space-xs)}.genre__name[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.genre__meta[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.95rem;margin:0}.genre__actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.genre__browse-link[_ngcontent-%COMP%]{display:inline-block;font-size:.85rem;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg)}.genre__stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:var(--space-md);margin-bottom:var(--space-xl)}.genre__stat[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md);text-align:center}.genre__stat-value[_ngcontent-%COMP%]{display:block;font-family:var(--font-heading);font-size:1.5rem;font-weight:700;color:var(--accent-gold);margin-bottom:2px}.genre__stat-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-tertiary)}.genre__stat-value--positive[_ngcontent-%COMP%]{color:#198754}.genre__stat--link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none;transition:border-color .2s}.genre__stat--link[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold)}.genre__top-film[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.genre__top-film-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-lg);padding:var(--space-md);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-xl);text-decoration:none;color:inherit;transition:border-color .2s,box-shadow .2s}.genre__top-film-card[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);box-shadow:var(--shadow-md);color:inherit}.genre__top-film-poster[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius);flex-shrink:0}.genre__top-film-placeholder[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);color:var(--text-tertiary);font-size:1.2rem;flex-shrink:0}.genre__top-film-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.genre__top-film-label[_ngcontent-%COMP%]{font-size:.7rem;text-transform:uppercase;letter-spacing:.1em;color:var(--accent-gold);font-weight:600}.genre__top-film-title[_ngcontent-%COMP%]{font-size:1.1rem}.genre__top-film-meta[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.genre__top-film-rating[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1rem;font-weight:700;color:var(--accent-gold)}.genre__view-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--space-md);margin-bottom:var(--space-lg);flex-wrap:wrap}.genre__sort-btns[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);flex-wrap:wrap}.genre__sort-btn[_ngcontent-%COMP%]{padding:6px 14px;border-radius:var(--radius-lg);background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}.genre__sort-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.genre__sort-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.genre__bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.genre__streamable-btn[_ngcontent-%COMP%]{padding:6px 12px;border-radius:var(--radius-lg);background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary);font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s}.genre__streamable-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.genre__streamable-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.genre__surprise-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--bg-hover);border:1px solid var(--border);color:var(--text-tertiary);cursor:pointer;transition:all .2s}.genre__surprise-btn[_ngcontent-%COMP%]:hover{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.genre__section-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:var(--space-md)}.genre__directors[_ngcontent-%COMP%]{margin-top:var(--space-2xl);padding-top:var(--space-lg);border-top:1px solid var(--border)}.genre__directors-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--space-md)}.genre__director-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:var(--space-md);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;transition:all .2s}.genre__director-card[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:inherit}.genre__director-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);margin-bottom:2px}.genre__director-count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.genre__director-rating[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.1rem;font-weight:700;color:var(--accent-gold);margin-top:var(--space-xs)}.genre__related[_ngcontent-%COMP%]{margin-top:var(--space-xl);padding-top:var(--space-lg);border-top:1px solid var(--border)}.genre__related-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.genre__related-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-xs);padding:6px 14px;background:var(--bg-surface);border:1px solid var(--border);border-radius:20px;font-size:.85rem;font-weight:600;color:var(--text-secondary);text-decoration:none;transition:all .2s}.genre__related-chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.genre__related-pct[_ngcontent-%COMP%]{font-size:.7rem;background:var(--bg-raised);padding:1px 6px;border-radius:8px;color:var(--text-tertiary)}.genre__decades[_ngcontent-%COMP%]{margin-top:var(--space-xl);padding-top:var(--space-lg);border-top:1px solid var(--border)}.genre__decades-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.genre__decade-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-xs);padding:6px 14px;background:var(--bg-surface);border:1px solid var(--border);border-radius:20px;font-size:.85rem;font-weight:600;color:var(--text-secondary);text-decoration:none;transition:all .2s}.genre__decade-chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.genre__decade-count[_ngcontent-%COMP%]{font-size:.7rem;background:var(--bg-raised);padding:1px 6px;border-radius:8px;color:var(--text-tertiary)}.genre__languages[_ngcontent-%COMP%]{margin-top:var(--space-xl);padding-top:var(--space-lg);border-top:1px solid var(--border)}.genre__lang-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-xs)}.genre__lang-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-xs);padding:4px 12px;background:var(--bg-surface);border:1px solid var(--border);border-radius:14px;font-size:.8rem;color:var(--text-secondary)}.genre__lang-count[_ngcontent-%COMP%]{font-size:.65rem;background:var(--bg-raised);padding:1px 5px;border-radius:6px;color:var(--text-tertiary)}.genre__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl);color:var(--text-tertiary)}.genre__fact[_ngcontent-%COMP%]{font-style:italic;color:var(--accent-gold);font-size:.95rem;margin:0 0 var(--space-xl)}@media(max-width:768px){.genre__header[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}}@media(max-width:480px){.genre__stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.genre__sort-btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:.8rem}.genre__streamable-btn[_ngcontent-%COMP%]{padding:8px 12px}}"],changeDetection:0})};export{pe as GenreComponent};
