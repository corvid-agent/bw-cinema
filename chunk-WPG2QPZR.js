import{a as G}from"./chunk-JVUEOQ2T.js";import{a as V}from"./chunk-U6UKIARX.js";import{$ as _,A as O,Aa as v,Ba as k,F as S,Ja as w,K as I,Ma as s,O as o,R as z,_ as p,ba as D,ca as C,da as b,ea as h,fa as r,fb as q,ga as a,ha as A,la as M,na as f,pa as g,v as N,va as F,wa as L,x,y,ya as c,z as P,za as u}from"./chunk-SA65F7OW.js";var j=i=>["/movie",i],U=i=>["/director",i],R=i=>["/genre",i],T=(i,e)=>e.id;function H(i,e){if(i&1){let t=M();r(0,"li",20),f("mousedown",function(){let l=x(t).$implicit,m=g(2);return y(m.selectA(l))}),c(1),a()}if(i&2){let t=e.$implicit;o(),k("",t.title," (",t.year,")")}}function W(i,e){if(i&1&&(r(0,"ul",6),C(1,H,2,2,"li",null,T),a()),i&2){let t=g();o(),b(t.resultsA())}}function J(i,e){if(i&1){let t=M();r(0,"div",7)(1,"span"),c(2),a(),r(3,"button",21),f("click",function(){x(t);let l=g();return l.filmA.set(null),y(l.queryA.set(""))}),c(4,"\xD7"),a()()}if(i&2){let t=g();o(2),k("",t.filmA().title," (",t.filmA().year,")")}}function K(i,e){if(i&1){let t=M();r(0,"button",23),f("click",function(){let l=x(t).$implicit,m=g(2);return y(m.selectA(l))}),c(1),a()}if(i&2){let t=e.$implicit;o(),u(t.title)}}function Q(i,e){if(i&1&&(r(0,"div",8),C(1,K,2,1,"button",22,T),a()),i&2){let t=g();o(),b(t.quickPicks().slice(0,4))}}function X(i,e){if(i&1){let t=M();r(0,"li",20),f("mousedown",function(){let l=x(t).$implicit,m=g(2);return y(m.selectB(l))}),c(1),a()}if(i&2){let t=e.$implicit;o(),k("",t.title," (",t.year,")")}}function Z(i,e){if(i&1&&(r(0,"ul",6),C(1,X,2,2,"li",null,T),a()),i&2){let t=g();o(),b(t.resultsB())}}function ee(i,e){if(i&1){let t=M();r(0,"div",7)(1,"span"),c(2),a(),r(3,"button",24),f("click",function(){x(t);let l=g();return l.filmB.set(null),y(l.queryB.set(""))}),c(4,"\xD7"),a()()}if(i&2){let t=g();o(2),k("",t.filmB().title," (",t.filmB().year,")")}}function te(i,e){if(i&1){let t=M();r(0,"button",23),f("click",function(){let l=x(t).$implicit,m=g(2);return y(m.selectB(l))}),c(1),a()}if(i&2){let t=e.$implicit;o(),u(t.title)}}function ne(i,e){if(i&1&&(r(0,"div",8),C(1,te,2,1,"button",22,T),a()),i&2){let t=g();o(),b(t.quickPicks().slice(4,8))}}function ie(i,e){i&1&&(r(0,"div",18),c(1," You've selected the same film for both slots. Pick a different film to compare. "),a())}function oe(i,e){if(i&1&&A(0,"img",28),i&2){let t=g(2);h("src",t.filmA().posterUrl,I)("alt",t.filmA().title)}}function ae(i,e){if(i&1&&A(0,"img",28),i&2){let t=g(2);h("src",t.filmB().posterUrl,I)("alt",t.filmB().title)}}function re(i,e){i&1&&(r(0,"div",33),c(1),a()),i&2&&(o(),u(e))}function le(i,e){if(i&1&&(r(0,"div",34),A(1,"div",47),a()),i&2){let t=g(2);o(),F("width",t.filmA().voteAverage*10,"%")}}function ce(i,e){if(i&1&&(r(0,"div",34),A(1,"div",48),a()),i&2){let t=g(2);o(),F("width",t.filmB().voteAverage*10,"%")}}function de(i,e){i&1&&(r(0,"span"),c(1,", "),a())}function se(i,e){if(i&1&&(r(0,"a",49),c(1),a(),p(2,de,2,0,"span")),i&2){let t=e.$implicit,n=e.$index,l=e.$count;h("routerLink",w(3,U,t)),o(),u(t),o(),_(n!==l-1?2:-1)}}function me(i,e){i&1&&(r(0,"span"),c(1,"\u2014"),a())}function pe(i,e){i&1&&(r(0,"span"),c(1,", "),a())}function _e(i,e){if(i&1&&(r(0,"a",49),c(1),a(),p(2,pe,2,0,"span")),i&2){let t=e.$implicit,n=e.$index,l=e.$count;h("routerLink",w(3,U,t)),o(),u(t),o(),_(n!==l-1?2:-1)}}function ge(i,e){i&1&&(r(0,"span"),c(1,"\u2014"),a())}function ue(i,e){i&1&&(r(0,"span"),c(1,", "),a())}function fe(i,e){if(i&1&&(r(0,"a",49),c(1),a(),p(2,ue,2,0,"span")),i&2){let t=e.$implicit,n=e.$index,l=e.$count;h("routerLink",w(3,R,t)),o(),u(t),o(),_(n!==l-1?2:-1)}}function ve(i,e){i&1&&(r(0,"span"),c(1,"\u2014"),a())}function he(i,e){i&1&&(r(0,"span"),c(1,", "),a())}function Ce(i,e){if(i&1&&(r(0,"a",49),c(1),a(),p(2,he,2,0,"span")),i&2){let t=e.$implicit,n=e.$index,l=e.$count;h("routerLink",w(3,R,t)),o(),u(t),o(),_(n!==l-1?2:-1)}}function be(i,e){i&1&&(r(0,"span"),c(1,"\u2014"),a())}function xe(i,e){if(i&1&&(r(0,"div",36)(1,"span",50),c(2),a(),r(3,"span",51),c(4,"Similarity"),a()()),i&2){let t=g(2);o(2),v("",t.similarityScore(),"%")}}function ye(i,e){i&1&&(r(0,"p",37),c(1),a()),i&2&&(o(),u(e))}function Ae(i,e){i&1&&(r(0,"p",37),c(1),a()),i&2&&(o(),u(e))}function Me(i,e){i&1&&(r(0,"span",52),c(1),a()),i&2&&(o(),v(" \xB7 ",e,"pt gap"))}function Se(i,e){if(i&1&&(r(0,"span",52),c(1),a()),i&2){let t=g(3);o(),v(" \xB7 ",t.genreOverlapPct(),"% genre overlap")}}function we(i,e){if(i&1&&(r(0,"span",52),c(1),a()),i&2){let t=g(3);o(),v(" \xB7 ",t.combinedGenreCount()," genres combined")}}function Be(i,e){if(i&1&&(r(0,"span",52),c(1),a()),i&2){let t=g(3);o(),v(" \xB7 ",t.combinedDirectorCount()," directors")}}function De(i,e){if(i&1&&(r(0,"span",52),c(1),a()),i&2){let t=g(3);o(),v(" \xB7 ",t.combinedLanguageCount()," languages")}}function Ee(i,e){if(i&1&&(r(0,"div",38),c(1),p(2,Me,2,1,"span",52),p(3,Se,2,1,"span",52),p(4,we,2,1,"span",52),p(5,Be,2,1,"span",52),p(6,De,2,1,"span",52),a()),i&2){let t,n=g(2);o(),v(" Combined Avg: ",e,"/10 "),o(),_((t=n.ratingDifference())?2:-1,t),o(),_(n.genreOverlapPct()>0?3:-1),o(),_(n.combinedGenreCount()>0?4:-1),o(),_(n.combinedDirectorCount()>1?5:-1),o(),_(n.combinedLanguageCount()>1?6:-1)}}function ke(i,e){if(i&1&&(r(0,"div",53),c(1),a()),i&2){let t=e.$implicit;o(),u(t)}}function Pe(i,e){if(i&1&&(r(0,"div")(1,"span",54),c(2,"Shared genres:"),a(),c(3),a()),i&2){let t=g(3);o(3),v(" ",t.sharedGenres().join(", ")," ")}}function Te(i,e){if(i&1&&(r(0,"div")(1,"span",54),c(2,"Shared directors:"),a(),c(3),a()),i&2){let t=g(3);o(3),v(" ",t.sharedDirectors().join(", ")," ")}}function $e(i,e){if(i&1&&(r(0,"div",39),C(1,ke,2,1,"div",53,D),p(3,Pe,4,1,"div"),p(4,Te,4,1,"div"),a()),i&2){let t=g(2);o(),b(t.comparisonNotes()),o(2),_(t.sharedGenres().length>0?3:-1),o(),_(t.sharedDirectors().length>0?4:-1)}}function Ne(i,e){if(i&1&&(r(0,"div",40),c(1),a()),i&2){let t=g(2);o(),u(t.verdict())}}function Oe(i,e){if(i&1){let t=M();r(0,"div",19)(1,"div",25),A(2,"div",26),r(3,"div",27),p(4,oe,1,2,"img",28),r(5,"a",29),c(6),a()(),r(7,"div",30),p(8,ae,1,2,"img",28),r(9,"a",29),c(10),a()()(),r(11,"div",31)(12,"div",26),c(13,"Year"),a(),r(14,"div",32),c(15),a(),r(16,"div",32),c(17),a()(),p(18,re,2,1,"div",33),r(19,"div",31)(20,"div",26),c(21,"Rating"),a(),r(22,"div",32),c(23),p(24,le,2,2,"div",34),a(),r(25,"div",32),c(26),p(27,ce,2,2,"div",34),a()(),r(28,"div",31)(29,"div",26),c(30,"Directors"),a(),r(31,"div",35),C(32,se,3,5,null,null,D),p(34,me,2,0,"span"),a(),r(35,"div",35),C(36,_e,3,5,null,null,D),p(38,ge,2,0,"span"),a()(),r(39,"div",31)(40,"div",26),c(41,"Genres"),a(),r(42,"div",35),C(43,fe,3,5,null,null,D),p(45,ve,2,0,"span"),a(),r(46,"div",35),C(47,Ce,3,5,null,null,D),p(49,be,2,0,"span"),a()(),r(50,"div",31)(51,"div",26),c(52,"Language"),a(),r(53,"div",32),c(54),a(),r(55,"div",32),c(56),a()(),r(57,"div",31)(58,"div",26),c(59,"Streamable"),a(),r(60,"div",32),c(61),a(),r(62,"div",32),c(63),a()(),r(64,"div",31)(65,"div",26),c(66,"Source"),a(),r(67,"div",32),c(68),a(),r(69,"div",32),c(70),a()(),p(71,xe,5,1,"div",36),p(72,ye,2,1,"p",37),p(73,Ae,2,1,"p",37),p(74,Ee,7,6,"div",38),p(75,$e,5,2,"div",39),p(76,Ne,2,1,"div",40),r(77,"div",41)(78,"button",42),f("click",function(){x(t);let l=g();return y(l.copyComparison())}),P(),r(79,"svg",43),A(80,"rect",44)(81,"path",45),a(),c(82," Copy Comparison "),a(),O(),r(83,"button",42),f("click",function(){x(t);let l=g();return y(l.randomCompare())}),P(),r(84,"svg",43),A(85,"path",46),a(),c(86," Random Pair "),a()()()}if(i&2){let t,n,l,m,d=g();o(4),_(d.filmA().posterUrl?4:-1),o(),h("routerLink",w(33,j,d.filmA().id)),o(),u(d.filmA().title),o(2),_(d.filmB().posterUrl?8:-1),o(),h("routerLink",w(35,j,d.filmB().id)),o(),u(d.filmB().title),o(5),u(d.filmA().year),o(2),u(d.filmB().year),o(),_((t=d.yearGap())?18:-1,t),o(4),L("compare__cell--winner",d.filmA().voteAverage>d.filmB().voteAverage),o(),v(" ",d.filmA().voteAverage||"\u2014"," "),o(),_(d.filmA().voteAverage>0?24:-1),o(),L("compare__cell--winner",d.filmB().voteAverage>d.filmA().voteAverage),o(),v(" ",d.filmB().voteAverage||"\u2014"," "),o(),_(d.filmB().voteAverage>0?27:-1),o(5),b(d.filmA().directors),o(2),_(d.filmA().directors.length===0?34:-1),o(2),b(d.filmB().directors),o(2),_(d.filmB().directors.length===0?38:-1),o(5),b(d.filmA().genres),o(2),_(d.filmA().genres.length===0?45:-1),o(2),b(d.filmB().genres),o(2),_(d.filmB().genres.length===0?49:-1),o(5),u(d.filmA().language||"\u2014"),o(2),u(d.filmB().language||"\u2014"),o(5),u(d.filmA().isStreamable?"Yes":"No"),o(2),u(d.filmB().isStreamable?"Yes":"No"),o(5),u(d.getStreamSource(d.filmA())),o(2),u(d.getStreamSource(d.filmB())),o(),_(d.similarityScore()>0?71:-1),o(),_((n=d.doubleFeatureNote())?72:-1,n),o(),_((l=d.eraLabel())?73:-1,l),o(),_((m=d.combinedAvgRating())?74:-1,m),o(),_(d.comparisonNotes().length>0||d.sharedGenres().length>0||d.sharedDirectors().length>0?75:-1),o(),_(d.verdict()?76:-1)}}var Y=class i{catalog=N(V);notifications=N(G);queryA=S("");queryB=S("");filmA=S(null);filmB=S(null);showDropA=S(!1);showDropB=S(!1);resultsA=s(()=>this.searchFilms(this.queryA()));resultsB=s(()=>this.searchFilms(this.queryB()));quickPicks=s(()=>this.catalog.movies().filter(e=>e.voteAverage>=7.5&&e.posterUrl&&e.isStreamable).sort((e,t)=>t.voteAverage-e.voteAverage).slice(0,8));sharedGenres=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return[];let n=new Set(t.genres);return e.genres.filter(l=>n.has(l))});comparisonNotes=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return[];let n=[],l=Math.abs(e.year-t.year);l===0?n.push("Released the same year"):n.push(`${l} year${l>1?"s":""} apart`);let m=Math.floor(e.year/10)*10,d=Math.floor(t.year/10)*10;m===d&&n.push(`Both from the ${m}s`),e.isStreamable&&t.isStreamable&&n.push("Both free to watch");let B=Math.abs(e.voteAverage-t.voteAverage);return e.voteAverage>0&&t.voteAverage>0&&B<.3&&n.push("Nearly identical ratings"),e.language&&t.language&&(e.language===t.language?e.language!=="en"&&n.push(`Both in ${e.language.toUpperCase()}`):n.push(`${e.language.toUpperCase()} vs ${t.language.toUpperCase()}`)),n});yearGap=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=Math.abs(e.year-t.year);return n===0?"Same year":`${n} year${n!==1?"s":""} apart`});similarityScore=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return 0;let n=0,l=0;l+=30;let m=new Set(e.genres),d=t.genres.filter(E=>m.has(E)).length,B=new Set([...e.genres,...t.genres]).size;if(B>0&&(n+=Math.round(d/B*30)),l+=15,Math.floor(e.year/10)===Math.floor(t.year/10)?n+=15:Math.abs(e.year-t.year)<=15&&(n+=7),l+=15,e.language&&t.language&&e.language===t.language&&(n+=15),l+=20,e.voteAverage>0&&t.voteAverage>0){let E=Math.abs(e.voteAverage-t.voteAverage);n+=Math.round(Math.max(0,20-E*4))}l+=20;let $=new Set(e.directors);return t.directors.filter(E=>$.has(E)).length>0&&(n+=20),Math.round(n/l*100)});sharedDirectors=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return[];let n=new Set(t.directors);return e.directors.filter(l=>n.has(l))});verdict=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return"";if(e.voteAverage>0&&t.voteAverage>0){let n=e.voteAverage-t.voteAverage;if(Math.abs(n)<.3)return`${e.title} and ${t.title} are rated nearly identically \u2014 a true toss-up.`;let l=n>0?e:t,m=n>0?t:e;return Math.abs(n)>=2?`${l.title} has a commanding lead over ${m.title} with a ${Math.abs(n).toFixed(1)}-point edge.`:`${l.title} edges out ${m.title} by ${Math.abs(n).toFixed(1)} points.`}if(e.year!==t.year){let n=e.year<t.year?e:t,l=e.year<t.year?t:e;return`${n.title} predates ${l.title} by ${l.year-n.year} years.`}return`${e.title} and ${t.title} \u2014 two films from ${e.year}.`});genreOverlapPct=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.genres.length===0||t.genres.length===0)return 0;let n=new Set(e.genres),l=t.genres.filter(d=>n.has(d)).length,m=new Set([...e.genres,...t.genres]).size;return m>0?Math.round(l/m*100):0});ratingDifference=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.voteAverage===0||t.voteAverage===0)return null;let n=Math.abs(e.voteAverage-t.voteAverage);return n<.1?null:n.toFixed(1)});doubleFeatureNote=s(()=>{let e=this.similarityScore();return e>=70?"Perfect double feature!":e>=50?"Great double feature pairing":null});eraLabel=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=Math.floor(e.year/10)*10,l=Math.floor(t.year/10)*10,m=Math.abs(n-l);return m===0?null:m>=30?"A cross-era pairing":null});combinedGenreCount=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?0:new Set([...e.genres,...t.genres]).size});combinedDirectorCount=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?0:new Set([...e.directors,...t.directors]).size});midpointYear=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t||Math.abs(e.year-t.year)<5?null:Math.round((e.year+t.year)/2)});yearSpan=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||Math.abs(e.year-t.year)<5)return null;let l=Math.min(e.year,t.year),m=Math.max(e.year,t.year);return`${l}\u2013${m}`});combinedLanguageCount=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return 0;let n=new Set;return e.language&&n.add(e.language),t.language&&n.add(t.language),n.size});avgFilmAge=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=new Date().getFullYear(),l=Math.round((n-e.year+(n-t.year))/2);return l>=30?l:null});combinedAvgRating=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t||e.voteAverage===0||t.voteAverage===0?null:((e.voteAverage+t.voteAverage)/2).toFixed(1)});bothStreamable=s(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.isStreamable&&t.isStreamable)});bothNonEnglish=s(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.language&&e.language!=="English"&&e.language!=="en"&&t.language&&t.language!=="English"&&t.language!=="en")});bothHighlyRated=s(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.voteAverage>=8&&t.voteAverage>=8)});sameLanguage=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t||!e.language||!t.language?null:e.language===t.language&&e.language!=="English"&&e.language!=="en"?e.language:null});combinedTitleLength=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=e.title.length+t.title.length;return n>=10?n:null});sameDecade=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?!1:Math.floor(e.year/10)===Math.floor(t.year/10)});ratingGap=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.voteAverage===0||t.voteAverage===0)return null;let n=Math.abs(e.voteAverage-t.voteAverage);return n>=1?n.toFixed(1):null});combinedAvgYear=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?null:Math.round((e.year+t.year)/2)});titleLengthDiff=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=Math.abs(e.title.length-t.title.length);return n>=5?n:null});bothSilentEra=s(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.year<1930&&t.year<1930)});combinedGenreList=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=new Set([...e.genres,...t.genres]);return n.size>=3?[...n].slice(0,4).join(", "):null});bothCoDirected=s(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.directors.length>1&&t.directors.length>1)});bothPreWar=s(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.year<1940&&t.year<1940)});avgYearDiff=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=this.catalog.movies();if(n.length<10)return null;let l=Math.round(n.reduce((B,$)=>B+$.year,0)/n.length),m=Math.round((e.year+t.year)/2),d=Math.abs(m-l);return d>=5?d:null});directorCountDiff=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=Math.abs(e.directors.length-t.directors.length);return n>=1?n:null});olderFilmLabel=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.year===t.year)return null;let n=Math.abs(e.year-t.year);return n<5?null:`"${(e.year<t.year?e:t).title}" is ${n} years older`});higherRatedLabel=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.voteAverage===0||t.voteAverage===0)return null;let n=Math.abs(e.voteAverage-t.voteAverage);return n<.5?null:`"${(e.voteAverage>t.voteAverage?e:t).title}" rated ${n.toFixed(1)} higher`});bothImdbLinked=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?!1:!!e.imdbId&&!!t.imdbId});avgGenreCount=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=(e.genres.length+t.genres.length)/2;return n>=2?n.toFixed(1):null});combinedLanguages=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=new Set;return e.language&&n.add(e.language),t.language&&n.add(t.language),n.size>=2?[...n].join(", "):null});genreCountDiff=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=Math.abs(e.genres.length-t.genres.length);return n>=2?n:null});bothHavePoster=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?!1:!!(e.posterUrl&&t.posterUrl)});combinedAvgFilmAge=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=new Date().getFullYear(),l=Math.round((n-e.year+(n-t.year))/2);return l>=20?l:null});combinedPosterCount=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=(e.posterUrl?1:0)+(t.posterUrl?1:0);return n===1?n:null});bothYtStreamable=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?!1:!!e.youtubeId&&!!t.youtubeId});bothIaStreamable=s(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?!1:!!e.internetArchiveId&&!!t.internetArchiveId});combinedIaCount=s(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let n=(e.internetArchiveId?1:0)+(t.internetArchiveId?1:0);return n===1?n:null});ngOnInit(){this.catalog.load()}onSearchA(e){this.queryA.set(e.target.value),this.showDropA.set(!0)}onSearchB(e){this.queryB.set(e.target.value),this.showDropB.set(!0)}swap(){let e=this.filmA(),t=this.filmB(),n=this.queryA(),l=this.queryB();this.filmA.set(t),this.filmB.set(e),this.queryA.set(l),this.queryB.set(n)}getStreamSource(e){return e.internetArchiveId?"Internet Archive":e.youtubeId?"YouTube":e.imdbId?"IMDb (info only)":"Not available"}selectA(e){this.filmA.set(e),this.queryA.set(e.title),this.showDropA.set(!1)}selectB(e){this.filmB.set(e),this.queryB.set(e.title),this.showDropB.set(!1)}closeDropA(){setTimeout(()=>this.showDropA.set(!1),200)}closeDropB(){setTimeout(()=>this.showDropB.set(!1),200)}copyComparison(){let e=this.filmA(),t=this.filmB();if(!e||!t)return;let n=this.comparisonNotes(),l=this.sharedGenres(),m=[`${e.title} (${e.year}) vs ${t.title} (${t.year})`,"",`Rating: ${e.voteAverage||"\u2014"} vs ${t.voteAverage||"\u2014"}`,`Directors: ${e.directors.join(", ")||"\u2014"} vs ${t.directors.join(", ")||"\u2014"}`,`Genres: ${e.genres.join(", ")||"\u2014"} vs ${t.genres.join(", ")||"\u2014"}`,`Language: ${e.language||"\u2014"} vs ${t.language||"\u2014"}`,"",...n,l.length>0?`Shared genres: ${l.join(", ")}`:""].filter(Boolean).join(`
`);navigator.clipboard.writeText(m).then(()=>this.notifications.show("Comparison copied to clipboard","success"),()=>this.notifications.show("Failed to copy","error"))}randomCompare(){let e=this.catalog.movies().filter(l=>l.posterUrl&&l.voteAverage>=6);if(e.length<2)return;let t=Math.floor(Math.random()*e.length),n=Math.floor(Math.random()*(e.length-1));n>=t&&n++,this.selectA(e[t]),this.selectB(e[n])}searchFilms(e){if(e.length<2)return[];let t=e.toLowerCase();return this.catalog.movies().filter(n=>n.title.toLowerCase().includes(t)).slice(0,8)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=z({type:i,selectors:[["app-compare"]],decls:29,vars:8,consts:[[1,"compare","container"],[1,"compare__subtitle"],[1,"compare__pickers"],[1,"compare__picker"],["for","film-a",1,"compare__picker-label"],["id","film-a","type","search","placeholder","Search for a film...","autocomplete","off",1,"compare__search",3,"input","focus","blur","value"],[1,"compare__dropdown"],[1,"compare__selected"],[1,"compare__quick-picks"],[1,"compare__vs"],["title","Swap films","aria-label","Swap films",1,"compare__swap",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","17 1 21 5 17 9"],["d","M3 11V9a4 4 0 0 1 4-4h14"],["points","7 23 3 19 7 15"],["d","M21 13v2a4 4 0 0 1-4 4H3"],["for","film-b",1,"compare__picker-label"],["id","film-b","type","search","placeholder","Search for a film...","autocomplete","off",1,"compare__search",3,"input","focus","blur","value"],["role","alert",1,"compare__same-warning"],[1,"compare__table"],[3,"mousedown"],["aria-label","Clear film 1",1,"compare__clear",3,"click"],[1,"compare__quick-btn"],[1,"compare__quick-btn",3,"click"],["aria-label","Clear film 2",1,"compare__clear",3,"click"],[1,"compare__row","compare__row--header"],[1,"compare__cell","compare__cell--label"],[1,"compare__cell","compare__cell--a"],[1,"compare__poster",3,"src","alt"],[1,"compare__film-link",3,"routerLink"],[1,"compare__cell","compare__cell--b"],[1,"compare__row"],[1,"compare__cell"],[1,"compare__year-gap"],[1,"compare__rating-bar"],[1,"compare__cell","compare__cell--links"],[1,"compare__similarity"],[1,"compare__double-feature-note"],[1,"compare__combined-avg"],[1,"compare__shared"],[1,"compare__verdict"],[1,"compare__actions"],[1,"compare__action-btn",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[1,"compare__rating-fill","compare__rating-fill--a"],[1,"compare__rating-fill","compare__rating-fill--b"],[3,"routerLink"],[1,"compare__similarity-pct"],[1,"compare__similarity-label"],[1,"compare__overlap"],[1,"compare__note"],[1,"compare__shared-label"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"h1"),c(2,"Compare Films"),a(),r(3,"p",1),c(4,"Select two films to compare side by side"),a(),r(5,"div",2)(6,"div",3)(7,"label",4),c(8,"Film 1"),a(),r(9,"input",5),f("input",function(m){return n.onSearchA(m)})("focus",function(){return n.showDropA.set(!0)})("blur",function(){return n.closeDropA()}),a(),p(10,W,3,0,"ul",6),p(11,J,5,2,"div",7)(12,Q,3,0,"div",8),a(),r(13,"div",9)(14,"button",10),f("click",function(){return n.swap()}),P(),r(15,"svg",11),A(16,"polyline",12)(17,"path",13)(18,"polyline",14)(19,"path",15),a()()(),O(),r(20,"div",3)(21,"label",16),c(22,"Film 2"),a(),r(23,"input",17),f("input",function(m){return n.onSearchB(m)})("focus",function(){return n.showDropB.set(!0)})("blur",function(){return n.closeDropB()}),a(),p(24,Z,3,0,"ul",6),p(25,ee,5,2,"div",7)(26,ne,3,0,"div",8),a()(),p(27,ie,2,0,"div",18),p(28,Oe,87,37,"div",19),a()),t&2&&(o(9),h("value",n.queryA()),o(),_(n.showDropA()&&n.resultsA().length>0?10:-1),o(),_(n.filmA()?11:12),o(12),h("value",n.queryB()),o(),_(n.showDropB()&&n.resultsB().length>0?24:-1),o(),_(n.filmB()?25:26),o(2),_(n.filmA()&&n.filmB()&&n.filmA().id===n.filmB().id?27:-1),o(),_(n.filmA()&&n.filmB()&&n.filmA().id!==n.filmB().id?28:-1))},dependencies:[q],styles:[".compare[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.compare__subtitle[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-xl)}.compare__pickers[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);align-items:flex-start;margin-bottom:var(--space-2xl)}.compare__picker[_ngcontent-%COMP%]{flex:1;position:relative}.compare__picker-label[_ngcontent-%COMP%]{display:block;font-size:.85rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-tertiary);font-weight:600;margin-bottom:var(--space-sm)}.compare__search[_ngcontent-%COMP%]{width:100%;padding:var(--space-md);background-color:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border);border-radius:var(--radius-lg);font-size:1rem}.compare__search[_ngcontent-%COMP%]:focus{border-color:var(--accent-gold)}.compare__dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;list-style:none;padding:var(--space-xs) 0;margin:4px 0 0;background-color:var(--bg-surface);border:1px solid var(--border-bright);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);z-index:20;max-height:240px;overflow-y:auto}.compare__dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);cursor:pointer;font-size:.9rem;color:var(--text-primary)}.compare__dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--bg-hover)}.compare__selected[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:var(--space-sm);padding:var(--space-sm) var(--space-md);background-color:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius);color:var(--accent-gold);font-weight:600;font-size:.9rem}.compare__clear[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-gold);font-size:1.2rem;cursor:pointer;padding:0 4px;min-height:auto;min-width:auto;line-height:1}.compare__vs[_ngcontent-%COMP%]{padding-top:38px;font-family:var(--font-heading);font-size:1.2rem;color:var(--text-tertiary);font-weight:700;flex-shrink:0;display:flex;flex-direction:column;align-items:center;gap:var(--space-sm)}.compare__swap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;min-width:36px;min-height:36px;padding:0;border-radius:50%;background:var(--bg-surface);border:1px solid var(--border);color:var(--text-tertiary);cursor:pointer;transition:all .2s}.compare__swap[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold);background:var(--accent-gold-dim)}.compare__table[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden}.compare__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr 1fr;border-bottom:1px solid var(--border)}.compare__row[_ngcontent-%COMP%]:last-child{border-bottom:none}.compare__row--header[_ngcontent-%COMP%]{background-color:var(--bg-raised)}.compare__cell[_ngcontent-%COMP%]{padding:var(--space-md);font-size:.95rem;color:var(--text-primary)}.compare__cell--label[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.8rem;text-transform:uppercase;letter-spacing:.04em;font-weight:600;display:flex;align-items:center}.compare__cell--winner[_ngcontent-%COMP%]{color:var(--accent-gold);font-weight:700}.compare__cell--a[_ngcontent-%COMP%], .compare__cell--b[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-sm);padding:var(--space-lg) var(--space-md)}.compare__poster[_ngcontent-%COMP%]{width:80px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius)}.compare__film-link[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;text-align:center}.compare__quick-picks[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-xs);margin-top:var(--space-sm)}.compare__quick-btn[_ngcontent-%COMP%]{padding:4px 10px;font-size:.75rem;border-radius:12px;background:var(--bg-raised);border:1px solid var(--border);color:var(--text-tertiary);cursor:pointer;transition:all .2s;white-space:nowrap}.compare__quick-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold);background:var(--accent-gold-dim)}.compare__rating-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:var(--bg-raised);border-radius:3px;overflow:hidden;margin-top:4px}.compare__rating-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:width .4s ease}.compare__rating-fill--a[_ngcontent-%COMP%], .compare__rating-fill--b[_ngcontent-%COMP%]{background:var(--accent-gold)}.compare__shared[_ngcontent-%COMP%]{padding:var(--space-md);font-size:.9rem;color:var(--text-secondary);border-top:1px solid var(--border)}.compare__shared-label[_ngcontent-%COMP%]{color:var(--text-tertiary);font-weight:600;margin-right:var(--space-sm)}.compare__cell--links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;transition:color .2s}.compare__cell--links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.compare__similarity[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-md);border-top:1px solid var(--border)}.compare__similarity-pct[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.8rem;font-weight:700;color:var(--accent-gold)}.compare__similarity-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.05em;font-weight:600}.compare__combined-avg[_ngcontent-%COMP%]{text-align:center;padding:var(--space-sm) var(--space-md);font-size:.85rem;font-weight:600;color:var(--text-secondary);border-top:1px solid var(--border)}.compare__note[_ngcontent-%COMP%]{color:var(--accent-gold);font-weight:600;font-size:.9rem}.compare__double-feature-note[_ngcontent-%COMP%]{text-align:center;font-size:.85rem;font-weight:600;color:var(--accent-gold);padding:var(--space-xs) 0;margin:0}.compare__actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-md);border-top:1px solid var(--border)}.compare__action-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--radius-lg);color:var(--text-secondary);font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s}.compare__action-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.compare__same-warning[_ngcontent-%COMP%]{text-align:center;padding:var(--space-lg);margin-bottom:var(--space-lg);background:var(--bg-surface);border:1px solid var(--accent-gold);border-radius:var(--radius-lg);color:var(--accent-gold);font-weight:600;font-size:.9rem}.compare__year-gap[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;color:var(--text-tertiary);padding:2px 0;border-bottom:1px solid var(--border)}.compare__verdict[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);font-size:.95rem;font-style:italic;color:var(--text-secondary);border-top:1px solid var(--border);text-align:center}@media(max-width:768px){.compare__pickers[_ngcontent-%COMP%]{flex-direction:column}.compare__vs[_ngcontent-%COMP%]{padding-top:0;text-align:center}.compare__row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 1fr}}@media(max-width:480px){.compare__row[_ngcontent-%COMP%]{grid-template-columns:1fr}.compare__cell--label[_ngcontent-%COMP%]{border-bottom:none;padding-bottom:0;font-size:.75rem}.compare__row--header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.compare__poster[_ngcontent-%COMP%]{width:120px}.compare__cell[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.9rem}}"],changeDetection:0})};export{Y as CompareComponent};
