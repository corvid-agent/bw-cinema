import{a as U}from"./chunk-7G6M72YL.js";import{$ as m,A as F,F as T,Ha as k,K as L,Ka as _,O as o,R as j,_ as d,ba as P,ca as y,da as S,db as Y,ea as b,fa as r,ga as a,ha as B,la as D,lb as R,na as x,pa as u,ta as z,ua as q,v as N,wa as l,x as A,xa as v,y as w,ya as g,z as $,za as O}from"./chunk-TOYJLBVG.js";var H=n=>["/movie",n],J=n=>["/director",n],K=n=>["/genre",n],I=(n,e)=>e.id;function Q(n,e){if(n&1){let t=D();r(0,"li",19),x("mousedown",function(){let c=A(t).$implicit,p=u(2);return w(p.selectA(c))}),l(1),a()}if(n&2){let t=e.$implicit;o(),O("",t.title," (",t.year,")")}}function X(n,e){if(n&1&&(r(0,"ul",6),y(1,Q,2,2,"li",null,I),a()),n&2){let t=u();o(),S(t.resultsA())}}function Z(n,e){if(n&1){let t=D();r(0,"div",7)(1,"span"),l(2),a(),r(3,"button",20),x("click",function(){A(t);let c=u();return c.filmA.set(null),w(c.queryA.set(""))}),l(4,"\xD7"),a()()}if(n&2){let t=u();o(2),O("",t.filmA().title," (",t.filmA().year,")")}}function ee(n,e){if(n&1){let t=D();r(0,"button",22),x("click",function(){let c=A(t).$implicit,p=u(2);return w(p.selectA(c))}),l(1),a()}if(n&2){let t=e.$implicit;o(),v(t.title)}}function te(n,e){if(n&1&&(r(0,"div",8),y(1,ee,2,1,"button",21,I),a()),n&2){let t=u();o(),S(t.quickPicks().slice(0,4))}}function ne(n,e){if(n&1){let t=D();r(0,"li",19),x("mousedown",function(){let c=A(t).$implicit,p=u(2);return w(p.selectB(c))}),l(1),a()}if(n&2){let t=e.$implicit;o(),O("",t.title," (",t.year,")")}}function ie(n,e){if(n&1&&(r(0,"ul",6),y(1,ne,2,2,"li",null,I),a()),n&2){let t=u();o(),S(t.resultsB())}}function oe(n,e){if(n&1){let t=D();r(0,"div",7)(1,"span"),l(2),a(),r(3,"button",23),x("click",function(){A(t);let c=u();return c.filmB.set(null),w(c.queryB.set(""))}),l(4,"\xD7"),a()()}if(n&2){let t=u();o(2),O("",t.filmB().title," (",t.filmB().year,")")}}function ae(n,e){if(n&1){let t=D();r(0,"button",22),x("click",function(){let c=A(t).$implicit,p=u(2);return w(p.selectB(c))}),l(1),a()}if(n&2){let t=e.$implicit;o(),v(t.title)}}function re(n,e){if(n&1&&(r(0,"div",8),y(1,ae,2,1,"button",21,I),a()),n&2){let t=u();o(),S(t.quickPicks().slice(4,8))}}function le(n,e){if(n&1&&B(0,"img",27),n&2){let t=u(2);b("src",t.filmA().posterUrl,L)("alt",t.filmA().title)}}function ce(n,e){if(n&1&&B(0,"img",27),n&2){let t=u(2);b("src",t.filmB().posterUrl,L)("alt",t.filmB().title)}}function de(n,e){n&1&&(r(0,"div",32),l(1),a()),n&2&&(o(),v(e))}function me(n,e){if(n&1&&(r(0,"div",33),B(1,"div",46),a()),n&2){let t=u(2);o(),z("width",t.filmA().voteAverage*10,"%")}}function se(n,e){if(n&1&&(r(0,"div",33),B(1,"div",47),a()),n&2){let t=u(2);o(),z("width",t.filmB().voteAverage*10,"%")}}function pe(n,e){n&1&&(r(0,"span"),l(1,", "),a())}function _e(n,e){if(n&1&&(r(0,"a",48),l(1),a(),d(2,pe,2,0,"span")),n&2){let t=e.$implicit,i=e.$index,c=e.$count;b("routerLink",k(3,J,t)),o(),v(t),o(),m(i!==c-1?2:-1)}}function ue(n,e){n&1&&(r(0,"span"),l(1,"\u2014"),a())}function ge(n,e){n&1&&(r(0,"span"),l(1,", "),a())}function fe(n,e){if(n&1&&(r(0,"a",48),l(1),a(),d(2,ge,2,0,"span")),n&2){let t=e.$implicit,i=e.$index,c=e.$count;b("routerLink",k(3,J,t)),o(),v(t),o(),m(i!==c-1?2:-1)}}function ve(n,e){n&1&&(r(0,"span"),l(1,"\u2014"),a())}function Ce(n,e){n&1&&(r(0,"span"),l(1,", "),a())}function he(n,e){if(n&1&&(r(0,"a",48),l(1),a(),d(2,Ce,2,0,"span")),n&2){let t=e.$implicit,i=e.$index,c=e.$count;b("routerLink",k(3,K,t)),o(),v(t),o(),m(i!==c-1?2:-1)}}function xe(n,e){n&1&&(r(0,"span"),l(1,"\u2014"),a())}function be(n,e){n&1&&(r(0,"span"),l(1,", "),a())}function ye(n,e){if(n&1&&(r(0,"a",48),l(1),a(),d(2,be,2,0,"span")),n&2){let t=e.$implicit,i=e.$index,c=e.$count;b("routerLink",k(3,K,t)),o(),v(t),o(),m(i!==c-1?2:-1)}}function Se(n,e){n&1&&(r(0,"span"),l(1,"\u2014"),a())}function Me(n,e){if(n&1&&(r(0,"div",35)(1,"span",49),l(2),a(),r(3,"span",50),l(4,"Similarity"),a()()),n&2){let t=u(2);o(2),g("",t.similarityScore(),"%")}}function Ae(n,e){n&1&&(r(0,"p",36),l(1),a()),n&2&&(o(),v(e))}function we(n,e){n&1&&(r(0,"p",36),l(1),a()),n&2&&(o(),v(e))}function Be(n,e){n&1&&(r(0,"p",36),l(1),a()),n&2&&(o(),g("Midpoint: ",e))}function Ee(n,e){n&1&&(r(0,"p",36),l(1),a()),n&2&&(o(),g("Spanning ",e))}function De(n,e){n&1&&(r(0,"p",36),l(1),a()),n&2&&(o(),g("",e," genres between them"))}function Te(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e,"pt gap"))}function ke(n,e){if(n&1&&(r(0,"span",51),l(1),a()),n&2){let t=u(3);o(),g(" \xB7 ",t.genreOverlapPct(),"% genre overlap")}}function Pe(n,e){if(n&1&&(r(0,"span",51),l(1),a()),n&2){let t=u(3);o(),g(" \xB7 ",t.combinedGenreCount()," genres combined")}}function Oe(n,e){if(n&1&&(r(0,"span",51),l(1),a()),n&2){let t=u(3);o(),g(" \xB7 ",t.combinedDirectorCount()," directors")}}function $e(n,e){if(n&1&&(r(0,"span",51),l(1),a()),n&2){let t=u(3);o(),g(" \xB7 ",t.combinedLanguageCount()," languages")}}function Ie(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 avg ",e," years old"))}function Ne(n,e){n&1&&(r(0,"span",51),l(1," \xB7 both free to watch"),a())}function Fe(n,e){n&1&&(r(0,"span",51),l(1," \xB7 both non-English"),a())}function Le(n,e){n&1&&(r(0,"span",51),l(1," \xB7 both silent-era"),a())}function ze(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e," chars combined"))}function qe(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 both in ",e))}function Ve(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e," genre difference"))}function Ge(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e," director difference"))}function je(n,e){n&1&&(r(0,"span",51),l(1," \xB7 both rated 8+"),a())}function Ye(n,e){n&1&&(r(0,"span",51),l(1," \xB7 both pre-1940"),a())}function Re(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e," avg year diff from catalog"))}function Ue(n,e){n&1&&(r(0,"span",51),l(1," \xB7 same decade"),a())}function He(n,e){n&1&&(r(0,"span",51),l(1," \xB7 both co-directed"),a())}function We(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e," rating gap"))}function Je(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 genres: ",e))}function Ke(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 avg year ",e))}function Qe(n,e){n&1&&(r(0,"span",51),l(1),a()),n&2&&(o(),g(" \xB7 ",e," char title difference"))}function Xe(n,e){if(n&1&&(r(0,"div",37),l(1),d(2,Te,2,1,"span",51),d(3,ke,2,1,"span",51),d(4,Pe,2,1,"span",51),d(5,Oe,2,1,"span",51),d(6,$e,2,1,"span",51),d(7,Ie,2,1,"span",51),d(8,Ne,2,0,"span",51),d(9,Fe,2,0,"span",51),d(10,Le,2,0,"span",51),d(11,ze,2,1,"span",51),d(12,qe,2,1,"span",51),d(13,Ve,2,1,"span",51),d(14,Ge,2,1,"span",51),d(15,je,2,0,"span",51),d(16,Ye,2,0,"span",51),d(17,Re,2,1,"span",51),d(18,Ue,2,0,"span",51),d(19,He,2,0,"span",51),d(20,We,2,1,"span",51),d(21,Je,2,1,"span",51),d(22,Ke,2,1,"span",51),d(23,Qe,2,1,"span",51),a()),n&2){let t,i,c,p,C,h,M,s,E,V,G,f=u(2);o(),g(" Combined Avg: ",e,"/10 "),o(),m((t=f.ratingDifference())?2:-1,t),o(),m(f.genreOverlapPct()>0?3:-1),o(),m(f.combinedGenreCount()>0?4:-1),o(),m(f.combinedDirectorCount()>1?5:-1),o(),m(f.combinedLanguageCount()>1?6:-1),o(),m((i=f.avgFilmAge())?7:-1,i),o(),m(f.bothStreamable()?8:-1),o(),m(f.bothNonEnglish()?9:-1),o(),m(f.bothSilentEra()?10:-1),o(),m((c=f.combinedTitleLength())?11:-1,c),o(),m((p=f.sameLanguage())?12:-1,p),o(),m((C=f.genreCountDiff())?13:-1,C),o(),m((h=f.directorCountDiff())?14:-1,h),o(),m(f.bothHighlyRated()?15:-1),o(),m(f.bothPreWar()?16:-1),o(),m((M=f.avgYearDiff())?17:-1,M),o(),m(f.sameDecade()?18:-1),o(),m(f.bothCoDirected()?19:-1),o(),m((s=f.ratingGap())?20:-1,s),o(),m((E=f.combinedGenreList())?21:-1,E),o(),m((V=f.combinedAvgYear())?22:-1,V),o(),m((G=f.titleLengthDiff())?23:-1,G)}}function Ze(n,e){if(n&1&&(r(0,"div",52),l(1),a()),n&2){let t=e.$implicit;o(),v(t)}}function et(n,e){if(n&1&&(r(0,"div")(1,"span",53),l(2,"Shared genres:"),a(),l(3),a()),n&2){let t=u(3);o(3),g(" ",t.sharedGenres().join(", ")," ")}}function tt(n,e){if(n&1&&(r(0,"div")(1,"span",53),l(2,"Shared directors:"),a(),l(3),a()),n&2){let t=u(3);o(3),g(" ",t.sharedDirectors().join(", ")," ")}}function nt(n,e){if(n&1&&(r(0,"div",38),y(1,Ze,2,1,"div",52,P),d(3,et,4,1,"div"),d(4,tt,4,1,"div"),a()),n&2){let t=u(2);o(),S(t.comparisonNotes()),o(2),m(t.sharedGenres().length>0?3:-1),o(),m(t.sharedDirectors().length>0?4:-1)}}function it(n,e){if(n&1&&(r(0,"div",39),l(1),a()),n&2){let t=u(2);o(),v(t.verdict())}}function ot(n,e){if(n&1){let t=D();r(0,"div",18)(1,"div",24),B(2,"div",25),r(3,"div",26),d(4,le,1,2,"img",27),r(5,"a",28),l(6),a()(),r(7,"div",29),d(8,ce,1,2,"img",27),r(9,"a",28),l(10),a()()(),r(11,"div",30)(12,"div",25),l(13,"Year"),a(),r(14,"div",31),l(15),a(),r(16,"div",31),l(17),a()(),d(18,de,2,1,"div",32),r(19,"div",30)(20,"div",25),l(21,"Rating"),a(),r(22,"div",31),l(23),d(24,me,2,2,"div",33),a(),r(25,"div",31),l(26),d(27,se,2,2,"div",33),a()(),r(28,"div",30)(29,"div",25),l(30,"Directors"),a(),r(31,"div",34),y(32,_e,3,5,null,null,P),d(34,ue,2,0,"span"),a(),r(35,"div",34),y(36,fe,3,5,null,null,P),d(38,ve,2,0,"span"),a()(),r(39,"div",30)(40,"div",25),l(41,"Genres"),a(),r(42,"div",34),y(43,he,3,5,null,null,P),d(45,xe,2,0,"span"),a(),r(46,"div",34),y(47,ye,3,5,null,null,P),d(49,Se,2,0,"span"),a()(),r(50,"div",30)(51,"div",25),l(52,"Language"),a(),r(53,"div",31),l(54),a(),r(55,"div",31),l(56),a()(),r(57,"div",30)(58,"div",25),l(59,"Streamable"),a(),r(60,"div",31),l(61),a(),r(62,"div",31),l(63),a()(),r(64,"div",30)(65,"div",25),l(66,"Source"),a(),r(67,"div",31),l(68),a(),r(69,"div",31),l(70),a()(),d(71,Me,5,1,"div",35),d(72,Ae,2,1,"p",36),d(73,we,2,1,"p",36),d(74,Be,2,1,"p",36),d(75,Ee,2,1,"p",36),d(76,De,2,1,"p",36),d(77,Xe,24,23,"div",37),d(78,nt,5,2,"div",38),d(79,it,2,1,"div",39),r(80,"div",40)(81,"button",41),x("click",function(){A(t);let c=u();return w(c.copyComparison())}),$(),r(82,"svg",42),B(83,"rect",43)(84,"path",44),a(),l(85," Copy Comparison "),a(),F(),r(86,"button",41),x("click",function(){A(t);let c=u();return w(c.randomCompare())}),$(),r(87,"svg",42),B(88,"path",45),a(),l(89," Random Pair "),a()()()}if(n&2){let t,i,c,p,C,h,M,s=u();o(4),m(s.filmA().posterUrl?4:-1),o(),b("routerLink",k(36,H,s.filmA().id)),o(),v(s.filmA().title),o(2),m(s.filmB().posterUrl?8:-1),o(),b("routerLink",k(38,H,s.filmB().id)),o(),v(s.filmB().title),o(5),v(s.filmA().year),o(2),v(s.filmB().year),o(),m((t=s.yearGap())?18:-1,t),o(4),q("compare__cell--winner",s.filmA().voteAverage>s.filmB().voteAverage),o(),g(" ",s.filmA().voteAverage||"\u2014"," "),o(),m(s.filmA().voteAverage>0?24:-1),o(),q("compare__cell--winner",s.filmB().voteAverage>s.filmA().voteAverage),o(),g(" ",s.filmB().voteAverage||"\u2014"," "),o(),m(s.filmB().voteAverage>0?27:-1),o(5),S(s.filmA().directors),o(2),m(s.filmA().directors.length===0?34:-1),o(2),S(s.filmB().directors),o(2),m(s.filmB().directors.length===0?38:-1),o(5),S(s.filmA().genres),o(2),m(s.filmA().genres.length===0?45:-1),o(2),S(s.filmB().genres),o(2),m(s.filmB().genres.length===0?49:-1),o(5),v(s.filmA().language||"\u2014"),o(2),v(s.filmB().language||"\u2014"),o(5),v(s.filmA().isStreamable?"Yes":"No"),o(2),v(s.filmB().isStreamable?"Yes":"No"),o(5),v(s.getStreamSource(s.filmA())),o(2),v(s.getStreamSource(s.filmB())),o(),m(s.similarityScore()>0?71:-1),o(),m((i=s.doubleFeatureNote())?72:-1,i),o(),m((c=s.eraLabel())?73:-1,c),o(),m((p=s.midpointYear())?74:-1,p),o(),m((C=s.yearSpan())?75:-1,C),o(),m((h=s.combinedGenreCount())?76:-1,h),o(),m((M=s.combinedAvgRating())?77:-1,M),o(),m(s.comparisonNotes().length>0||s.sharedGenres().length>0||s.sharedDirectors().length>0?78:-1),o(),m(s.verdict()?79:-1)}}var W=class n{catalog=N(R);notifications=N(U);queryA=T("");queryB=T("");filmA=T(null);filmB=T(null);showDropA=T(!1);showDropB=T(!1);resultsA=_(()=>this.searchFilms(this.queryA()));resultsB=_(()=>this.searchFilms(this.queryB()));quickPicks=_(()=>this.catalog.movies().filter(e=>e.voteAverage>=7.5&&e.posterUrl&&e.isStreamable).sort((e,t)=>t.voteAverage-e.voteAverage).slice(0,8));sharedGenres=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return[];let i=new Set(t.genres);return e.genres.filter(c=>i.has(c))});comparisonNotes=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return[];let i=[],c=Math.abs(e.year-t.year);c===0?i.push("Released the same year"):i.push(`${c} year${c>1?"s":""} apart`);let p=Math.floor(e.year/10)*10,C=Math.floor(t.year/10)*10;p===C&&i.push(`Both from the ${p}s`),e.isStreamable&&t.isStreamable&&i.push("Both free to watch");let h=Math.abs(e.voteAverage-t.voteAverage);return e.voteAverage>0&&t.voteAverage>0&&h<.3&&i.push("Nearly identical ratings"),e.language&&t.language&&(e.language===t.language?e.language!=="en"&&i.push(`Both in ${e.language.toUpperCase()}`):i.push(`${e.language.toUpperCase()} vs ${t.language.toUpperCase()}`)),i});yearGap=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=Math.abs(e.year-t.year);return i===0?"Same year":`${i} year${i!==1?"s":""} apart`});similarityScore=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return 0;let i=0,c=0;c+=30;let p=new Set(e.genres),C=t.genres.filter(E=>p.has(E)).length,h=new Set([...e.genres,...t.genres]).size;if(h>0&&(i+=Math.round(C/h*30)),c+=15,Math.floor(e.year/10)===Math.floor(t.year/10)?i+=15:Math.abs(e.year-t.year)<=15&&(i+=7),c+=15,e.language&&t.language&&e.language===t.language&&(i+=15),c+=20,e.voteAverage>0&&t.voteAverage>0){let E=Math.abs(e.voteAverage-t.voteAverage);i+=Math.round(Math.max(0,20-E*4))}c+=20;let M=new Set(e.directors);return t.directors.filter(E=>M.has(E)).length>0&&(i+=20),Math.round(i/c*100)});sharedDirectors=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return[];let i=new Set(t.directors);return e.directors.filter(c=>i.has(c))});verdict=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return"";if(e.voteAverage>0&&t.voteAverage>0){let i=e.voteAverage-t.voteAverage;if(Math.abs(i)<.3)return`${e.title} and ${t.title} are rated nearly identically \u2014 a true toss-up.`;let c=i>0?e:t,p=i>0?t:e;return Math.abs(i)>=2?`${c.title} has a commanding lead over ${p.title} with a ${Math.abs(i).toFixed(1)}-point edge.`:`${c.title} edges out ${p.title} by ${Math.abs(i).toFixed(1)} points.`}if(e.year!==t.year){let i=e.year<t.year?e:t,c=e.year<t.year?t:e;return`${i.title} predates ${c.title} by ${c.year-i.year} years.`}return`${e.title} and ${t.title} \u2014 two films from ${e.year}.`});genreOverlapPct=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.genres.length===0||t.genres.length===0)return 0;let i=new Set(e.genres),c=t.genres.filter(C=>i.has(C)).length,p=new Set([...e.genres,...t.genres]).size;return p>0?Math.round(c/p*100):0});ratingDifference=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.voteAverage===0||t.voteAverage===0)return null;let i=Math.abs(e.voteAverage-t.voteAverage);return i<.1?null:i.toFixed(1)});doubleFeatureNote=_(()=>{let e=this.similarityScore();return e>=70?"Perfect double feature!":e>=50?"Great double feature pairing":null});eraLabel=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=Math.floor(e.year/10)*10,c=Math.floor(t.year/10)*10,p=Math.abs(i-c);return p===0?null:p>=30?"A cross-era pairing":null});combinedGenreCount=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?0:new Set([...e.genres,...t.genres]).size});combinedDirectorCount=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?0:new Set([...e.directors,...t.directors]).size});midpointYear=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t||Math.abs(e.year-t.year)<5?null:Math.round((e.year+t.year)/2)});yearSpan=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||Math.abs(e.year-t.year)<5)return null;let c=Math.min(e.year,t.year),p=Math.max(e.year,t.year);return`${c}\u2013${p}`});combinedLanguageCount=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return 0;let i=new Set;return e.language&&i.add(e.language),t.language&&i.add(t.language),i.size});avgFilmAge=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=new Date().getFullYear(),c=Math.round((i-e.year+(i-t.year))/2);return c>=30?c:null});combinedAvgRating=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t||e.voteAverage===0||t.voteAverage===0?null:((e.voteAverage+t.voteAverage)/2).toFixed(1)});bothStreamable=_(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.isStreamable&&t.isStreamable)});bothNonEnglish=_(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.language&&e.language!=="English"&&e.language!=="en"&&t.language&&t.language!=="English"&&t.language!=="en")});bothHighlyRated=_(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.voteAverage>=8&&t.voteAverage>=8)});sameLanguage=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t||!e.language||!t.language?null:e.language===t.language&&e.language!=="English"&&e.language!=="en"?e.language:null});combinedTitleLength=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=e.title.length+t.title.length;return i>=10?i:null});sameDecade=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?!1:Math.floor(e.year/10)===Math.floor(t.year/10)});ratingGap=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t||e.voteAverage===0||t.voteAverage===0)return null;let i=Math.abs(e.voteAverage-t.voteAverage);return i>=1?i.toFixed(1):null});combinedAvgYear=_(()=>{let e=this.filmA(),t=this.filmB();return!e||!t?null:Math.round((e.year+t.year)/2)});titleLengthDiff=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=Math.abs(e.title.length-t.title.length);return i>=5?i:null});bothSilentEra=_(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.year<1930&&t.year<1930)});combinedGenreList=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=new Set([...e.genres,...t.genres]);return i.size>=3?[...i].slice(0,4).join(", "):null});bothCoDirected=_(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.directors.length>1&&t.directors.length>1)});bothPreWar=_(()=>{let e=this.filmA(),t=this.filmB();return!!(e&&t&&e.year<1940&&t.year<1940)});avgYearDiff=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=this.catalog.movies();if(i.length<10)return null;let c=Math.round(i.reduce((h,M)=>h+M.year,0)/i.length),p=Math.round((e.year+t.year)/2),C=Math.abs(p-c);return C>=5?C:null});directorCountDiff=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=Math.abs(e.directors.length-t.directors.length);return i>=1?i:null});genreCountDiff=_(()=>{let e=this.filmA(),t=this.filmB();if(!e||!t)return null;let i=Math.abs(e.genres.length-t.genres.length);return i>=2?i:null});ngOnInit(){this.catalog.load()}onSearchA(e){this.queryA.set(e.target.value),this.showDropA.set(!0)}onSearchB(e){this.queryB.set(e.target.value),this.showDropB.set(!0)}swap(){let e=this.filmA(),t=this.filmB(),i=this.queryA(),c=this.queryB();this.filmA.set(t),this.filmB.set(e),this.queryA.set(c),this.queryB.set(i)}getStreamSource(e){return e.internetArchiveId?"Internet Archive":e.youtubeId?"YouTube":e.imdbId?"IMDb (info only)":"Not available"}selectA(e){this.filmA.set(e),this.queryA.set(e.title),this.showDropA.set(!1)}selectB(e){this.filmB.set(e),this.queryB.set(e.title),this.showDropB.set(!1)}closeDropA(){setTimeout(()=>this.showDropA.set(!1),200)}closeDropB(){setTimeout(()=>this.showDropB.set(!1),200)}copyComparison(){let e=this.filmA(),t=this.filmB();if(!e||!t)return;let i=this.comparisonNotes(),c=this.sharedGenres(),p=[`${e.title} (${e.year}) vs ${t.title} (${t.year})`,"",`Rating: ${e.voteAverage||"\u2014"} vs ${t.voteAverage||"\u2014"}`,`Directors: ${e.directors.join(", ")||"\u2014"} vs ${t.directors.join(", ")||"\u2014"}`,`Genres: ${e.genres.join(", ")||"\u2014"} vs ${t.genres.join(", ")||"\u2014"}`,`Language: ${e.language||"\u2014"} vs ${t.language||"\u2014"}`,"",...i,c.length>0?`Shared genres: ${c.join(", ")}`:""].filter(Boolean).join(`
`);navigator.clipboard.writeText(p).then(()=>this.notifications.show("Comparison copied to clipboard","success"),()=>this.notifications.show("Failed to copy","error"))}randomCompare(){let e=this.catalog.movies().filter(c=>c.posterUrl&&c.voteAverage>=6);if(e.length<2)return;let t=Math.floor(Math.random()*e.length),i=Math.floor(Math.random()*(e.length-1));i>=t&&i++,this.selectA(e[t]),this.selectB(e[i])}searchFilms(e){if(e.length<2)return[];let t=e.toLowerCase();return this.catalog.movies().filter(i=>i.title.toLowerCase().includes(t)).slice(0,8)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=j({type:n,selectors:[["app-compare"]],decls:28,vars:7,consts:[[1,"compare","container"],[1,"compare__subtitle"],[1,"compare__pickers"],[1,"compare__picker"],["for","film-a",1,"compare__picker-label"],["id","film-a","type","search","placeholder","Search for a film...","autocomplete","off",1,"compare__search",3,"input","focus","blur","value"],[1,"compare__dropdown"],[1,"compare__selected"],[1,"compare__quick-picks"],[1,"compare__vs"],["title","Swap films","aria-label","Swap films",1,"compare__swap",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","17 1 21 5 17 9"],["d","M3 11V9a4 4 0 0 1 4-4h14"],["points","7 23 3 19 7 15"],["d","M21 13v2a4 4 0 0 1-4 4H3"],["for","film-b",1,"compare__picker-label"],["id","film-b","type","search","placeholder","Search for a film...","autocomplete","off",1,"compare__search",3,"input","focus","blur","value"],[1,"compare__table"],[3,"mousedown"],["aria-label","Clear film 1",1,"compare__clear",3,"click"],[1,"compare__quick-btn"],[1,"compare__quick-btn",3,"click"],["aria-label","Clear film 2",1,"compare__clear",3,"click"],[1,"compare__row","compare__row--header"],[1,"compare__cell","compare__cell--label"],[1,"compare__cell","compare__cell--a"],[1,"compare__poster",3,"src","alt"],[1,"compare__film-link",3,"routerLink"],[1,"compare__cell","compare__cell--b"],[1,"compare__row"],[1,"compare__cell"],[1,"compare__year-gap"],[1,"compare__rating-bar"],[1,"compare__cell","compare__cell--links"],[1,"compare__similarity"],[1,"compare__double-feature-note"],[1,"compare__combined-avg"],[1,"compare__shared"],[1,"compare__verdict"],[1,"compare__actions"],[1,"compare__action-btn",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["d","M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"],[1,"compare__rating-fill","compare__rating-fill--a"],[1,"compare__rating-fill","compare__rating-fill--b"],[3,"routerLink"],[1,"compare__similarity-pct"],[1,"compare__similarity-label"],[1,"compare__overlap"],[1,"compare__note"],[1,"compare__shared-label"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"h1"),l(2,"Compare Films"),a(),r(3,"p",1),l(4,"Select two films to compare side by side"),a(),r(5,"div",2)(6,"div",3)(7,"label",4),l(8,"Film 1"),a(),r(9,"input",5),x("input",function(p){return i.onSearchA(p)})("focus",function(){return i.showDropA.set(!0)})("blur",function(){return i.closeDropA()}),a(),d(10,X,3,0,"ul",6),d(11,Z,5,2,"div",7)(12,te,3,0,"div",8),a(),r(13,"div",9)(14,"button",10),x("click",function(){return i.swap()}),$(),r(15,"svg",11),B(16,"polyline",12)(17,"path",13)(18,"polyline",14)(19,"path",15),a()()(),F(),r(20,"div",3)(21,"label",16),l(22,"Film 2"),a(),r(23,"input",17),x("input",function(p){return i.onSearchB(p)})("focus",function(){return i.showDropB.set(!0)})("blur",function(){return i.closeDropB()}),a(),d(24,ie,3,0,"ul",6),d(25,oe,5,2,"div",7)(26,re,3,0,"div",8),a()(),d(27,ot,90,40,"div",18),a()),t&2&&(o(9),b("value",i.queryA()),o(),m(i.showDropA()&&i.resultsA().length>0?10:-1),o(),m(i.filmA()?11:12),o(12),b("value",i.queryB()),o(),m(i.showDropB()&&i.resultsB().length>0?24:-1),o(),m(i.filmB()?25:26),o(2),m(i.filmA()&&i.filmB()?27:-1))},dependencies:[Y],styles:[".compare[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.compare__subtitle[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-xl)}.compare__pickers[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);align-items:flex-start;margin-bottom:var(--space-2xl)}.compare__picker[_ngcontent-%COMP%]{flex:1;position:relative}.compare__picker-label[_ngcontent-%COMP%]{display:block;font-size:.85rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-tertiary);font-weight:600;margin-bottom:var(--space-sm)}.compare__search[_ngcontent-%COMP%]{width:100%;padding:var(--space-md);background-color:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border);border-radius:var(--radius-lg);font-size:1rem}.compare__search[_ngcontent-%COMP%]:focus{border-color:var(--accent-gold)}.compare__dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;list-style:none;padding:var(--space-xs) 0;margin:4px 0 0;background-color:var(--bg-surface);border:1px solid var(--border-bright);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);z-index:20;max-height:240px;overflow-y:auto}.compare__dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);cursor:pointer;font-size:.9rem;color:var(--text-primary)}.compare__dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--bg-hover)}.compare__selected[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:var(--space-sm);padding:var(--space-sm) var(--space-md);background-color:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius);color:var(--accent-gold);font-weight:600;font-size:.9rem}.compare__clear[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-gold);font-size:1.2rem;cursor:pointer;padding:0 4px;min-height:auto;min-width:auto;line-height:1}.compare__vs[_ngcontent-%COMP%]{padding-top:38px;font-family:var(--font-heading);font-size:1.2rem;color:var(--text-tertiary);font-weight:700;flex-shrink:0;display:flex;flex-direction:column;align-items:center;gap:var(--space-sm)}.compare__swap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;min-width:36px;min-height:36px;padding:0;border-radius:50%;background:var(--bg-surface);border:1px solid var(--border);color:var(--text-tertiary);cursor:pointer;transition:all .2s}.compare__swap[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold);background:var(--accent-gold-dim)}.compare__table[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden}.compare__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr 1fr;border-bottom:1px solid var(--border)}.compare__row[_ngcontent-%COMP%]:last-child{border-bottom:none}.compare__row--header[_ngcontent-%COMP%]{background-color:var(--bg-raised)}.compare__cell[_ngcontent-%COMP%]{padding:var(--space-md);font-size:.95rem;color:var(--text-primary)}.compare__cell--label[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.8rem;text-transform:uppercase;letter-spacing:.04em;font-weight:600;display:flex;align-items:center}.compare__cell--winner[_ngcontent-%COMP%]{color:var(--accent-gold);font-weight:700}.compare__cell--a[_ngcontent-%COMP%], .compare__cell--b[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-sm);padding:var(--space-lg) var(--space-md)}.compare__poster[_ngcontent-%COMP%]{width:80px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius)}.compare__film-link[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;text-align:center}.compare__quick-picks[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-xs);margin-top:var(--space-sm)}.compare__quick-btn[_ngcontent-%COMP%]{padding:4px 10px;font-size:.75rem;border-radius:12px;background:var(--bg-raised);border:1px solid var(--border);color:var(--text-tertiary);cursor:pointer;transition:all .2s;white-space:nowrap}.compare__quick-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold);background:var(--accent-gold-dim)}.compare__rating-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:var(--bg-raised);border-radius:3px;overflow:hidden;margin-top:4px}.compare__rating-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:width .4s ease}.compare__rating-fill--a[_ngcontent-%COMP%], .compare__rating-fill--b[_ngcontent-%COMP%]{background:var(--accent-gold)}.compare__shared[_ngcontent-%COMP%]{padding:var(--space-md);font-size:.9rem;color:var(--text-secondary);border-top:1px solid var(--border)}.compare__shared-label[_ngcontent-%COMP%]{color:var(--text-tertiary);font-weight:600;margin-right:var(--space-sm)}.compare__cell--links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;transition:color .2s}.compare__cell--links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.compare__similarity[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-md);border-top:1px solid var(--border)}.compare__similarity-pct[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.8rem;font-weight:700;color:var(--accent-gold)}.compare__similarity-label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);text-transform:uppercase;letter-spacing:.05em;font-weight:600}.compare__combined-avg[_ngcontent-%COMP%]{text-align:center;padding:var(--space-sm) var(--space-md);font-size:.85rem;font-weight:600;color:var(--text-secondary);border-top:1px solid var(--border)}.compare__note[_ngcontent-%COMP%]{color:var(--accent-gold);font-weight:600;font-size:.9rem}.compare__double-feature-note[_ngcontent-%COMP%]{text-align:center;font-size:.85rem;font-weight:600;color:var(--accent-gold);padding:var(--space-xs) 0;margin:0}.compare__actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-md);border-top:1px solid var(--border)}.compare__action-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--radius-lg);color:var(--text-secondary);font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s}.compare__action-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.compare__year-gap[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;color:var(--text-tertiary);padding:2px 0;border-bottom:1px solid var(--border)}.compare__verdict[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);font-size:.95rem;font-style:italic;color:var(--text-secondary);border-top:1px solid var(--border);text-align:center}@media(max-width:768px){.compare__pickers[_ngcontent-%COMP%]{flex-direction:column}.compare__vs[_ngcontent-%COMP%]{padding-top:0;text-align:center}.compare__row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 1fr}}@media(max-width:480px){.compare__row[_ngcontent-%COMP%]{grid-template-columns:1fr}.compare__cell--label[_ngcontent-%COMP%]{border-bottom:none;padding-bottom:0;font-size:.75rem}.compare__row--header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.compare__poster[_ngcontent-%COMP%]{width:120px}.compare__cell[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.9rem}}"],changeDetection:0})};export{W as CompareComponent};
