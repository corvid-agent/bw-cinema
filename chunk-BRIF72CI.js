import{a as It}from"./chunk-SATL3JCH.js";import{a as Pt,b as Ot}from"./chunk-TWPBZPC6.js";import{a as Et}from"./chunk-2THIRR2Y.js";import{a as Mt}from"./chunk-VYUST5ET.js";import{a as Tt}from"./chunk-JVUEOQ2T.js";import{a as St}from"./chunk-U6UKIARX.js";import{$ as C,$a as wt,A as rt,Aa as G,Ba as dt,Da as vt,Ea as ut,F as W,Fa as ht,Ga as xt,Ja as et,K as pt,Ma as u,O as l,R as Ct,Z as tt,_ as p,_a as ft,aa as gt,ba as ct,ca as A,cb as bt,da as R,ea as k,fa as i,fb as yt,ga as o,ha as I,la as $,na as D,pa as m,v as X,va as q,wa as Q,x as E,y as P,ya as c,z as at,za as v}from"./chunk-SA65F7OW.js";var kt=n=>["/movie",n],Ft=n=>["/director",n],Nt=n=>["/genre",n],At=n=>["/decade",n],st=(n,e)=>e.id,lt=(n,e)=>e.name,mt=(n,e)=>e.label,Rt=(n,e)=>e.date,Lt=(n,e)=>e.year,Vt=(n,e)=>e.movieId;function Yt(n,e){if(n&1&&I(0,"app-movie-grid",2),n&2){let t=m(2);k("movies",t.sharedMovies())}}function $t(n,e){n&1&&(i(0,"div",3)(1,"p",4),c(2,"No films found"),o(),i(3,"p",5),c(4,"The shared link may be invalid or the films are no longer in our catalog."),o(),i(5,"a",6),c(6,"Browse Films"),o()())}function zt(n,e){if(n&1&&(i(0,"h1"),c(1,"Shared Collection"),o(),i(2,"p",1),c(3),o(),p(4,Yt,1,1,"app-movie-grid",2)(5,$t,7,0,"div",3)),n&2){let t=m();l(3),dt("",t.sharedMovies().length," film",t.sharedMovies().length!==1?"s":""," in this shared collection"),l(),C(t.sharedMovies().length>0?4:5)}}function Wt(n,e){if(n&1){let t=$();i(0,"div",7)(1,"p"),c(2),o(),i(3,"button",8),D("click",function(){E(t);let r=m(2);return P(r.catalog.retry())}),c(4,"Try Again"),o()()}n&2&&(l(2),v(e))}function Gt(n,e){n&1&&I(0,"app-loading-spinner")}function Bt(n,e){if(n&1&&(i(0,"span",14),c(1),o()),n&2){let t=m(4);l(),v(t.watchlistMovies().length)}}function jt(n,e){if(n&1&&I(0,"span",15),n&2){let t=m(4);k("title",xt("",t.newThisWeek()," added this week"))}}function Ht(n,e){if(n&1&&(i(0,"span",14),c(1),o()),n&2){let t=m(4);l(),v(t.watchedMovies().length)}}function Ut(n,e){if(n&1&&(i(0,"span",14),c(1),o()),n&2){let t=m(4);l(),v(t.favoriteMovies().length)}}function qt(n,e){if(n&1&&(i(0,"span",14),c(1),o()),n&2){let t=m(4);l(),v(t.collectionService.playlists().length)}}function Qt(n,e){if(n&1&&(i(0,"option",25),c(1),o()),n&2){let t=e.$implicit;k("value",t),l(),v(t)}}function Kt(n,e){if(n&1&&(i(0,"option",25),c(1),o()),n&2){let t=e.$implicit;k("value",t),l(),G("",t,"s")}}function Jt(n,e){if(n&1){let t=$();i(0,"select",27),D("change",function(r){E(t);let d=m(5);return P(d.onRatingFilterChange(r))}),i(1,"option",28),c(2,"All Ratings"),o(),i(3,"option",29),c(4,"1+ Stars"),o(),i(5,"option",30),c(6,"2+ Stars"),o(),i(7,"option",31),c(8,"3+ Stars"),o(),i(9,"option",32),c(10,"4+ Stars"),o(),i(11,"option",33),c(12,"5 Stars"),o(),i(13,"option",34),c(14,"Unrated"),o()()}}function Zt(n,e){if(n&1){let t=$();i(0,"div",16)(1,"input",22),D("input",function(r){E(t);let d=m(4);return P(d.collectionQuery.set(r.target.value))}),o(),i(2,"select",23),D("change",function(r){E(t);let d=m(4);return P(d.genreFilter.set(r.target.value))}),i(3,"option",24),c(4,"All Genres"),o(),A(5,Qt,2,2,"option",25,ct),o(),i(7,"select",23),D("change",function(r){E(t);let d=m(4);return P(d.decadeFilter.set(r.target.value))}),i(8,"option",24),c(9,"All Decades"),o(),A(10,Kt,2,2,"option",25,ct),o(),p(12,Jt,15,0,"select",26),o()}if(n&2){let t=m(4);l(),k("value",t.collectionQuery()),l(4),R(t.collectionGenres()),l(5),R(t.collectionDecades()),l(2),C(t.activeTab()==="watched"?12:-1)}}function Xt(n,e){if(n&1){let t=$();i(0,"button",44),D("click",function(){E(t);let r=m(5);return P(r.exportCsv())}),at(),i(1,"svg",45),I(2,"path",46)(3,"polyline",47)(4,"line",48),o(),c(5," CSV "),o(),rt(),i(6,"button",44),D("click",function(){E(t);let r=m(5);return P(r.exportLetterboxd())}),at(),i(7,"svg",45),I(8,"path",46)(9,"polyline",47)(10,"line",48),o(),c(11," Letterboxd "),o(),rt(),i(12,"label",49),at(),i(13,"svg",45),I(14,"path",46)(15,"polyline",50)(16,"line",51),o(),c(17," Import "),rt(),i(18,"input",52),D("change",function(r){E(t);let d=m(5);return P(d.importLetterboxd(r))}),o()()}}function te(n,e){if(n&1){let t=$();i(0,"div",17)(1,"label",35),c(2,"Sort by"),o(),i(3,"select",36),D("change",function(r){E(t);let d=m(4);return P(d.onSortChange(r))}),i(4,"option",37),c(5,"Recently Added"),o(),i(6,"option",38),c(7,"Oldest Added"),o(),i(8,"option",39),c(9,"Title A\u2013Z"),o(),i(10,"option",40),c(11,"Title Z\u2013A"),o(),i(12,"option",41),c(13,"Highest Rated"),o(),i(14,"option",42),c(15,"Newest Films"),o()(),p(16,Xt,19,0),i(17,"app-view-toggle",43),ht("modeChange",function(r){E(t);let d=m(4);return ut(d.viewMode,r)||(d.viewMode=r),P(r)}),o()()}if(n&2){let t=m(4);l(16),C(t.currentMovies().length>0?16:-1),l(),vt("mode",t.viewMode)}}function ee(n,e){if(n&1){let t=$();i(0,"div",18)(1,"button",53),D("click",function(){E(t);let r=m(4);return P(r.shareCollection())}),c(2,"Share"),o()()}}function ne(n,e){if(n&1){let t=$();i(0,"div",18)(1,"button",53),D("click",function(){E(t);let r=m(4);return P(r.exportBackup())}),c(2,"Backup"),o(),i(3,"label",54),c(4," Restore "),i(5,"input",55),D("change",function(r){E(t);let d=m(4);return P(d.importBackup(r))}),o()()()}}function ie(n,e){if(n&1&&I(0,"app-movie-grid",2),n&2){let t=m(6);k("movies",t.sortedWatchlist())}}function oe(n,e){if(n&1&&I(0,"app-movie-list",2),n&2){let t=m(6);k("movies",t.sortedWatchlist())}}function ae(n,e){if(n&1&&p(0,ie,1,1,"app-movie-grid",2)(1,oe,1,1,"app-movie-list",2),n&2){let t=m(5);C(t.viewMode()==="grid"?0:1)}}function le(n,e){n&1&&(i(0,"div",3)(1,"p",4),c(2,"No films in your watchlist"),o(),i(3,"p",5),c(4,"Browse films and add ones you'd like to watch later."),o(),i(5,"a",6),c(6,"Browse Films"),o()())}function re(n,e){if(n&1&&(i(0,"div",19),p(1,ae,2,1)(2,le,7,0,"div",3),o()),n&2){let t=m(4);l(),C(t.sortedWatchlist().length>0?1:2)}}function ce(n,e){if(n&1&&I(0,"app-movie-grid",2),n&2){let t=m(6);k("movies",t.sortedWatched())}}function de(n,e){if(n&1&&I(0,"app-movie-list",2),n&2){let t=m(6);k("movies",t.sortedWatched())}}function se(n,e){if(n&1&&p(0,ce,1,1,"app-movie-grid",2)(1,de,1,1,"app-movie-list",2),n&2){let t=m(5);C(t.viewMode()==="grid"?0:1)}}function _e(n,e){n&1&&(i(0,"div",3)(1,"p",4),c(2,"No films watched yet"),o(),i(3,"p",5),c(4,"Films you mark as watched will appear here."),o(),i(5,"a",6),c(6,"Discover Films"),o()())}function me(n,e){if(n&1&&(i(0,"div",19),p(1,se,2,1)(2,_e,7,0,"div",3),o()),n&2){let t=m(4);l(),C(t.sortedWatched().length>0?1:2)}}function pe(n,e){if(n&1&&I(0,"app-movie-grid",2),n&2){let t=m(6);k("movies",t.sortedFavorites())}}function Ce(n,e){if(n&1&&I(0,"app-movie-list",2),n&2){let t=m(6);k("movies",t.sortedFavorites())}}function ge(n,e){if(n&1&&p(0,pe,1,1,"app-movie-grid",2)(1,Ce,1,1,"app-movie-list",2),n&2){let t=m(5);C(t.viewMode()==="grid"?0:1)}}function ve(n,e){n&1&&(i(0,"div",3)(1,"p",4),c(2,"No favorite films yet"),o(),i(3,"p",5),c(4,"Tap the heart icon on any film to add it to your favorites."),o(),i(5,"a",6),c(6,"Browse Films"),o()())}function ue(n,e){if(n&1&&(i(0,"div",19),p(1,ge,2,1)(2,ve,7,0,"div",3),o()),n&2){let t=m(4);l(),C(t.sortedFavorites().length>0?1:2)}}function he(n,e){n&1&&(i(0,"div",3)(1,"p",4),c(2,"No playlists yet"),o(),i(3,"p",5),c(4,"Create a playlist to organize your favorite films into custom lists."),o()())}function xe(n,e){if(n&1){let t=$();i(0,"input",68),D("input",function(r){E(t);let d=m(7);return P(d.editPlaylistName.set(r.target.value))})("keydown.enter",function(){E(t);let r=m().$implicit,d=m(6);return P(d.saveRename(r.id))})("blur",function(){E(t);let r=m().$implicit,d=m(6);return P(d.saveRename(r.id))}),o()}if(n&2){let t=m(7);k("value",t.editPlaylistName())}}function fe(n,e){if(n&1){let t=$();i(0,"h3",69),D("click",function(){E(t);let r=m().$implicit,d=m(6);return P(d.startRename(r))}),c(1),o()}if(n&2){let t=m().$implicit;l(),v(t.name)}}function we(n,e){if(n&1&&I(0,"img",71),n&2){let t=m().$implicit;k("src",t.posterUrl,pt)("alt",t.title)}}function be(n,e){if(n&1&&(i(0,"div",72),c(1),o()),n&2){let t=m().$implicit;l(),v(t.title[0])}}function ye(n,e){if(n&1&&(i(0,"a",70),p(1,we,1,2,"img",71)(2,be,2,1,"div",72),o()),n&2){let t=e.$implicit;k("routerLink",et(2,kt,t.id)),l(),C(t.posterUrl?1:2)}}function Se(n,e){if(n&1&&(i(0,"div",67),A(1,ye,3,4,"a",70,st),o()),n&2){let t=m().$implicit,a=m(6);l(),R(a.playlistMovies(t.id))}}function Me(n,e){if(n&1){let t=$();i(0,"div",59)(1,"div",60),p(2,xe,1,1,"input",61)(3,fe,2,1,"h3",62),i(4,"span",63),c(5),o(),i(6,"button",64),D("click",function(){let r=E(t).$implicit,d=m(6);return P(d.deletePlaylist(r.id))}),at(),i(7,"svg",45),I(8,"polyline",65)(9,"path",66),o()()(),p(10,Se,3,0,"div",67),o()}if(n&2){let t=e.$implicit,a=m(6);l(2),C(a.editingPlaylistId()===t.id?2:3),l(3),G("",t.movieIds.length," films"),l(5),C(a.playlistMovies(t.id).length>0?10:-1)}}function Te(n,e){if(n&1&&A(0,Me,11,3,"div",59,st),n&2){let t=m(5);R(t.collectionService.playlists())}}function Ee(n,e){if(n&1){let t=$();i(0,"div",20)(1,"div",56)(2,"input",57),D("input",function(r){E(t);let d=m(4);return P(d.newPlaylistName.set(r.target.value))})("keydown.enter",function(){E(t);let r=m(4);return P(r.createPlaylist())}),o(),i(3,"button",58),D("click",function(){E(t);let r=m(4);return P(r.createPlaylist())}),c(4,"Create"),o()(),p(5,he,5,0,"div",3)(6,Te,2,0),o()}if(n&2){let t=m(4);l(2),k("value",t.newPlaylistName()),l(),k("disabled",!t.newPlaylistName().trim()),l(2),C(t.collectionService.playlists().length===0?5:6)}}function Pe(n,e){n&1&&(i(0,"div",3)(1,"p",4),c(2,"No stats yet"),o(),i(3,"p",5),c(4,"Watch some films to see your viewing statistics."),o(),i(5,"a",6),c(6,"Discover Films"),o()())}function Oe(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Languages Explored"),o()()),n&2){let t=m(6);l(2),v(t.uniqueLanguages())}}function Ie(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Avg Film Age (yrs)"),o()()),n&2){let t=m(6);l(2),v(t.watchedAvgFilmAge())}}function De(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Unique Directors"),o()()),n&2){let t=m(6);l(2),v(t.watchedDirectorCount())}}function ke(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Non-English Films"),o()()),n&2){let t=m(6);l(2),v(t.watchedNonEnglishCount())}}function Fe(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Silent-Era Films"),o()()),n&2){let t=m(6);l(2),v(t.watchedSilentEraCount())}}function Ne(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Median Year"),o()()),n&2&&(l(2),v(e))}function Ae(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Avg. Year"),o()()),n&2&&(l(2),v(e))}function Re(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Co-directed"),o()()),n&2){let t=m(6);l(2),v(t.watchedCoDirectedCount())}}function Le(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Avg Title Length"),o()()),n&2&&(l(2),v(e))}function Ve(n,e){n&1&&(i(0,"div",74)(1,"span",95),c(2),o(),i(3,"span",76),c(4,"Longest Title"),o()()),n&2&&(l(2),v(e))}function Ye(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Watchlist Avg Year"),o()()),n&2&&(l(2),v(e))}function $e(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Oldest in Watchlist"),o()()),n&2&&(l(2),v(e))}function ze(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Watchlist on IA"),o()()),n&2&&(l(2),v(e))}function We(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Favorites Avg \u2605"),o()()),n&2&&(l(2),v(e))}function Ge(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Oldest Favorite"),o()()),n&2){let t=m(6);l(2),v(t.favoritesOldestYear())}}function Be(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Favorites on IA"),o()()),n&2&&(l(2),v(e))}function je(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Languages Watched"),o()()),n&2&&(l(2),v(e))}function He(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Avg Genres/Film"),o()()),n&2&&(l(2),v(e))}function Ue(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Watchlist Streamable"),o()()),n&2&&(l(2),G("",e,"%"))}function qe(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"IMDb Linked"),o()()),n&2&&(l(2),v(e))}function Qe(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Have Poster"),o()()),n&2&&(l(2),G("",e,"%"))}function Ke(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Favorites Free"),o()()),n&2&&(l(2),G("",e,"%"))}function Je(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"On YouTube"),o()()),n&2&&(l(2),v(e))}function Ze(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Co-Directed"),o()()),n&2&&(l(2),G("",e,"%"))}function Xe(n,e){n&1&&(i(0,"div",74)(1,"span",96),c(2),o(),i(3,"span",76),c(4,"Shortest Title"),o()()),n&2&&(l(2),v(e))}function tn(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Newest Watched"),o()()),n&2){let t=m(6);l(2),v(t.watchedNewestYear())}}function en(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Rated 8.0+"),o()()),n&2){let t=m(6);l(2),v(t.watchedHighlyRatedCount())}}function nn(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Avg Directors/Film"),o()()),n&2&&(l(2),v(e))}function on(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Pre-1940 Watched"),o()()),n&2){let t=m(6);l(2),v(t.watchedPreWarCount())}}function an(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Oldest Watched"),o()()),n&2){let t=m(6);l(2),v(t.watchedOldestYear())}}function ln(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Streamable"),o()()),n&2&&(l(2),G("",e,"%"))}function rn(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Rating Spread"),o()()),n&2&&(l(2),v(e))}function cn(n,e){n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Median Rating"),o()()),n&2&&(l(2),v(e))}function dn(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Decades"),o()()),n&2){let t=m(6);l(2),v(t.watchedDecadeCount())}}function sn(n,e){if(n&1&&(i(0,"div",74)(1,"span",75),c(2),o(),i(3,"span",76),c(4,"Genres"),o()()),n&2){let t=m(6);l(2),v(t.watchedGenreCount())}}function _n(n,e){n&1&&(i(0,"div",74)(1,"span",96),c(2),o(),i(3,"span",76),c(4,"Top Director"),o()()),n&2&&(l(2),v(e))}function mn(n,e){if(n&1&&(i(0,"div",78)(1,"span",97),c(2),o(),i(3,"div",98)(4,"span",99),c(5),o(),i(6,"span",100),c(7),o()(),i(8,"div",101),I(9,"div",102),o(),i(10,"span",103),c(11),o()()),n&2){let t=e;l(2),v(t.icon),l(3),v(t.name),l(2),G("",t.remaining," more to go"),l(2),q("width",t.pct,"%"),l(2),dt("",t.current,"/",t.target)}}function pn(n,e){if(n&1&&(i(0,"div",106)(1,"span",107),c(2),o(),i(3,"span",108),c(4),o(),i(5,"span",109),c(6),o()()),n&2){let t=e.$implicit;Q("achievements__badge--earned",t.earned),l(2),v(t.icon),l(2),v(t.name),l(2),v(t.description)}}function Cn(n,e){if(n&1&&(i(0,"section",79)(1,"h3"),c(2,"Achievements"),o(),i(3,"div",104),A(4,pn,7,5,"div",105,st),o()()),n&2){let t=m(6);l(4),R(t.achievements())}}function gn(n,e){if(n&1&&(i(0,"div",110)(1,"span",111),c(2),o(),i(3,"div",112)(4,"span",113),c(5),o(),i(6,"span",114),c(7),o(),i(8,"div",115),I(9,"div",116),o(),i(10,"span",117),c(11),o()()()),n&2){let t=e.$implicit;Q("challenges__card--done",t.current>=t.target),l(2),v(t.icon),l(3),v(t.name),l(2),v(t.description),l(2),q("width",t.current/t.target*100,"%"),l(2),dt("",t.current,"/",t.target)}}function vn(n,e){if(n&1&&(i(0,"div",118)(1,"a",119),c(2),o(),i(3,"div",120),I(4,"div",121),o(),i(5,"span",122),c(6),o()()),n&2){let t=e.$implicit;l(),k("routerLink",et(5,Ft,t.name)),l(),v(t.name),l(2),q("width",t.pct,"%"),l(2),v(t.count)}}function un(n,e){if(n&1&&(i(0,"section",83)(1,"h3"),c(2,"Top Directors"),o(),i(3,"div",85),A(4,vn,7,7,"div",118,lt),o()()),n&2){let t=m(6);l(4),R(t.directorStats())}}function hn(n,e){if(n&1&&(i(0,"a",86)(1,"span",123),c(2),o(),i(3,"div",120),I(4,"div",121),o(),i(5,"span",122),c(6),o()()),n&2){let t=e.$implicit;k("routerLink",et(5,Nt,t.name)),l(2),v(t.name),l(2),q("width",t.pct,"%"),l(2),v(t.count)}}function xn(n,e){if(n&1&&(i(0,"a",86)(1,"span",123),c(2),o(),i(3,"div",120),I(4,"div",121),o(),i(5,"span",122),c(6),o()()),n&2){let t=e.$implicit;k("routerLink",et(5,At,t.name.replace("s",""))),l(2),v(t.name),l(2),q("width",t.pct,"%"),l(2),v(t.count)}}function fn(n,e){if(n&1&&(i(0,"div",118)(1,"span",124),c(2),o(),i(3,"div",120),I(4,"div",121),o(),i(5,"span",122),c(6),o()()),n&2){let t=e.$implicit;l(2),v(t.name),l(2),q("width",t.pct,"%"),l(2),v(t.count)}}function wn(n,e){if(n&1&&(i(0,"section",87)(1,"h3"),c(2,"Languages"),o(),i(3,"div",85),A(4,fn,7,4,"div",118,lt),o()()),n&2){let t=m(6);l(4),R(t.languageStats())}}function bn(n,e){if(n&1&&(i(0,"div",118)(1,"span",124),c(2),o(),i(3,"div",120),I(4,"div",121),o(),i(5,"span",122),c(6),o()()),n&2){let t=e.$implicit;l(2),G("",t.name," \u2605"),l(2),q("width",t.pct,"%"),l(2),v(t.count)}}function yn(n,e){if(n&1&&(i(0,"section",88)(1,"h3"),c(2,"Your Rating Distribution"),o(),i(3,"div",85),A(4,bn,7,4,"div",118,lt),o()()),n&2){let t=m(6);l(4),R(t.ratingDistribution())}}function Sn(n,e){if(n&1&&(i(0,"div",126)(1,"span",127),c(2),o(),I(3,"div",128),i(4,"span",129),c(5),o()()),n&2){let t=e.$implicit;l(2),v(t.count),l(),q("height",t.pct,"%"),l(2),v(t.label)}}function Mn(n,e){if(n&1&&(i(0,"section",89)(1,"h3"),c(2,"Monthly Activity"),o(),i(3,"div",125),A(4,Sn,6,4,"div",126,mt),o()()),n&2){let t=m(6);l(4),R(t.monthlyTrends())}}function Tn(n,e){if(n&1){let t=$();i(0,"button",140),D("click",function(){let r=E(t).$implicit,d=m(8);return P(d.heatmapYear.set(r))}),c(1),o()}if(n&2){let t=e.$implicit,a=m(8);Q("heatmap__year-btn--active",a.heatmapYear()===t),l(),v(t)}}function En(n,e){if(n&1){let t=$();i(0,"div",131)(1,"button",140),D("click",function(){E(t);let r=m(7);return P(r.heatmapYear.set(null))}),c(2,"Last 12mo"),o(),A(3,Tn,2,3,"button",141,ct),o()}if(n&2){let t=m(7);l(),Q("heatmap__year-btn--active",t.heatmapYear()===null),l(2),R(t.heatmapYears())}}function Pn(n,e){if(n&1&&I(0,"div",143),n&2){let t=e.$implicit;Q("heatmap__cell--l1",t.level===1)("heatmap__cell--l2",t.level===2)("heatmap__cell--l3",t.level===3)("heatmap__cell--future",t.level===-1),k("title",t.count>=0?t.date+": "+t.count+" film(s)":"")}}function On(n,e){if(n&1&&(i(0,"div",134),A(1,Pn,1,9,"div",142,Rt),o()),n&2){let t=e.$implicit;l(),R(t.days)}}function In(n,e){if(n&1&&(i(0,"section",90)(1,"div",130)(2,"h3"),c(3,"Watch Calendar"),o(),p(4,En,5,2,"div",131),o(),i(5,"div",132)(6,"div",133),A(7,On,3,0,"div",134,gt),o(),i(9,"div",135)(10,"span"),c(11,"Less"),o(),I(12,"div",136)(13,"div",137)(14,"div",138)(15,"div",139),i(16,"span"),c(17,"More"),o()()()()),n&2){let t=m(6);l(4),C(t.heatmapYears().length>1?4:-1),l(3),R(t.watchHeatmap().weeks)}}function Dn(n,e){if(n&1&&(i(0,"div",148),I(1,"div",149),i(2,"span",150),c(3),o()()),n&2){let t=e.$implicit;q("left",t.pct,"%"),l(),q("height",8+t.count*6,"px"),k("title",t.year+": "+t.count+" film(s)"),l(2),v(t.year)}}function kn(n,e){if(n&1&&(i(0,"section",91)(1,"h3"),c(2,"Your Films Through Time"),o(),i(3,"div",144)(4,"div",145),I(5,"div",146),A(6,Dn,4,6,"div",147,Lt),o()()()),n&2){let t=m(6);l(6),R(t.filmTimeline())}}function Fn(n,e){if(n&1&&(i(0,"a",153)(1,"span",154),c(2),o(),i(3,"span",155),c(4),o()()),n&2){let t=e.$implicit;k("routerLink",t.link),l(2),v(t.label),l(2),G("",t.count," films")}}function Nn(n,e){if(n&1&&(i(0,"section",92)(1,"h3"),c(2,"Discovery Gaps"),o(),i(3,"p",151),c(4,"Genres and decades you haven't explored yet"),o(),i(5,"div",152),A(6,Fn,5,3,"a",153,mt),o()()),n&2){let t=m(6);l(6),R(t.discoveryGaps())}}function An(n,e){if(n&1&&(i(0,"div",157)(1,"span",158),c(2),o(),i(3,"span",159),c(4),o()()),n&2){let t=e.$implicit;l(2),v(t.value),l(2),v(t.label)}}function Rn(n,e){if(n&1&&(i(0,"section",93)(1,"h3"),c(2,"Viewing Insights"),o(),i(3,"div",156),A(4,An,5,2,"div",157,mt),o()()),n&2){let t=m(6);l(4),R(t.viewingInsights())}}function Ln(n,e){if(n&1&&(i(0,"span",166),c(1),o()),n&2){let t=m().$implicit;l(),G("\u2605 ",t.rating,"/10")}}function Vn(n,e){if(n&1&&(i(0,"div",161),I(1,"div",162),i(2,"div",163)(3,"a",164),c(4),o(),i(5,"span",165),c(6),o(),p(7,Ln,2,1,"span",166),o()()),n&2){let t=e.$implicit;l(3),k("routerLink",et(4,kt,t.movieId)),l(),v(t.title),l(2),v(t.dateLabel),l(),C(t.rating?7:-1)}}function Yn(n,e){if(n&1&&(i(0,"section",94)(1,"h3"),c(2,"Watch History"),o(),i(3,"div",160),A(4,Vn,8,6,"div",161,Vt),o()()),n&2){let t=m(6);l(4),R(t.watchTimeline())}}function $n(n,e){if(n&1&&(i(0,"div",73)(1,"div",74)(2,"span",75),c(3),o(),i(4,"span",76),c(5,"Films Watched"),o()(),i(6,"div",77)(7,"span",75),c(8),o(),i(9,"span",76),c(10),o()(),i(11,"div",74)(12,"span",75),c(13),o(),i(14,"span",76),c(15,"Avg. Your Rating"),o()(),i(16,"div",74)(17,"span",75),c(18),o(),i(19,"span",76),c(20,"Avg. TMDb Rating"),o()(),i(21,"div",74)(22,"span",75),c(23),o(),i(24,"span",76),c(25,"Decades Spanned"),o()(),p(26,Oe,5,1,"div",74),i(27,"div",74)(28,"span",75),c(29),o(),i(30,"span",76),c(31,"Current Streak (days)"),o()(),i(32,"div",74)(33,"span",75),c(34),o(),i(35,"span",76),c(36,"Best Streak (days)"),o()(),p(37,Ie,5,1,"div",74),p(38,De,5,1,"div",74),p(39,ke,5,1,"div",74),p(40,Fe,5,1,"div",74),p(41,Ne,5,1,"div",74),p(42,Ae,5,1,"div",74),p(43,Re,5,1,"div",74),p(44,Le,5,1,"div",74),p(45,Ve,5,1,"div",74),p(46,Ye,5,1,"div",74),p(47,$e,5,1,"div",74),p(48,ze,5,1,"div",74),p(49,We,5,1,"div",74),p(50,Ge,5,1,"div",74),p(51,Be,5,1,"div",74),p(52,je,5,1,"div",74),p(53,He,5,1,"div",74),p(54,Ue,5,1,"div",74),p(55,qe,5,1,"div",74),p(56,Qe,5,1,"div",74),p(57,Ke,5,1,"div",74),p(58,Je,5,1,"div",74),p(59,Ze,5,1,"div",74),p(60,Xe,5,1,"div",74),p(61,tn,5,1,"div",74),p(62,en,5,1,"div",74),p(63,nn,5,1,"div",74),p(64,on,5,1,"div",74),p(65,an,5,1,"div",74),p(66,ln,5,1,"div",74),p(67,rn,5,1,"div",74),p(68,cn,5,1,"div",74),p(69,dn,5,1,"div",74),p(70,sn,5,1,"div",74),p(71,_n,5,1,"div",74),o(),p(72,mn,12,7,"div",78),p(73,Cn,6,0,"section",79),i(74,"section",80)(75,"h3"),c(76),o(),i(77,"div",81),A(78,gn,12,9,"div",82,st),o()(),p(80,un,6,0,"section",83),i(81,"div",84)(82,"section",83)(83,"h3"),c(84,"Top Genres"),o(),i(85,"div",85),A(86,hn,7,7,"a",86,lt),o()(),i(88,"section",83)(89,"h3"),c(90,"By Decade"),o(),i(91,"div",85),A(92,xn,7,7,"a",86,lt),o()()(),p(94,wn,6,0,"section",87),p(95,yn,6,0,"section",88),p(96,Mn,6,0,"section",89),p(97,In,18,1,"section",90),p(98,kn,8,0,"section",91),p(99,Nn,8,0,"section",92),p(100,Rn,6,0,"section",93),p(101,Yn,6,0,"section",94)),n&2){let t,a,r,d,s,x,f,w,M,S,b,T,O,N,B,F,L,Y,V,j,z,H,U,K,h=m(5);l(3),v(h.watchedMovies().length),l(5),v(h.watchedThisYear()),l(2),G("Watched in ",h.currentYear),l(3),v(h.avgRating()),l(5),v(h.avgTmdbRating()),l(5),v(h.totalDecades()),l(3),C(h.uniqueLanguages()>1?26:-1),l(3),v(h.currentStreak()),l(5),v(h.longestStreak()),l(3),C(h.watchedAvgFilmAge()>0?37:-1),l(),C(h.watchedDirectorCount()>1?38:-1),l(),C(h.watchedNonEnglishCount()>0?39:-1),l(),C(h.watchedSilentEraCount()>0?40:-1),l(),C((t=h.watchedMedianYear())?41:-1,t),l(),C((a=h.watchedAvgYear())?42:-1,a),l(),C(h.watchedCoDirectedCount()>0?43:-1),l(),C((r=h.watchedAvgTitleLength())?44:-1,r),l(),C((d=h.watchedLongestTitle())?45:-1,d),l(),C((s=h.watchlistAvgYear())?46:-1,s),l(),C((x=h.watchlistOldestYear())?47:-1,x),l(),C((f=h.watchlistIaStreamableCount())?48:-1,f),l(),C((w=h.favoritesAvgRating())?49:-1,w),l(),C(h.favoritesOldestYear()?50:-1),l(),C((M=h.favoritesIaStreamableCount())?51:-1,M),l(),C((S=h.watchedLanguageCount())?52:-1,S),l(),C((b=h.watchedAvgGenreCount())?53:-1,b),l(),C((T=h.watchlistStreamablePct())?54:-1,T),l(),C((O=h.watchedImdbLinkedCount())?55:-1,O),l(),C((N=h.watchedPosterCoveragePct())?56:-1,N),l(),C((B=h.favoritesStreamablePct())?57:-1,B),l(),C((F=h.watchedYtStreamableCount())?58:-1,F),l(),C((L=h.watchedCoDirectedPct())?59:-1,L),l(),C((Y=h.watchedShortestTitle())?60:-1,Y),l(),C(h.watchedNewestYear()?61:-1),l(),C(h.watchedHighlyRatedCount()>0?62:-1),l(),C((V=h.watchedAvgDirectorCount())?63:-1,V),l(),C(h.watchedPreWarCount()?64:-1),l(),C(h.watchedOldestYear()?65:-1),l(),C((j=h.watchedStreamablePct())?66:-1,j),l(),C((z=h.watchedRatingSpread())?67:-1,z),l(),C((H=h.watchedMedianRating())?68:-1,H),l(),C(h.watchedDecadeCount()>1?69:-1),l(),C(h.watchedGenreCount()>1?70:-1),l(),C((U=h.watchedTopDirector())?71:-1,U),l(),C((K=h.nextMilestone())?72:-1,K),l(),C(h.achievements().length>0?73:-1),l(3),G("",h.monthlyChallenges().month," Challenges"),l(2),R(h.monthlyChallenges().challenges),l(2),C(h.directorStats().length>0?80:-1),l(6),R(h.genreStats()),l(6),R(h.decadeStats()),l(2),C(h.languageStats().length>1?94:-1),l(),C(h.ratingDistribution().length>0?95:-1),l(),C(h.monthlyTrends().length>1?96:-1),l(),C(h.watchHeatmap().weeks.length>0?97:-1),l(),C(h.filmTimeline().length>1?98:-1),l(),C(h.discoveryGaps().length>0?99:-1),l(),C(h.viewingInsights().length>0?100:-1),l(),C(h.watchTimeline().length>0?101:-1)}}function zn(n,e){if(n&1&&(i(0,"div",21),p(1,Pe,7,0,"div",3)(2,$n,102,56),o()),n&2){let t=m(4);l(),C(t.watchedMovies().length===0?1:2)}}function Wn(n,e){if(n&1){let t=$();i(0,"div",11)(1,"div",12),D("keydown",function(r){E(t);let d=m(3);return P(d.onTabKeydown(r))}),i(2,"button",13),D("click",function(){E(t);let r=m(3);return P(r.activeTab.set("watchlist"))}),c(3," Watchlist "),p(4,Bt,2,1,"span",14),p(5,jt,1,2,"span",15),o(),i(6,"button",13),D("click",function(){E(t);let r=m(3);return P(r.activeTab.set("watched"))}),c(7," Watched "),p(8,Ht,2,1,"span",14),o(),i(9,"button",13),D("click",function(){E(t);let r=m(3);return P(r.activeTab.set("favorites"))}),c(10," Favorites "),p(11,Ut,2,1,"span",14),o(),i(12,"button",13),D("click",function(){E(t);let r=m(3);return P(r.activeTab.set("playlists"))}),c(13," Playlists "),p(14,qt,2,1,"span",14),o(),i(15,"button",13),D("click",function(){E(t);let r=m(3);return P(r.activeTab.set("stats"))}),c(16," Stats "),o()(),p(17,Zt,13,2,"div",16),p(18,te,18,2,"div",17),p(19,ee,3,0,"div",18),p(20,ne,6,0,"div",18),o(),p(21,re,3,1,"div",19),p(22,me,3,1,"div",19),p(23,ue,3,1,"div",19),p(24,Ee,7,3,"div",20),p(25,zn,3,1,"div",21)}if(n&2){let t=m(3);l(2),Q("collection__tab--active",t.activeTab()==="watchlist"),tt("aria-selected",t.activeTab()==="watchlist")("tabindex",t.activeTab()==="watchlist"?0:-1),l(2),C(t.watchlistMovies().length>0?4:-1),l(),C(t.newThisWeek()>0?5:-1),l(),Q("collection__tab--active",t.activeTab()==="watched"),tt("aria-selected",t.activeTab()==="watched")("tabindex",t.activeTab()==="watched"?0:-1),l(2),C(t.watchedMovies().length>0?8:-1),l(),Q("collection__tab--active",t.activeTab()==="favorites"),tt("aria-selected",t.activeTab()==="favorites")("tabindex",t.activeTab()==="favorites"?0:-1),l(2),C(t.favoriteMovies().length>0?11:-1),l(),Q("collection__tab--active",t.activeTab()==="playlists"),tt("aria-selected",t.activeTab()==="playlists")("tabindex",t.activeTab()==="playlists"?0:-1),l(2),C(t.collectionService.playlists().length>0?14:-1),l(),Q("collection__tab--active",t.activeTab()==="stats"),tt("aria-selected",t.activeTab()==="stats")("tabindex",t.activeTab()==="stats"?0:-1),l(2),C(t.activeTab()!=="stats"&&t.activeTab()!=="playlists"?17:-1),l(),C(t.activeTab()!=="stats"?18:-1),l(),C(t.activeTab()!=="stats"&&t.activeTab()!=="playlists"?19:-1),l(),C(t.activeTab()!=="stats"?20:-1),l(),C(t.activeTab()==="watchlist"?21:-1),l(),C(t.activeTab()==="watched"?22:-1),l(),C(t.activeTab()==="favorites"?23:-1),l(),C(t.activeTab()==="playlists"?24:-1),l(),C(t.activeTab()==="stats"?25:-1)}}function Gn(n,e){if(n&1&&(i(0,"div",9)(1,"h1"),c(2,"My Collection"),o(),i(3,"a",10),c(4,"Year in Review \u2192"),o()(),p(5,Gt,1,0,"app-loading-spinner")(6,Wn,26,34)),n&2){let t=m(2);l(5),C(t.catalog.loading()?5:6)}}function Bn(n,e){if(n&1&&p(0,Wt,5,1,"div",7)(1,Gn,7,1),n&2){let t,a=m();C((t=a.catalog.error())?0:1,t)}}var Dt=class n{catalog=X(St);collectionService=X(Mt);notifications=X(Tt);route=X(bt);titleService=X(wt);metaService=X(ft);currentYear=new Date().getFullYear();isSharedView=W(!1);sharedMovies=W([]);activeTab=W("watchlist");sortBy=W("added-desc");viewMode=W("grid");collectionQuery=W("");genreFilter=W("");decadeFilter=W("");ratingFilter=W(0);heatmapYear=W(null);watchlistMovies=u(()=>{let e=this.collectionService.watchlistIds();return this.catalog.movies().filter(t=>e.has(t.id))});watchedMovies=u(()=>{let e=this.collectionService.watchedIds();return this.catalog.movies().filter(t=>e.has(t.id))});currentMovies=u(()=>this.activeTab()==="watchlist"?this.watchlistMovies():this.watchedMovies());favoriteMovies=u(()=>{let e=this.collectionService.favoriteIds();return this.catalog.movies().filter(t=>e.has(t.id))});collectionGenres=u(()=>{let e=[...this.watchlistMovies(),...this.watchedMovies(),...this.favoriteMovies()],t=new Set;for(let a of e)for(let r of a.genres)t.add(r);return[...t].sort()});collectionDecades=u(()=>{let e=[...this.watchlistMovies(),...this.watchedMovies(),...this.favoriteMovies()],t=new Set;for(let a of e)t.add(Math.floor(a.year/10)*10);return[...t].sort()});sortedWatchlist=u(()=>this.applyFilters(this.applyQuery(this.sortMovies(this.watchlistMovies(),"watchlist"))));sortedWatched=u(()=>this.applyRatingFilter(this.applyFilters(this.applyQuery(this.sortMovies(this.watchedMovies(),"watched")))));sortedFavorites=u(()=>{let e=this.sortBy(),a=[...this.favoriteMovies()].sort((r,d)=>{switch(e){case"title-asc":return r.title.localeCompare(d.title);case"title-desc":return d.title.localeCompare(r.title);case"rating-desc":return d.voteAverage-r.voteAverage;case"year-desc":return d.year-r.year;default:return 0}});return this.applyFilters(this.applyQuery(a))});watchIdx=u(()=>{let e=this.watchedMovies(),t=e.length,a=new Date().getFullYear(),r=0,d=0,s=0,x=0,f=0,w=0,M=0,S=0,b=0,T=0,O=0,N=0,B=0,F=0,L=0,Y=0,V=1/0,j=-1/0,z="",H="",U=null,K=new Set,h=new Set,nt=new Set,J=new Map,it=[];for(let _ of e){s+=a-_.year,x+=_.year,f+=_.title.length,w+=_.genres.length,M+=_.directors.length,_.isStreamable&&S++,_.directors.length>1&&b++,_.language&&_.language!=="English"&&_.language!=="en"&&T++,_.year<1930&&O++,_.year<1940&&N++,_.youtubeId&&F++,_.imdbId&&L++,_.posterUrl&&Y++,_.language&&nt.add(_.language),h.add(Math.floor(_.year/10)*10);for(let y of _.genres)K.add(y);for(let y of _.directors)J.set(y,(J.get(y)??0)+1);_.year<V&&(V=_.year),_.year>j&&(j=_.year),(!z||_.title.length<z.length)&&(z=_.title),(!H||_.title.length>H.length)&&(H=_.title),_.voteAverage>0&&(r+=_.voteAverage,d++,it.push(_.voteAverage),_.voteAverage>=8&&B++,(!U||_.voteAverage>U.voteAverage)&&(U=_))}it.sort((_,y)=>_-y);let ot=e.map(_=>_.year).sort((_,y)=>_-y),g=[...J.entries()].sort((_,y)=>y[1]-_[1]);return{n:t,now:a,ratingSum:r,ratedCount:d,ageSum:s,yearSum:x,titleLenSum:f,genreLenSum:w,dirLenSum:M,streamable:S,coDirected:b,nonEnglish:T,silentEra:O,preWar:N,highlyRated8:B,yt:F,imdb:L,poster:Y,minYear:V,maxYear:j,shortestTitle:z,longestTitle:H,bestRated:U,genreSet:K,decadeSet:h,langSet:nt,dirCounts:J,sortedDirs:g,ratings:it,years:ot}});avgRating=u(()=>{let e=this.collectionService.watched().filter(a=>a.userRating!=null);return e.length===0?"\u2014":(e.reduce((a,r)=>a+(r.userRating??0),0)/e.length).toFixed(1)});avgTmdbRating=u(()=>{let{ratedCount:e,ratingSum:t}=this.watchIdx();return e===0?"\u2014":(t/e).toFixed(1)});totalDecades=u(()=>this.watchIdx().decadeSet.size);uniqueLanguages=u(()=>this.watchIdx().langSet.size);watchedThisYear=u(()=>{let e=new Date(new Date().getFullYear(),0,1).getTime();return this.collectionService.watched().filter(t=>t.watchedAt>=e).length});newThisWeek=u(()=>{let e=Date.now()-6048e5;return this.collectionService.watchlist().filter(t=>t.addedAt>=e).length});achievements=u(()=>{let{n:e,decadeSet:t,genreSet:a,silentEra:r,streamable:d}=this.watchIdx(),s=this.collectionService.favorites().length,x=this.collectionService.watched().filter(w=>w.userRating!=null).length,{longest:f}=this.streaks();return[{id:"first",icon:"\u{1F3AC}",name:"First Film",description:"Watch your first film",earned:e>=1},{id:"ten",icon:"\u{1F39E}\uFE0F",name:"Film Buff",description:"Watch 10 films",earned:e>=10},{id:"twentyfive",icon:"\u{1F4FD}\uFE0F",name:"Cinephile",description:"Watch 25 films",earned:e>=25},{id:"fifty",icon:"\u{1F3C6}",name:"Film Scholar",description:"Watch 50 films",earned:e>=50},{id:"hundred",icon:"\u{1F451}",name:"Film Historian",description:"Watch 100 films",earned:e>=100},{id:"decades3",icon:"\u{1F4C5}",name:"Time Traveler",description:"Watch films from 3+ decades",earned:t.size>=3},{id:"decades5",icon:"\u23F3",name:"Era Explorer",description:"Watch films from 5+ decades",earned:t.size>=5},{id:"genres5",icon:"\u{1F3AD}",name:"Genre Hopper",description:"Watch films in 5+ genres",earned:a.size>=5},{id:"silent",icon:"\u{1F92B}",name:"Silent Era Fan",description:"Watch 3 films from before 1930",earned:r>=3},{id:"stream5",icon:"\u{1F4FA}",name:"Free Spirit",description:"Watch 5 free films",earned:d>=5},{id:"fav5",icon:"\u2764\uFE0F",name:"Curator",description:"Favorite 5 films",earned:s>=5},{id:"rate10",icon:"\u2B50",name:"Critic",description:"Rate 10 films",earned:x>=10},{id:"streak7",icon:"\u{1F525}",name:"On Fire",description:"7-day watch streak",earned:f>=7}]});nextMilestone=u(()=>{let t=this.achievements().filter(T=>!T.earned);if(t.length===0)return null;let{n:a,decadeSet:r,genreSet:d,silentEra:s,streamable:x}=this.watchIdx(),f=this.collectionService.favorites().length,w=this.collectionService.watched().filter(T=>T.userRating!=null).length,{longest:M}=this.streaks(),S={first:{current:a,target:1},ten:{current:a,target:10},twentyfive:{current:a,target:25},fifty:{current:a,target:50},hundred:{current:a,target:100},decades3:{current:r.size,target:3},decades5:{current:r.size,target:5},genres5:{current:d.size,target:5},silent:{current:s,target:3},stream5:{current:x,target:5},fav5:{current:f,target:5},rate10:{current:w,target:10},streak7:{current:M,target:7}},b=null;for(let T of t){let O=S[T.id];if(!O)continue;let N=O.target-O.current,B=Math.round(O.current/O.target*100);(!b||N<b.remaining)&&(b={icon:T.icon,name:T.name,current:O.current,target:O.target,remaining:N,pct:B})}return b});currentStreak=u(()=>this.streaks().current);longestStreak=u(()=>this.streaks().longest);watchedAvgFilmAge=u(()=>{let{n:e,ageSum:t}=this.watchIdx();return e<2?0:Math.round(t/e)});watchedDirectorCount=u(()=>{let{n:e,dirCounts:t}=this.watchIdx();return e<2?0:t.size});watchedNonEnglishCount=u(()=>{let{n:e,nonEnglish:t}=this.watchIdx();return e<2?0:t});watchedSilentEraCount=u(()=>{let{n:e,silentEra:t}=this.watchIdx();return e<2?0:t});watchedMedianYear=u(()=>{let{n:e,years:t}=this.watchIdx();if(e<5)return null;let a=Math.floor(t.length/2);return t.length%2===0?Math.round((t[a-1]+t[a])/2):t[a]});watchedAvgYear=u(()=>{let{n:e,yearSum:t}=this.watchIdx();return e<5?null:Math.round(t/e)});watchedCoDirectedCount=u(()=>{let{n:e,coDirected:t}=this.watchIdx();return e<2?0:t});watchedAvgTitleLength=u(()=>{let{n:e,titleLenSum:t}=this.watchIdx();return e<5?null:Math.round(t/e)});watchedHighlyRatedCount=u(()=>this.watchIdx().highlyRated8);watchedShortestTitle=u(()=>{let{n:e,shortestTitle:t}=this.watchIdx();return e<3?null:t.length<=15?t:null});watchedStreamablePct=u(()=>{let{n:e,streamable:t}=this.watchIdx();if(e<3)return null;let a=Math.round(t/e*100);return a>0&&a<100?a:null});watchedMedianRating=u(()=>{let{ratings:e}=this.watchIdx();if(e.length<3)return null;let t=Math.floor(e.length/2);return(e.length%2===0?(e[t-1]+e[t])/2:e[t]).toFixed(1)});watchedDecadeCount=u(()=>this.watchIdx().decadeSet.size);watchedGenreCount=u(()=>this.watchIdx().genreSet.size);watchedTopDirector=u(()=>{let{n:e,sortedDirs:t}=this.watchIdx();if(e<3)return null;let a=t[0];return a&&a[1]>=2?a[0]:null});watchedLongestTitle=u(()=>{let{n:e,longestTitle:t}=this.watchIdx();return e<3?null:t.length>=15?t:null});watchedRatingSpread=u(()=>{let{ratings:e}=this.watchIdx();if(e.length<5)return null;let t=e[e.length-1]-e[0];return t>=2?t.toFixed(1):null});watchedPreWarCount=u(()=>{let{n:e,preWar:t}=this.watchIdx();return e<3?null:t>=1?t:null});watchedAvgDirectorCount=u(()=>{let{n:e,dirLenSum:t}=this.watchIdx();if(e<5)return null;let a=t/e;return a>=1.05?a.toFixed(2):null});watchedOldestYear=u(()=>{let{n:e,minYear:t}=this.watchIdx();return e<2?null:t});watchedNewestYear=u(()=>{let{n:e,maxYear:t}=this.watchIdx();return e<2?null:t});favoritesAvgRating=u(()=>{let e=this.favoriteMovies();if(e.length<2)return null;let t=e.filter(a=>a.voteAverage>0);return t.length<2?null:(t.reduce((a,r)=>a+r.voteAverage,0)/t.length).toFixed(1)});watchlistStreamablePct=u(()=>{let e=this.watchlistMovies();if(e.length<3)return null;let t=Math.round(e.filter(a=>a.isStreamable).length/e.length*100);return t>0&&t<100?t:null});watchedImdbLinkedCount=u(()=>{let{n:e,imdb:t}=this.watchIdx();return e<3?null:t>0?t:null});watchedPosterCoveragePct=u(()=>{let{n:e,poster:t}=this.watchIdx();if(e<3)return null;let a=Math.round(t/e*100);return a>0&&a<100?a:null});favoritesStreamablePct=u(()=>{let e=this.favoriteMovies();if(e.length<3)return null;let t=Math.round(e.filter(a=>a.isStreamable).length/e.length*100);return t>0&&t<100?t:null});watchedYtStreamableCount=u(()=>{let{n:e,yt:t}=this.watchIdx();return e<3?null:t>0?t:null});watchedAvgGenreCount=u(()=>{let{n:e,genreLenSum:t}=this.watchIdx();if(e<5)return null;let a=t/e;return a>=1.5?a.toFixed(1):null});watchedLanguageCount=u(()=>{let{n:e,langSet:t}=this.watchIdx();return e<3?null:t.size>=2?t.size:null});favoritesOldestYear=u(()=>{let e=this.favoriteMovies();return e.length<2?null:e.reduce((t,a)=>t.year<=a.year?t:a).year});watchlistOldestYear=u(()=>{let e=this.watchlistMovies();return e.length<2?null:e.reduce((t,a)=>t.year<=a.year?t:a).year});watchlistAvgYear=u(()=>{let e=this.watchlistMovies();return e.length<3?null:Math.round(e.reduce((t,a)=>t+a.year,0)/e.length)});watchedCoDirectedPct=u(()=>{let{n:e,coDirected:t}=this.watchIdx();if(e<5)return null;let a=Math.round(t/e*100);return a>0&&a<100?a:null});favoritesIaStreamableCount=u(()=>{let e=this.favoriteMovies();if(e.length<3)return null;let t=e.filter(a=>a.internetArchiveId).length;return t>0?t:null});watchlistIaStreamableCount=u(()=>{let e=this.watchlistMovies();if(e.length<3)return null;let t=e.filter(a=>a.internetArchiveId).length;return t>0?t:null});streaks=u(()=>this.computeStreaks());computeStreaks(){let e=this.collectionService.watched();if(e.length===0)return{current:0,longest:0};let t=new Set;for(let b of e){let T=new Date(b.watchedAt);t.add(`${T.getFullYear()}-${T.getMonth()}-${T.getDate()}`)}let a=[...t].sort();if(a.length===0)return{current:0,longest:0};let r=b=>{let[T,O,N]=b.split("-").map(Number);return new Date(T,O,N)},d=1,s=1;for(let b=1;b<a.length;b++){let T=r(a[b-1]),N=(r(a[b]).getTime()-T.getTime())/(1e3*60*60*24);Math.round(N)===1?(s++,s>d&&(d=s)):s=1}let x=r(a[a.length-1]),f=new Date;return{current:(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime()-x.getTime())/(1e3*60*60*24)<=1?s:0,longest:d}}genreStats=u(()=>this.computeStats(this.watchedMovies().flatMap(e=>e.genres)));decadeStats=u(()=>this.computeStats(this.watchedMovies().map(e=>`${Math.floor(e.year/10)*10}s`)));languageStats=u(()=>{let e=this.watchedMovies().filter(s=>s.language);if(e.length<3)return[];let t={en:"English",fr:"French",de:"German",ja:"Japanese",it:"Italian",es:"Spanish",ru:"Russian",sv:"Swedish",da:"Danish",pt:"Portuguese",nl:"Dutch",zh:"Chinese",ko:"Korean",pl:"Polish",cs:"Czech",hu:"Hungarian",fi:"Finnish",el:"Greek",ro:"Romanian",tr:"Turkish",ar:"Arabic",hi:"Hindi",no:"Norwegian",nb:"Norwegian"},a=new Map;for(let s of e){let x=s.language?t[s.language]??s.language.toUpperCase():"Unknown";a.set(x,(a.get(x)??0)+1)}let r=[...a.entries()].sort((s,x)=>x[1]-s[1]).slice(0,8),d=r[0]?.[1]??1;return r.map(([s,x])=>({name:s,count:x,pct:x/d*100}))});directorStats=u(()=>{let e=new Map;for(let r of this.watchedMovies())for(let d of r.directors)e.set(d,(e.get(d)??0)+1);let t=[...e.entries()].filter(([,r])=>r>=2).sort((r,d)=>d[1]-r[1]).slice(0,8),a=t[0]?.[1]??1;return t.map(([r,d])=>({name:r,count:d,pct:d/a*100}))});ratingDistribution=u(()=>{let e=this.collectionService.watched().filter(r=>r.userRating!=null);if(e.length===0)return[];let t=new Map;for(let r of e){let d=Math.round(r.userRating);t.set(d,(t.get(d)??0)+1)}let a=Math.max(...t.values());return Array.from({length:10},(r,d)=>d+1).map(r=>({name:String(r),count:t.get(r)??0,pct:(t.get(r)??0)/a*100})).filter(r=>r.count>0)});monthlyTrends=u(()=>{let e=this.collectionService.watched();if(e.length===0)return[];let t=new Map;for(let d of e){let s=new Date(d.watchedAt),x=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`;t.set(x,(t.get(x)??0)+1)}let a=[...t.entries()].sort((d,s)=>d[0].localeCompare(s[0])).slice(-12),r=Math.max(...a.map(([,d])=>d));return a.map(([d,s])=>{let[x,f]=d.split("-");return{label:new Date(parseInt(x),parseInt(f)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:s,pct:s/r*100}})});filmTimeline=u(()=>{let e=this.watchedMovies();if(e.length<2)return[];let t=new Map;for(let x of e)t.set(x.year,(t.get(x.year)??0)+1);let a=[...t.keys()].sort((x,f)=>x-f),r=a[0],s=a[a.length-1]-r||1;return a.map(x=>({year:x,count:t.get(x),pct:(x-r)/s*100}))});monthlyChallenges=u(()=>{let e=this.collectionService.watched(),t=new Date,a=t.getMonth(),r=t.getFullYear(),d=e.filter(S=>{let b=new Date(S.watchedAt);return b.getMonth()===a&&b.getFullYear()===r}),s=d.filter(S=>S.userRating!=null),x=d.filter(S=>S.review),f=this.catalog.movies().filter(S=>d.some(b=>b.movieId===S.id)),w=new Set(f.map(S=>Math.floor(S.year/10)*10)),M=t.toLocaleDateString("en-US",{month:"long"});return{month:M,challenges:[{id:"watch5",name:"Film Buff",description:`Watch 5 films in ${M}`,current:Math.min(d.length,5),target:5,icon:"\u{1F3AC}"},{id:"rate3",name:"Critic",description:`Rate 3 films in ${M}`,current:Math.min(s.length,3),target:3,icon:"\u2B50"},{id:"review1",name:"Reviewer",description:`Write a review in ${M}`,current:Math.min(x.length,1),target:1,icon:"\u270D\uFE0F"},{id:"decades2",name:"Time Traveler",description:"Watch from 2+ decades this month",current:Math.min(w.size,2),target:2,icon:"\u{1F4C5}"}]}});heatmapYears=u(()=>{let e=new Set;for(let t of this.collectionService.watched())e.add(new Date(t.watchedAt).getFullYear());return[...e].sort((t,a)=>a-t)});watchHeatmap=u(()=>{let e=this.collectionService.watched();if(e.length===0)return{weeks:[]};let t=this.heatmapYear(),a=new Date,r=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Map;for(let w of e){let M=new Date(w.watchedAt),S=`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}-${String(M.getDate()).padStart(2,"0")}`;d.set(S,(d.get(S)??0)+1)}let s,x;t?(s=new Date(t,0,1),s.setDate(s.getDate()-s.getDay()),x=new Date(t,11,31)):(x=r,s=new Date(r),s.setDate(s.getDate()-364-s.getDay()));let f=[];for(let w=0;w<53;w++){let M=[];for(let S=0;S<7;S++){let b=new Date(s);b.setDate(b.getDate()+w*7+S);let T=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,O=d.get(T)??0,N=b>r;M.push({date:T,count:N?-1:O,level:N?-1:O===0?0:O===1?1:O===2?2:3})}f.push({days:M})}return{weeks:f}});newPlaylistName=W("");editingPlaylistId=W(null);editPlaylistName=W("");playlistMovies(e){let t=this.collectionService.playlists().find(r=>r.id===e);if(!t)return[];let a=this.catalog.movies();return t.movieIds.map(r=>a.find(d=>d.id===r)).filter(r=>!!r)}createPlaylist(){let e=this.newPlaylistName().trim();e&&(this.collectionService.createPlaylist(e),this.newPlaylistName.set(""),this.notifications.show("Playlist created","success"))}startRename(e){this.editingPlaylistId.set(e.id),this.editPlaylistName.set(e.name)}saveRename(e){let t=this.editPlaylistName().trim();t&&this.collectionService.renamePlaylist(e,t),this.editingPlaylistId.set(null)}deletePlaylist(e){this.collectionService.deletePlaylist(e),this.notifications.show("Playlist deleted","info")}discoveryGaps=u(()=>{let e=this.watchedMovies();if(e.length<5)return[];let t=new Set(e.flatMap(f=>f.genres)),a=new Set(e.map(f=>Math.floor(f.year/10)*10)),r=this.catalog.movies().filter(f=>f.isStreamable),d=[],s=new Map;for(let f of r)for(let w of f.genres)s.set(w,(s.get(w)??0)+1);for(let[f,w]of s)!t.has(f)&&w>=10&&d.push({label:f,count:w,link:["/genre",f]});let x=new Map;for(let f of r){let w=Math.floor(f.year/10)*10;x.set(w,(x.get(w)??0)+1)}for(let[f,w]of x)!a.has(f)&&w>=5&&d.push({label:`${f}s`,count:w,link:["/decade",String(f)]});return d.sort((f,w)=>w.count-f.count).slice(0,8)});viewingInsights=u(()=>{let e=this.collectionService.watched();if(e.length<3)return[];let t=this.catalog.movies(),a=new Map(t.map(g=>[g.id,g])),r=[],d=e.map(g=>g.watchedAt).sort(),s=new Date(d[0]),x=new Date,f=Math.max(1,(x.getFullYear()-s.getFullYear())*12+x.getMonth()-s.getMonth()+1),w=(e.length/f).toFixed(1);r.push({label:"Films per Month",value:w});let M=new Map;for(let g of e){let _=a.get(g.movieId);if(_)for(let y of _.genres)M.set(y,(M.get(y)??0)+1)}let S=[...M.entries()].sort((g,_)=>_[1]-g[1])[0];S&&r.push({label:"Favorite Genre",value:S[0]});let b=new Map;for(let g of e){let _=a.get(g.movieId);if(_)for(let y of _.directors)b.set(y,(b.get(y)??0)+1)}let T=[...b.entries()].sort((g,_)=>_[1]-g[1])[0];T&&T[1]>=2&&r.push({label:"Top Director",value:T[0]});let O=new Map;for(let g of e){let _=a.get(g.movieId);if(_){let y=Math.floor(_.year/10)*10;O.set(y,(O.get(y)??0)+1)}}let N=[...O.entries()].sort((g,_)=>_[1]-g[1])[0];N&&r.push({label:"Preferred Decade",value:`${N[0]}s`});let B=e.reduce((g,_)=>{let y=a.get(_.movieId);return y?g+y.year:g},0),F=e.filter(g=>a.has(g.movieId)).length;F>=3&&r.push({label:"Avg Film Year",value:`${Math.round(B/F)}`});let L=0,Y=9999;for(let g of e){let _=a.get(g.movieId);_&&(_.year>L&&(L=_.year),_.year<Y&&(Y=_.year))}L>0&&r.push({label:"Newest Film",value:`${L}`}),Y<9999&&r.push({label:"Oldest Film",value:`${Y}`});let V=e.filter(g=>g.userRating!=null).sort((g,_)=>(_.userRating??0)-(g.userRating??0));if(V.length>0){let g=a.get(V[0].movieId);if(g){let _=g.title.length>18?g.title.slice(0,16)+"...":g.title;r.push({label:"Highest Rated",value:_})}}let j=e.filter(g=>a.get(g.movieId)?.isStreamable).length;e.length>=3&&r.push({label:"Streamable %",value:`${Math.round(j/e.length*100)}%`});let z=new Set;for(let g of e){let _=a.get(g.movieId);if(_)for(let y of _.directors)z.add(y)}z.size>=2&&r.push({label:"Unique Directors",value:`${z.size}`});let H=new Set;for(let g of e){let _=a.get(g.movieId);_&&_.language&&H.add(_.language)}H.size>=2&&r.push({label:"Languages",value:`${H.size}`});let U=new Set;for(let g of e){let _=a.get(g.movieId);if(_)for(let y of _.genres)U.add(y)}U.size>=3&&r.push({label:"Genres Explored",value:`${U.size}`});let K=e.filter(g=>g.userRating!=null&&g.userRating>0);if(K.length>=3){let g=K.reduce((_,y)=>_+(y.userRating??0),0)/K.length;r.push({label:"Avg Your Rating",value:g.toFixed(1)})}let h=new Set;for(let g of e){let _=a.get(g.movieId);_&&h.add(Math.floor(_.year/10)*10)}if(h.size>=3){let g=[...h].sort((_,y)=>_-y);r.push({label:"Decade Span",value:`${g[0]}s\u2013${g[g.length-1]}s`})}let nt=e.filter(g=>{let _=a.get(g.movieId);return _&&_.directors.length>1}).length;nt>0&&r.push({label:"Co-directed Films",value:`${nt}`});let J=e.map(g=>a.get(g.movieId)).filter(g=>!!g&&g.voteAverage>0);if(J.length>=3){let g=J.reduce((_,y)=>_+y.voteAverage,0)/J.length;r.push({label:"Avg TMDb Rating",value:g.toFixed(1)})}let it=new Date().getFullYear(),ot=e.map(g=>a.get(g.movieId)).filter(g=>!!g).map(g=>it-g.year);if(ot.length>=3){let g=Math.round(ot.reduce((_,y)=>_+y,0)/ot.length);g>=10&&r.push({label:"Avg Film Age",value:`${g} years`})}if(V.length>=3){let g=0,_=0,y=0;for(let Z of V){let _t=a.get(Z.movieId);_t&&_t.voteAverage>0&&Z.userRating!=null&&(g+=Z.userRating,_+=_t.voteAverage,y++)}if(y>=3){let Z=g/y-_/y;Math.abs(Z)>=.3&&r.push({label:"Rating Bias",value:Z>0?`+${Z.toFixed(1)} vs TMDb`:`${Z.toFixed(1)} vs TMDb`})}}return r});watchTimeline=u(()=>{let e=new Map(this.catalog.movies().map(t=>[t.id,t]));return[...this.collectionService.watched()].sort((t,a)=>a.watchedAt-t.watchedAt).slice(0,20).map(t=>{let a=e.get(t.movieId),r=new Date(t.watchedAt);return{movieId:t.movieId,title:a?.title??"Unknown Film",dateLabel:r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),rating:t.userRating}})});tabs=["watchlist","watched","favorites","playlists","stats"];onTabKeydown(e){let t=this.tabs.indexOf(this.activeTab()),a=t;if(e.key==="ArrowRight")a=(t+1)%this.tabs.length;else if(e.key==="ArrowLeft")a=(t-1+this.tabs.length)%this.tabs.length;else if(e.key==="Home")a=0;else if(e.key==="End")a=this.tabs.length-1;else return;e.preventDefault(),this.activeTab.set(this.tabs[a]),e.currentTarget.querySelectorAll('[role="tab"]')[a]?.focus()}ngOnInit(){this.catalog.load(),this.titleService.setTitle("My Collection \u2014 BW Cinema");let e="Manage your personal collection \u2014 watchlist, watched history, and viewing stats.";this.metaService.updateTag({name:"description",content:e}),this.metaService.updateTag({property:"og:description",content:e}),this.metaService.updateTag({name:"twitter:description",content:e});let t=this.route.snapshot.queryParams.shared;if(t){this.isSharedView.set(!0);let a=t.split(","),r=()=>{if(this.catalog.loaded()){let d=this.catalog.movies();this.sharedMovies.set(a.map(s=>d.find(x=>x.id===s)).filter(s=>!!s))}else setTimeout(r,100)};r()}}shareCollection(){let e=this.currentMovies();if(e.length===0){this.notifications.show("No films to share","info");return}let t=e.map(r=>r.id).join(","),a=`${window.location.origin}/collection?shared=${t}`;navigator.clipboard.writeText(a).then(()=>{this.notifications.show("Share link copied to clipboard","success")}).catch(()=>{this.notifications.show("Failed to copy link","error")})}onSortChange(e){this.sortBy.set(e.target.value)}onRatingFilterChange(e){this.ratingFilter.set(parseInt(e.target.value,10))}applyQuery(e){let t=this.collectionQuery().toLowerCase().trim();return t?e.filter(a=>a.title.toLowerCase().includes(t)||a.directors.some(r=>r.toLowerCase().includes(t))||a.genres.some(r=>r.toLowerCase().includes(t))):e}applyFilters(e){let t=this.genreFilter(),a=this.decadeFilter(),r=e;if(t&&(r=r.filter(d=>d.genres.includes(t))),a){let d=parseInt(a,10);r=r.filter(s=>Math.floor(s.year/10)*10===d)}return r}applyRatingFilter(e){let t=this.ratingFilter();return t===0?e:t===-1?e.filter(a=>{let r=this.collectionService.watched().find(d=>d.movieId===a.id);return r&&r.userRating==null}):e.filter(a=>{let r=this.collectionService.watched().find(d=>d.movieId===a.id);return r&&r.userRating!=null&&r.userRating>=t})}exportCsv(){let e=this.currentMovies(),t=this.activeTab(),a=["Title","Year","Genres","Directors","Rating","Streamable"];t==="watched"&&a.push("Your Rating");let r=e.map(w=>{let M=[`"${w.title.replace(/"/g,'""')}"`,w.year,`"${w.genres.join(", ")}"`,`"${w.directors.join(", ")}"`,w.voteAverage||"",w.isStreamable?"Yes":"No"];if(t==="watched"){let S=this.collectionService.watched().find(b=>b.movieId===w.id);M.push(S?.userRating??"")}return M.join(",")}),d=[a.join(","),...r].join(`
`),s=new Blob([d],{type:"text/csv"}),x=URL.createObjectURL(s),f=document.createElement("a");f.href=x,f.download=`bw-cinema-${t}-${new Date().toISOString().slice(0,10)}.csv`,f.click(),URL.revokeObjectURL(x)}exportLetterboxd(){let e=this.activeTab()==="watched"?this.sortedWatched():this.sortedWatchlist(),t=this.activeTab(),a=["imdbID","Title","Year","Rating10"],r=e.map(w=>{let M=t==="watched"?this.collectionService.watched().find(S=>S.movieId===w.id):null;return[w.imdbId??"",`"${w.title.replace(/"/g,'""')}"`,w.year,M?.userRating??""].join(",")}),d=[a.join(","),...r].join(`
`),s=new Blob([d],{type:"text/csv"}),x=URL.createObjectURL(s),f=document.createElement("a");f.href=x,f.download=`letterboxd-${t}-${new Date().toISOString().slice(0,10)}.csv`,f.click(),URL.revokeObjectURL(x),this.notifications.show("Letterboxd CSV exported","success")}importLetterboxd(e){let t=e.target,a=t.files?.[0];if(!a)return;let r=new FileReader;r.onload=()=>{try{let s=r.result.split(`
`).filter(F=>F.trim());if(s.length<2){this.notifications.show("CSV file is empty","error");return}let x=s[0].toLowerCase(),f=x.includes("imdbid"),w=x.includes("title");if(!f&&!w){this.notifications.show("CSV must have imdbID or Title column","error");return}let M=this.parseCsvRow(s[0]),S=M.findIndex(F=>F.toLowerCase().trim()==="imdbid"),b=M.findIndex(F=>F.toLowerCase().trim()==="title"),T=M.findIndex(F=>F.toLowerCase().trim()==="year"),O=M.findIndex(F=>F.toLowerCase().trim().includes("rating")),N=this.catalog.movies(),B=0;for(let F=1;F<s.length;F++){let L=this.parseCsvRow(s[F]);if(L.length===0)continue;let Y;if(S>=0&&L[S]&&(Y=N.find(V=>V.imdbId===L[S].trim())),!Y&&b>=0&&L[b]){let V=L[b].trim().toLowerCase(),j=T>=0?parseInt(L[T],10):NaN;Y=N.find(z=>z.title.toLowerCase()===V&&(isNaN(j)||z.year===j))}if(Y&&!this.collectionService.isWatched(Y.id)){let V=O>=0?parseFloat(L[O]):NaN;this.collectionService.markWatched(Y.id,isNaN(V)?null:Math.round(V*2)/2),B++}}this.notifications.show(`Imported ${B} film${B!==1?"s":""}`,"success")}catch{this.notifications.show("Failed to parse CSV file","error")}t.value=""},r.readAsText(a)}parseCsvRow(e){let t=[],a="",r=!1;for(let d=0;d<e.length;d++){let s=e[d];r?s==='"'?e[d+1]==='"'?(a+='"',d++):r=!1:a+=s:s==='"'?r=!0:s===","?(t.push(a),a=""):a+=s}return t.push(a),t}exportBackup(){let e={watchlist:this.collectionService.watchlist(),watched:this.collectionService.watched(),favorites:this.collectionService.favorites(),exportedAt:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`bw-cinema-backup-${new Date().toISOString().slice(0,10)}.json`,r.click(),URL.revokeObjectURL(a),this.notifications.show("Backup downloaded","success")}importBackup(e){let t=e.target,a=t.files?.[0];if(!a)return;let r=new FileReader;r.onload=()=>{try{let d=JSON.parse(r.result);if(d.watchlist&&Array.isArray(d.watchlist))for(let s of d.watchlist)s.movieId&&!this.collectionService.isInWatchlist(s.movieId)&&!this.collectionService.isWatched(s.movieId)&&this.collectionService.addToWatchlist(s.movieId);if(d.watched&&Array.isArray(d.watched))for(let s of d.watched)s.movieId&&!this.collectionService.isWatched(s.movieId)&&this.collectionService.markWatched(s.movieId,s.userRating??null);if(d.favorites&&Array.isArray(d.favorites))for(let s of d.favorites)typeof s=="string"&&!this.collectionService.isFavorite(s)&&this.collectionService.toggleFavorite(s);this.notifications.show("Collection restored successfully","success")}catch{this.notifications.show("Invalid backup file","error")}t.value=""},r.readAsText(a)}sortMovies(e,t){let a=this.sortBy(),r=t==="watchlist"?this.collectionService.watchlist():this.collectionService.watched(),d=new Map(r.map(s=>[s.movieId,"addedAt"in s?s.addedAt:s.watchedAt]));return[...e].sort((s,x)=>{switch(a){case"added-desc":return(d.get(x.id)??0)-(d.get(s.id)??0);case"added-asc":return(d.get(s.id)??0)-(d.get(x.id)??0);case"title-asc":return s.title.localeCompare(x.title);case"title-desc":return x.title.localeCompare(s.title);case"rating-desc":return x.voteAverage-s.voteAverage;case"year-desc":return x.year-s.year;default:return 0}})}computeStats(e){let t=new Map;for(let d of e)t.set(d,(t.get(d)??0)+1);let a=[...t.entries()].sort((d,s)=>s[1]-d[1]).slice(0,8),r=a[0]?.[1]??1;return a.map(([d,s])=>({name:d,count:s,pct:s/r*100}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ct({type:n,selectors:[["app-collection"]],decls:3,vars:1,consts:[[1,"collection","container"],[1,"collection__shared-info"],[3,"movies"],[1,"collection__empty"],[1,"collection__empty-title"],[1,"collection__empty-text"],["routerLink","/browse",1,"btn-primary"],["role","alert",1,"catalog-error"],[3,"click"],[1,"collection__title-row"],["routerLink","/wrapped",1,"collection__wrapped-link"],[1,"collection__controls"],["role","tablist",1,"collection__tabs",3,"keydown"],["role","tab",1,"collection__tab",3,"click"],[1,"collection__count"],[1,"collection__new-dot",3,"title"],[1,"collection__search"],[1,"collection__actions"],[1,"collection__backup"],["role","tabpanel","aria-live","polite"],["role","tabpanel",1,"playlists"],["role","tabpanel",1,"stats"],["type","search","placeholder","Search in collection...","autocomplete","off",1,"collection__search-input",3,"input","value"],[1,"collection__filter-select",3,"change"],["value",""],[3,"value"],[1,"collection__rating-filter"],[1,"collection__rating-filter",3,"change"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","-1"],["for","collection-sort",1,"sr-only"],["id","collection-sort",1,"collection__sort",3,"change"],["value","added-desc","selected",""],["value","added-asc"],["value","title-asc"],["value","title-desc"],["value","rating-desc"],["value","year-desc"],[3,"modeChange","mode"],[1,"btn-ghost","collection__export",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"btn-ghost","collection__export","collection__import-label"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["type","file","accept",".csv",1,"sr-only",3,"change"],[1,"btn-ghost","collection__backup-btn",3,"click"],[1,"btn-ghost","collection__backup-btn","collection__restore-label"],["type","file","accept",".json",1,"sr-only",3,"change"],[1,"playlists__create"],["type","text","placeholder","New playlist name...",1,"playlists__input",3,"input","keydown.enter","value"],[1,"btn-secondary",3,"click","disabled"],[1,"playlists__card"],[1,"playlists__header"],["type","text",1,"playlists__rename-input",3,"value"],[1,"playlists__name"],[1,"playlists__count"],["aria-label","Delete playlist",1,"btn-ghost","playlists__delete",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"playlists__movies"],["type","text",1,"playlists__rename-input",3,"input","keydown.enter","blur","value"],[1,"playlists__name",3,"click"],[1,"playlists__movie",3,"routerLink"],["loading","lazy",3,"src","alt"],[1,"playlists__movie-placeholder"],[1,"stats__overview"],[1,"stats__card"],[1,"stats__card-value"],[1,"stats__card-label"],[1,"stats__card","stats__card--highlight"],[1,"stats__milestone"],[1,"achievements"],[1,"challenges"],[1,"challenges__grid"],[1,"challenges__card",3,"challenges__card--done"],[1,"stats__section"],[1,"stats__sections"],[1,"stats__bars"],[1,"stats__bar-row",3,"routerLink"],[1,"stats__section","stats__lang-section"],[1,"stats__section","stats__rating-dist"],[1,"stats__section","stats__trends"],[1,"heatmap"],[1,"film-tl"],[1,"gaps"],[1,"insights"],[1,"timeline"],[1,"stats__card-value",2,"font-size","0.75em"],[1,"stats__card-value",2,"font-size","0.85em"],[1,"stats__milestone-icon"],[1,"stats__milestone-info"],[1,"stats__milestone-name"],[1,"stats__milestone-desc"],[1,"stats__milestone-bar-track"],[1,"stats__milestone-bar-fill"],[1,"stats__milestone-progress"],[1,"achievements__grid"],[1,"achievements__badge",3,"achievements__badge--earned"],[1,"achievements__badge"],[1,"achievements__icon"],[1,"achievements__name"],[1,"achievements__desc"],[1,"challenges__card"],[1,"challenges__icon"],[1,"challenges__info"],[1,"challenges__name"],[1,"challenges__desc"],[1,"challenges__bar-track"],[1,"challenges__bar-fill"],[1,"challenges__progress"],[1,"stats__bar-row"],[1,"stats__bar-label","stats__bar-label--link",3,"routerLink"],[1,"stats__bar-track"],[1,"stats__bar-fill"],[1,"stats__bar-count"],[1,"stats__bar-label","stats__bar-label--link"],[1,"stats__bar-label"],[1,"stats__trend-chart"],[1,"stats__trend-col"],[1,"stats__trend-count"],[1,"stats__trend-bar"],[1,"stats__trend-label"],[1,"heatmap__header"],[1,"heatmap__years"],[1,"heatmap__scroll"],[1,"heatmap__grid"],[1,"heatmap__col"],[1,"heatmap__legend"],[1,"heatmap__cell","heatmap__cell--l0"],[1,"heatmap__cell","heatmap__cell--l1"],[1,"heatmap__cell","heatmap__cell--l2"],[1,"heatmap__cell","heatmap__cell--l3"],[1,"heatmap__year-btn",3,"click"],[1,"heatmap__year-btn",3,"heatmap__year-btn--active"],[1,"heatmap__cell",3,"heatmap__cell--l1","heatmap__cell--l2","heatmap__cell--l3","heatmap__cell--future","title"],[1,"heatmap__cell",3,"title"],[1,"film-tl__scroll"],[1,"film-tl__track"],[1,"film-tl__line"],[1,"film-tl__point",3,"left"],[1,"film-tl__point"],[1,"film-tl__marker",3,"title"],[1,"film-tl__year"],[1,"gaps__desc"],[1,"gaps__grid"],[1,"gaps__chip",3,"routerLink"],[1,"gaps__chip-label"],[1,"gaps__chip-count"],[1,"insights__grid"],[1,"insights__card"],[1,"insights__value"],[1,"insights__label"],[1,"timeline__list"],[1,"timeline__item"],[1,"timeline__dot"],[1,"timeline__content"],[1,"timeline__title",3,"routerLink"],[1,"timeline__date"],[1,"timeline__rating"]],template:function(t,a){t&1&&(i(0,"div",0),p(1,zt,6,3)(2,Bn,2,1),o()),t&2&&(l(),C(a.isSharedView()?1:2))},dependencies:[yt,Et,Pt,Ot,It],styles:['.collection[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.collection__shared-info[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 var(--space-xl)}.collection__controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-xl)}.collection__title-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:space-between}.collection__wrapped-link[_ngcontent-%COMP%]{font:600 .85rem var(--font-body);color:var(--accent-gold)}.collection__tabs[_ngcontent-%COMP%]{display:flex;gap:2px;background:var(--bg-surface);border-radius:var(--radius-lg);padding:4px;width:fit-content}.collection__tab[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-tertiary);font-size:.95rem;font-weight:600;padding:var(--space-sm) var(--space-xl);cursor:pointer;border-radius:var(--radius);display:flex;align-items:center;gap:var(--space-sm);min-height:40px}.collection__tab[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.collection__tab--active[_ngcontent-%COMP%]{color:var(--accent-gold);background:var(--bg-raised)}.collection__count[_ngcontent-%COMP%]{font-size:.75rem;background:var(--accent-gold-dim);color:var(--accent-gold);padding:1px 8px;border-radius:10px}.collection__new-dot[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:50%;background:#198754;vertical-align:super}.collection__actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);align-items:center}.collection__sort[_ngcontent-%COMP%]{min-width:160px;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);background:var(--bg-surface)}.collection__export[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:.85rem}.collection__import-label[_ngcontent-%COMP%], .collection__restore-label[_ngcontent-%COMP%]{cursor:pointer}.collection__search[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm);width:100%}.collection__search-input[_ngcontent-%COMP%], .playlists__input[_ngcontent-%COMP%]{flex:1;max-width:320px;padding:var(--space-sm) var(--space-md);background:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border);border-radius:var(--radius-lg);font-size:.9rem}.collection__search-input[_ngcontent-%COMP%]:focus, .playlists__input[_ngcontent-%COMP%]:focus{border-color:var(--accent-gold);outline:none}.collection__filter-select[_ngcontent-%COMP%], .collection__rating-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);background:var(--bg-surface);border:1px solid var(--border);color:var(--text-primary);font-size:.85rem;min-width:120px}.collection__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) var(--space-lg)}.collection__empty-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.3rem;margin:0 0 var(--space-sm)}.collection__empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-lg)}.stats__overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:var(--space-md);margin-bottom:var(--space-2xl)}.stats__card[_ngcontent-%COMP%], .insights__card[_ngcontent-%COMP%], .achievements__badge[_ngcontent-%COMP%], .challenges__card[_ngcontent-%COMP%], .playlists__card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md)}.stats__card[_ngcontent-%COMP%]{padding:var(--space-lg);text-align:center}.stats__card--highlight[_ngcontent-%COMP%], .achievements__badge--earned[_ngcontent-%COMP%], .challenges__card--done[_ngcontent-%COMP%]{border-color:var(--accent-gold);background:var(--accent-gold-dim)}.stats__card-value[_ngcontent-%COMP%], .insights__value[_ngcontent-%COMP%]{display:block;font-family:var(--font-heading);font-weight:700;color:var(--accent-gold);margin-bottom:4px}.stats__card-value[_ngcontent-%COMP%]{font-size:2rem}.stats__card-label[_ngcontent-%COMP%], .insights__label[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;color:var(--text-tertiary)}.stats__sections[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-xl)}.stats__section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .achievements[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .challenges[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.stats__bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.stats__bar-row[_ngcontent-%COMP%], .playlists__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.stats__bar-label[_ngcontent-%COMP%]{min-width:80px;font-size:.85rem;color:var(--text-secondary);text-align:right}.stats__bar-track[_ngcontent-%COMP%], .stats__milestone-bar-track[_ngcontent-%COMP%], .challenges__bar-track[_ngcontent-%COMP%]{height:8px;background:var(--bg-raised);border-radius:4px}.stats__bar-fill[_ngcontent-%COMP%], .stats__milestone-bar-fill[_ngcontent-%COMP%], .challenges__bar-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-gold)}.stats__bar-track[_ngcontent-%COMP%]{flex:1}.stats__bar-count[_ngcontent-%COMP%]{min-width:24px;font-size:.8rem;color:var(--text-tertiary)}.stats__bar-label--link[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.stats__bar-label--link[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.collection__backup[_ngcontent-%COMP%], .playlists__create[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.collection__backup[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.collection__backup-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:var(--space-xs) var(--space-md)}.collection__restore-label[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.stats__lang-section[_ngcontent-%COMP%], .stats__rating-dist[_ngcontent-%COMP%]{margin-top:var(--space-xl);max-width:500px}.stats__milestone[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius-lg);margin-bottom:var(--space-xl)}.stats__milestone-icon[_ngcontent-%COMP%], .challenges__icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.stats__milestone-info[_ngcontent-%COMP%], .challenges__info[_ngcontent-%COMP%]{flex:1;min-width:0}.stats__milestone-name[_ngcontent-%COMP%], .challenges__name[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:.9rem}.stats__milestone-desc[_ngcontent-%COMP%], .challenges__desc[_ngcontent-%COMP%]{display:block;font-size:.75rem}.stats__milestone-desc[_ngcontent-%COMP%]{color:var(--text-secondary)}.challenges__desc[_ngcontent-%COMP%]{color:var(--text-tertiary)}.stats__milestone-bar-track[_ngcontent-%COMP%]{width:80px;height:6px}.stats__milestone-progress[_ngcontent-%COMP%], .challenges__progress[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary)}.stats__milestone-progress[_ngcontent-%COMP%]{font-weight:600;white-space:nowrap}.achievements__grid[_ngcontent-%COMP%], .challenges__grid[_ngcontent-%COMP%]{display:grid;gap:var(--space-sm)}.achievements__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.achievements__badge[_ngcontent-%COMP%]{text-align:center;opacity:.35}.achievements__badge--earned[_ngcontent-%COMP%]{opacity:1}.achievements__icon[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:var(--space-xs)}.achievements__name[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;margin-bottom:2px}.achievements__desc[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.stats__trends[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.stats__trend-chart[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);align-items:flex-end;height:160px}.stats__trend-col[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;justify-content:flex-end}.stats__trend-count[_ngcontent-%COMP%]{font-size:.7rem}.stats__trend-bar[_ngcontent-%COMP%]{width:100%;max-width:40px;min-height:4px;background:var(--accent-gold);border-radius:3px 3px 0 0}.stats__trend-label[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);white-space:nowrap}.playlists__create[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.playlists__input[_ngcontent-%COMP%]{font-size:.95rem}.playlists__card[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.playlists__header[_ngcontent-%COMP%]{gap:var(--space-md);margin-bottom:var(--space-sm)}.playlists__name[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;cursor:pointer}.playlists__name[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.playlists__rename-input[_ngcontent-%COMP%]{font:700 1.1rem var(--font-body);background:var(--bg-raised);border:1px solid var(--accent-gold);border-radius:var(--radius);padding:2px 8px}.playlists__count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.playlists__delete[_ngcontent-%COMP%]{margin-left:auto;color:var(--text-tertiary);width:36px;height:36px;padding:0;display:flex;align-items:center;justify-content:center}.playlists__delete[_ngcontent-%COMP%]:hover{color:#e53e3e}.playlists__movies[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);overflow-x:auto}.playlists__movie[_ngcontent-%COMP%]{flex:0 0 60px}.playlists__movie[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius-sm)}.playlists__movie-placeholder[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;color:var(--text-tertiary)}.challenges[_ngcontent-%COMP%], .achievements[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.challenges__grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}.challenges__card[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);align-items:flex-start}.challenges__name[_ngcontent-%COMP%]{margin-bottom:2px}.challenges__desc[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.challenges__bar-track[_ngcontent-%COMP%]{height:6px}.challenges__progress[_ngcontent-%COMP%]{font-size:.7rem}.heatmap__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:var(--space-sm);margin-bottom:var(--space-md)}.heatmap__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.heatmap__years[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.heatmap__year-btn[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;background:var(--bg-raised);border:1px solid transparent;color:var(--text-tertiary);font:600 .75rem var(--font-body);cursor:pointer}.heatmap__year-btn[_ngcontent-%COMP%]:hover, .heatmap__year-btn--active[_ngcontent-%COMP%]{color:var(--accent-gold);border-color:var(--accent-gold)}.heatmap__year-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim)}.heatmap[_ngcontent-%COMP%], .film-tl[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]{margin-top:var(--space-2xl)}.heatmap[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.heatmap__scroll[_ngcontent-%COMP%], .film-tl__scroll[_ngcontent-%COMP%]{overflow-x:auto}.heatmap__grid[_ngcontent-%COMP%], .heatmap__col[_ngcontent-%COMP%]{display:flex;gap:2px}.heatmap__col[_ngcontent-%COMP%]{flex-direction:column}.heatmap__cell[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px;background:var(--bg-raised)}.heatmap__cell--l1[_ngcontent-%COMP%]{background:#d4af374d}.heatmap__cell--l2[_ngcontent-%COMP%]{background:#d4af3799}.heatmap__cell--l3[_ngcontent-%COMP%]{background:var(--accent-gold)}.heatmap__cell--future[_ngcontent-%COMP%]{background:transparent}.heatmap__legend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;margin-top:var(--space-sm);justify-content:flex-end;font-size:.65rem;color:var(--text-tertiary)}.heatmap__legend[_ngcontent-%COMP%]   .heatmap__cell[_ngcontent-%COMP%]{width:10px;height:10px}.film-tl[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.film-tl__scroll[_ngcontent-%COMP%]{padding-bottom:var(--space-md)}.film-tl__track[_ngcontent-%COMP%]{position:relative;min-width:min(600px,100%);height:80px;margin:0 var(--space-md)}.film-tl__line[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;height:2px;background:var(--border)}.film-tl__point[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center}.film-tl__marker[_ngcontent-%COMP%]{width:8px;background:var(--accent-gold);border-radius:4px;margin-bottom:4px}.film-tl__year[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);white-space:nowrap;margin-top:4px}.timeline__list[_ngcontent-%COMP%]{position:relative;padding-left:var(--space-lg)}.gaps[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.gaps[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.gaps__desc[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);margin:0 0 var(--space-md)}.gaps__grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.gaps__chip[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;padding:var(--space-sm) var(--space-md);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:var(--text-secondary)}.gaps__chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.gaps__chip-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600}.gaps__chip-count[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.insights[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.insights__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--space-md);margin-top:var(--space-md)}.insights__card[_ngcontent-%COMP%]{text-align:center}.insights__value[_ngcontent-%COMP%]{font-size:1.2rem}.insights__label[_ngcontent-%COMP%]{font-size:.75rem}.timeline__list[_ngcontent-%COMP%]:before{content:"";position:absolute;left:6px;top:4px;bottom:4px;width:2px;background:var(--border)}.timeline__item[_ngcontent-%COMP%]{position:relative;display:flex;gap:var(--space-md);padding-bottom:var(--space-md)}.timeline__dot[_ngcontent-%COMP%]{position:absolute;left:calc(-1 * var(--space-lg) + 2px);top:4px;width:10px;height:10px;border-radius:50%;background:var(--accent-gold);border:2px solid var(--bg-deep)}.timeline__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.timeline__title[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;font-size:.95rem;text-decoration:none}.timeline__title[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.timeline__date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.timeline__rating[_ngcontent-%COMP%]{font-size:.8rem;color:var(--accent-gold)}@media(max-width:768px){.collection__controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.stats__sections[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats__overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:480px){.collection__tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:nowrap;max-width:100%;scrollbar-width:none}.collection__tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.collection__tab[_ngcontent-%COMP%]{flex-shrink:0;padding:var(--space-sm) var(--space-md);font-size:.85rem}.stats__overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}.stats__overview[_ngcontent-%COMP%]   .stats__card[_ngcontent-%COMP%]{padding:var(--space-md)}.collection__actions[_ngcontent-%COMP%]{flex-wrap:wrap}.challenges__grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}'],changeDetection:0})};export{Dt as CollectionComponent};
