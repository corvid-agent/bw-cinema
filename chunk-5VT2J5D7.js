import{a as Ee}from"./chunk-MAZ6WOLX.js";import{a as Se,b as Te}from"./chunk-RH4PY6SG.js";import{a as Me}from"./chunk-SGVJUPTJ.js";import{a as we}from"./chunk-5BGZ6L4W.js";import{a as ye}from"./chunk-7G6M72YL.js";import{$ as v,A as X,Ba as Ce,Ca as ve,Da as ue,Ea as he,F as V,Ha as q,K as me,Ka as b,O as r,R as pe,Z as H,_ as C,aa as ge,ab as fe,ba as ee,ca as F,da as N,db as xe,ea as k,fa as o,ga as a,ha as P,la as A,lb as be,na as O,pa as _,ta as Y,ua as W,v as Q,wa as c,x as T,xa as h,y as E,ya as B,z as J,za as te}from"./chunk-TOYJLBVG.js";var ke=n=>["/movie",n],De=n=>["/director",n],Ie=n=>["/genre",n],Fe=n=>["/decade",n],ne=(n,t)=>t.id,Z=(n,t)=>t.name,de=(n,t)=>t.label,Ne=(n,t)=>t.date,Re=(n,t)=>t.year,Ve=(n,t)=>t.movieId;function Ae(n,t){if(n&1&&P(0,"app-movie-grid",2),n&2){let e=_(2);k("movies",e.sharedMovies())}}function Le(n,t){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No films found"),a(),o(3,"p",5),c(4,"The shared link may be invalid or the films are no longer in our catalog."),a(),o(5,"a",6),c(6,"Browse Films"),a()())}function $e(n,t){if(n&1&&(o(0,"h1"),c(1,"Shared Collection"),a(),o(2,"p",1),c(3),a(),C(4,Ae,1,1,"app-movie-grid",2)(5,Le,7,0,"div",3)),n&2){let e=_();r(3),te("",e.sharedMovies().length," film",e.sharedMovies().length!==1?"s":""," in this shared collection"),r(),v(e.sharedMovies().length>0?4:5)}}function ze(n,t){n&1&&P(0,"app-loading-spinner")}function Ye(n,t){if(n&1&&(o(0,"span",10),c(1),a()),n&2){let e=_(3);r(),h(e.watchlistMovies().length)}}function We(n,t){if(n&1&&P(0,"span",11),n&2){let e=_(3);k("title",he("",e.newThisWeek()," added this week"))}}function Be(n,t){if(n&1&&(o(0,"span",10),c(1),a()),n&2){let e=_(3);r(),h(e.watchedMovies().length)}}function je(n,t){if(n&1&&(o(0,"span",10),c(1),a()),n&2){let e=_(3);r(),h(e.favoriteMovies().length)}}function Ge(n,t){if(n&1&&(o(0,"span",10),c(1),a()),n&2){let e=_(3);r(),h(e.collectionService.playlists().length)}}function Ue(n,t){if(n&1&&(o(0,"option",21),c(1),a()),n&2){let e=t.$implicit;k("value",e),r(),h(e)}}function He(n,t){if(n&1&&(o(0,"option",21),c(1),a()),n&2){let e=t.$implicit;k("value",e),r(),B("",e,"s")}}function qe(n,t){if(n&1){let e=A();o(0,"select",23),O("change",function(i){T(e);let s=_(4);return E(s.onRatingFilterChange(i))}),o(1,"option",24),c(2,"All Ratings"),a(),o(3,"option",25),c(4,"1+ Stars"),a(),o(5,"option",26),c(6,"2+ Stars"),a(),o(7,"option",27),c(8,"3+ Stars"),a(),o(9,"option",28),c(10,"4+ Stars"),a(),o(11,"option",29),c(12,"5 Stars"),a(),o(13,"option",30),c(14,"Unrated"),a()()}}function Qe(n,t){if(n&1){let e=A();o(0,"div",12)(1,"input",18),O("input",function(i){T(e);let s=_(3);return E(s.collectionQuery.set(i.target.value))}),a(),o(2,"select",19),O("change",function(i){T(e);let s=_(3);return E(s.genreFilter.set(i.target.value))}),o(3,"option",20),c(4,"All Genres"),a(),F(5,Ue,2,2,"option",21,ee),a(),o(7,"select",19),O("change",function(i){T(e);let s=_(3);return E(s.decadeFilter.set(i.target.value))}),o(8,"option",20),c(9,"All Decades"),a(),F(10,He,2,2,"option",21,ee),a(),C(12,qe,15,0,"select",22),a()}if(n&2){let e=_(3);r(),k("value",e.collectionQuery()),r(4),N(e.collectionGenres()),r(5),N(e.collectionDecades()),r(2),v(e.activeTab()==="watched"?12:-1)}}function Je(n,t){if(n&1){let e=A();o(0,"button",40),O("click",function(){T(e);let i=_(4);return E(i.exportCsv())}),J(),o(1,"svg",41),P(2,"path",42)(3,"polyline",43)(4,"line",44),a(),c(5," CSV "),a(),X(),o(6,"button",40),O("click",function(){T(e);let i=_(4);return E(i.exportLetterboxd())}),J(),o(7,"svg",41),P(8,"path",42)(9,"polyline",43)(10,"line",44),a(),c(11," Letterboxd "),a(),X(),o(12,"label",45),J(),o(13,"svg",41),P(14,"path",42)(15,"polyline",46)(16,"line",47),a(),c(17," Import "),X(),o(18,"input",48),O("change",function(i){T(e);let s=_(4);return E(s.importLetterboxd(i))}),a()()}}function Ze(n,t){if(n&1){let e=A();o(0,"div",13)(1,"label",31),c(2,"Sort by"),a(),o(3,"select",32),O("change",function(i){T(e);let s=_(3);return E(s.onSortChange(i))}),o(4,"option",33),c(5,"Recently Added"),a(),o(6,"option",34),c(7,"Oldest Added"),a(),o(8,"option",35),c(9,"Title A\u2013Z"),a(),o(10,"option",36),c(11,"Title Z\u2013A"),a(),o(12,"option",37),c(13,"Highest Rated"),a(),o(14,"option",38),c(15,"Newest Films"),a()(),C(16,Je,19,0),o(17,"app-view-toggle",39),ue("modeChange",function(i){T(e);let s=_(3);return ve(s.viewMode,i)||(s.viewMode=i),E(i)}),a()()}if(n&2){let e=_(3);r(16),v(e.currentMovies().length>0?16:-1),r(),Ce("mode",e.viewMode)}}function Ke(n,t){if(n&1){let e=A();o(0,"div",14)(1,"button",49),O("click",function(){T(e);let i=_(3);return E(i.shareCollection())}),c(2,"Share"),a()()}}function Xe(n,t){if(n&1){let e=A();o(0,"div",14)(1,"button",49),O("click",function(){T(e);let i=_(3);return E(i.exportBackup())}),c(2,"Backup"),a(),o(3,"label",50),c(4," Restore "),o(5,"input",51),O("change",function(i){T(e);let s=_(3);return E(s.importBackup(i))}),a()()()}}function et(n,t){if(n&1&&P(0,"app-movie-grid",2),n&2){let e=_(5);k("movies",e.sortedWatchlist())}}function tt(n,t){if(n&1&&P(0,"app-movie-list",2),n&2){let e=_(5);k("movies",e.sortedWatchlist())}}function nt(n,t){if(n&1&&C(0,et,1,1,"app-movie-grid",2)(1,tt,1,1,"app-movie-list",2),n&2){let e=_(4);v(e.viewMode()==="grid"?0:1)}}function it(n,t){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No films in your watchlist"),a(),o(3,"p",5),c(4,"Browse films and add ones you'd like to watch later."),a(),o(5,"a",6),c(6,"Browse Films"),a()())}function ot(n,t){if(n&1&&(o(0,"div",15),C(1,nt,2,1)(2,it,7,0,"div",3),a()),n&2){let e=_(3);r(),v(e.sortedWatchlist().length>0?1:2)}}function at(n,t){if(n&1&&P(0,"app-movie-grid",2),n&2){let e=_(5);k("movies",e.sortedWatched())}}function lt(n,t){if(n&1&&P(0,"app-movie-list",2),n&2){let e=_(5);k("movies",e.sortedWatched())}}function rt(n,t){if(n&1&&C(0,at,1,1,"app-movie-grid",2)(1,lt,1,1,"app-movie-list",2),n&2){let e=_(4);v(e.viewMode()==="grid"?0:1)}}function ct(n,t){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No films watched yet"),a(),o(3,"p",5),c(4,"Films you mark as watched will appear here."),a(),o(5,"a",6),c(6,"Discover Films"),a()())}function st(n,t){if(n&1&&(o(0,"div",15),C(1,rt,2,1)(2,ct,7,0,"div",3),a()),n&2){let e=_(3);r(),v(e.sortedWatched().length>0?1:2)}}function dt(n,t){if(n&1&&P(0,"app-movie-grid",2),n&2){let e=_(5);k("movies",e.sortedFavorites())}}function _t(n,t){if(n&1&&P(0,"app-movie-list",2),n&2){let e=_(5);k("movies",e.sortedFavorites())}}function mt(n,t){if(n&1&&C(0,dt,1,1,"app-movie-grid",2)(1,_t,1,1,"app-movie-list",2),n&2){let e=_(4);v(e.viewMode()==="grid"?0:1)}}function pt(n,t){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No favorite films yet"),a(),o(3,"p",5),c(4,"Tap the heart icon on any film to add it to your favorites."),a(),o(5,"a",6),c(6,"Browse Films"),a()())}function gt(n,t){if(n&1&&(o(0,"div",15),C(1,mt,2,1)(2,pt,7,0,"div",3),a()),n&2){let e=_(3);r(),v(e.sortedFavorites().length>0?1:2)}}function Ct(n,t){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No playlists yet"),a(),o(3,"p",5),c(4,"Create a playlist to organize your favorite films into custom lists."),a()())}function vt(n,t){if(n&1){let e=A();o(0,"input",64),O("input",function(i){T(e);let s=_(6);return E(s.editPlaylistName.set(i.target.value))})("keydown.enter",function(){T(e);let i=_().$implicit,s=_(5);return E(s.saveRename(i.id))})("blur",function(){T(e);let i=_().$implicit,s=_(5);return E(s.saveRename(i.id))}),a()}if(n&2){let e=_(6);k("value",e.editPlaylistName())}}function ut(n,t){if(n&1){let e=A();o(0,"h3",65),O("click",function(){T(e);let i=_().$implicit,s=_(5);return E(s.startRename(i))}),c(1),a()}if(n&2){let e=_().$implicit;r(),h(e.name)}}function ht(n,t){if(n&1&&P(0,"img",67),n&2){let e=_().$implicit;k("src",e.posterUrl,me)("alt",e.title)}}function ft(n,t){if(n&1&&(o(0,"div",68),c(1),a()),n&2){let e=_().$implicit;r(),h(e.title[0])}}function xt(n,t){if(n&1&&(o(0,"a",66),C(1,ht,1,2,"img",67)(2,ft,2,1,"div",68),a()),n&2){let e=t.$implicit;k("routerLink",q(2,ke,e.id)),r(),v(e.posterUrl?1:2)}}function bt(n,t){if(n&1&&(o(0,"div",63),F(1,xt,3,4,"a",66,ne),a()),n&2){let e=_().$implicit,l=_(5);r(),N(l.playlistMovies(e.id))}}function wt(n,t){if(n&1){let e=A();o(0,"div",55)(1,"div",56),C(2,vt,1,1,"input",57)(3,ut,2,1,"h3",58),o(4,"span",59),c(5),a(),o(6,"button",60),O("click",function(){let i=T(e).$implicit,s=_(5);return E(s.deletePlaylist(i.id))}),J(),o(7,"svg",41),P(8,"polyline",61)(9,"path",62),a()()(),C(10,bt,3,0,"div",63),a()}if(n&2){let e=t.$implicit,l=_(5);r(2),v(l.editingPlaylistId()===e.id?2:3),r(3),B("",e.movieIds.length," films"),r(5),v(l.playlistMovies(e.id).length>0?10:-1)}}function yt(n,t){if(n&1&&F(0,wt,11,3,"div",55,ne),n&2){let e=_(4);N(e.collectionService.playlists())}}function Mt(n,t){if(n&1){let e=A();o(0,"div",16)(1,"div",52)(2,"input",53),O("input",function(i){T(e);let s=_(3);return E(s.newPlaylistName.set(i.target.value))})("keydown.enter",function(){T(e);let i=_(3);return E(i.createPlaylist())}),a(),o(3,"button",54),O("click",function(){T(e);let i=_(3);return E(i.createPlaylist())}),c(4,"Create"),a()(),C(5,Ct,5,0,"div",3)(6,yt,2,0),a()}if(n&2){let e=_(3);r(2),k("value",e.newPlaylistName()),r(),k("disabled",!e.newPlaylistName().trim()),r(2),v(e.collectionService.playlists().length===0?5:6)}}function St(n,t){n&1&&(o(0,"div",3)(1,"p",4),c(2,"No stats yet"),a(),o(3,"p",5),c(4,"Watch some films to see your viewing statistics."),a(),o(5,"a",6),c(6,"Discover Films"),a()())}function Tt(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Languages Explored"),a()()),n&2){let e=_(5);r(2),h(e.uniqueLanguages())}}function Et(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Avg Film Age (yrs)"),a()()),n&2){let e=_(5);r(2),h(e.watchedAvgFilmAge())}}function Pt(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Unique Directors"),a()()),n&2){let e=_(5);r(2),h(e.watchedDirectorCount())}}function kt(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Non-English Films"),a()()),n&2){let e=_(5);r(2),h(e.watchedNonEnglishCount())}}function Ot(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Silent-Era Films"),a()()),n&2){let e=_(5);r(2),h(e.watchedSilentEraCount())}}function Dt(n,t){n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Median Year"),a()()),n&2&&(r(2),h(t))}function It(n,t){n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Avg. Year"),a()()),n&2&&(r(2),h(t))}function Ft(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Co-directed"),a()()),n&2){let e=_(5);r(2),h(e.watchedCoDirectedCount())}}function Nt(n,t){n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Avg Title Length"),a()()),n&2&&(r(2),h(t))}function Rt(n,t){n&1&&(o(0,"div",70)(1,"span",91),c(2),a(),o(3,"span",72),c(4,"Longest Title"),a()()),n&2&&(r(2),h(t))}function Vt(n,t){n&1&&(o(0,"div",70)(1,"span",92),c(2),a(),o(3,"span",72),c(4,"Shortest Title"),a()()),n&2&&(r(2),h(t))}function At(n,t){if(n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Rated 8.0+"),a()()),n&2){let e=_(5);r(2),h(e.watchedHighlyRatedCount())}}function Lt(n,t){n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Streamable"),a()()),n&2&&(r(2),B("",t,"%"))}function $t(n,t){n&1&&(o(0,"div",70)(1,"span",71),c(2),a(),o(3,"span",72),c(4,"Median Rating"),a()()),n&2&&(r(2),h(t))}function zt(n,t){if(n&1&&(o(0,"div",74)(1,"span",93),c(2),a(),o(3,"div",94)(4,"span",95),c(5),a(),o(6,"span",96),c(7),a()(),o(8,"div",97),P(9,"div",98),a(),o(10,"span",99),c(11),a()()),n&2){let e=t;r(2),h(e.icon),r(3),h(e.name),r(2),B("",e.remaining," more to go"),r(2),Y("width",e.pct,"%"),r(2),te("",e.current,"/",e.target)}}function Yt(n,t){if(n&1&&(o(0,"div",102)(1,"span",103),c(2),a(),o(3,"span",104),c(4),a(),o(5,"span",105),c(6),a()()),n&2){let e=t.$implicit;W("achievements__badge--earned",e.earned),r(2),h(e.icon),r(2),h(e.name),r(2),h(e.description)}}function Wt(n,t){if(n&1&&(o(0,"section",75)(1,"h3"),c(2,"Achievements"),a(),o(3,"div",100),F(4,Yt,7,5,"div",101,ne),a()()),n&2){let e=_(5);r(4),N(e.achievements())}}function Bt(n,t){if(n&1&&(o(0,"div",106)(1,"span",107),c(2),a(),o(3,"div",108)(4,"span",109),c(5),a(),o(6,"span",110),c(7),a(),o(8,"div",111),P(9,"div",112),a(),o(10,"span",113),c(11),a()()()),n&2){let e=t.$implicit;W("challenges__card--done",e.current>=e.target),r(2),h(e.icon),r(3),h(e.name),r(2),h(e.description),r(2),Y("width",e.current/e.target*100,"%"),r(2),te("",e.current,"/",e.target)}}function jt(n,t){if(n&1&&(o(0,"div",114)(1,"a",115),c(2),a(),o(3,"div",116),P(4,"div",117),a(),o(5,"span",118),c(6),a()()),n&2){let e=t.$implicit;r(),k("routerLink",q(5,De,e.name)),r(),h(e.name),r(2),Y("width",e.pct,"%"),r(2),h(e.count)}}function Gt(n,t){if(n&1&&(o(0,"section",79)(1,"h3"),c(2,"Top Directors"),a(),o(3,"div",81),F(4,jt,7,7,"div",114,Z),a()()),n&2){let e=_(5);r(4),N(e.directorStats())}}function Ut(n,t){if(n&1&&(o(0,"a",82)(1,"span",119),c(2),a(),o(3,"div",116),P(4,"div",117),a(),o(5,"span",118),c(6),a()()),n&2){let e=t.$implicit;k("routerLink",q(5,Ie,e.name)),r(2),h(e.name),r(2),Y("width",e.pct,"%"),r(2),h(e.count)}}function Ht(n,t){if(n&1&&(o(0,"a",82)(1,"span",119),c(2),a(),o(3,"div",116),P(4,"div",117),a(),o(5,"span",118),c(6),a()()),n&2){let e=t.$implicit;k("routerLink",q(5,Fe,e.name.replace("s",""))),r(2),h(e.name),r(2),Y("width",e.pct,"%"),r(2),h(e.count)}}function qt(n,t){if(n&1&&(o(0,"div",114)(1,"span",120),c(2),a(),o(3,"div",116),P(4,"div",117),a(),o(5,"span",118),c(6),a()()),n&2){let e=t.$implicit;r(2),h(e.name),r(2),Y("width",e.pct,"%"),r(2),h(e.count)}}function Qt(n,t){if(n&1&&(o(0,"section",83)(1,"h3"),c(2,"Languages"),a(),o(3,"div",81),F(4,qt,7,4,"div",114,Z),a()()),n&2){let e=_(5);r(4),N(e.languageStats())}}function Jt(n,t){if(n&1&&(o(0,"div",114)(1,"span",120),c(2),a(),o(3,"div",116),P(4,"div",117),a(),o(5,"span",118),c(6),a()()),n&2){let e=t.$implicit;r(2),B("",e.name," \u2605"),r(2),Y("width",e.pct,"%"),r(2),h(e.count)}}function Zt(n,t){if(n&1&&(o(0,"section",84)(1,"h3"),c(2,"Your Rating Distribution"),a(),o(3,"div",81),F(4,Jt,7,4,"div",114,Z),a()()),n&2){let e=_(5);r(4),N(e.ratingDistribution())}}function Kt(n,t){if(n&1&&(o(0,"div",122)(1,"span",123),c(2),a(),P(3,"div",124),o(4,"span",125),c(5),a()()),n&2){let e=t.$implicit;r(2),h(e.count),r(),Y("height",e.pct,"%"),r(2),h(e.label)}}function Xt(n,t){if(n&1&&(o(0,"section",85)(1,"h3"),c(2,"Monthly Activity"),a(),o(3,"div",121),F(4,Kt,6,4,"div",122,de),a()()),n&2){let e=_(5);r(4),N(e.monthlyTrends())}}function en(n,t){if(n&1){let e=A();o(0,"button",136),O("click",function(){let i=T(e).$implicit,s=_(7);return E(s.heatmapYear.set(i))}),c(1),a()}if(n&2){let e=t.$implicit,l=_(7);W("heatmap__year-btn--active",l.heatmapYear()===e),r(),h(e)}}function tn(n,t){if(n&1){let e=A();o(0,"div",127)(1,"button",136),O("click",function(){T(e);let i=_(6);return E(i.heatmapYear.set(null))}),c(2,"Last 12mo"),a(),F(3,en,2,3,"button",137,ee),a()}if(n&2){let e=_(6);r(),W("heatmap__year-btn--active",e.heatmapYear()===null),r(2),N(e.heatmapYears())}}function nn(n,t){if(n&1&&P(0,"div",139),n&2){let e=t.$implicit;W("heatmap__cell--l1",e.level===1)("heatmap__cell--l2",e.level===2)("heatmap__cell--l3",e.level===3)("heatmap__cell--future",e.level===-1),k("title",e.count>=0?e.date+": "+e.count+" film(s)":"")}}function on(n,t){if(n&1&&(o(0,"div",130),F(1,nn,1,9,"div",138,Ne),a()),n&2){let e=t.$implicit;r(),N(e.days)}}function an(n,t){if(n&1&&(o(0,"section",86)(1,"div",126)(2,"h3"),c(3,"Watch Calendar"),a(),C(4,tn,5,2,"div",127),a(),o(5,"div",128)(6,"div",129),F(7,on,3,0,"div",130,ge),a(),o(9,"div",131)(10,"span"),c(11,"Less"),a(),P(12,"div",132)(13,"div",133)(14,"div",134)(15,"div",135),o(16,"span"),c(17,"More"),a()()()()),n&2){let e=_(5);r(4),v(e.heatmapYears().length>1?4:-1),r(3),N(e.watchHeatmap().weeks)}}function ln(n,t){if(n&1&&(o(0,"div",144),P(1,"div",145),o(2,"span",146),c(3),a()()),n&2){let e=t.$implicit;Y("left",e.pct,"%"),r(),Y("height",8+e.count*6,"px"),k("title",e.year+": "+e.count+" film(s)"),r(2),h(e.year)}}function rn(n,t){if(n&1&&(o(0,"section",87)(1,"h3"),c(2,"Your Films Through Time"),a(),o(3,"div",140)(4,"div",141),P(5,"div",142),F(6,ln,4,6,"div",143,Re),a()()()),n&2){let e=_(5);r(6),N(e.filmTimeline())}}function cn(n,t){if(n&1&&(o(0,"a",149)(1,"span",150),c(2),a(),o(3,"span",151),c(4),a()()),n&2){let e=t.$implicit;k("routerLink",e.link),r(2),h(e.label),r(2),B("",e.count," films")}}function sn(n,t){if(n&1&&(o(0,"section",88)(1,"h3"),c(2,"Discovery Gaps"),a(),o(3,"p",147),c(4,"Genres and decades you haven't explored yet"),a(),o(5,"div",148),F(6,cn,5,3,"a",149,de),a()()),n&2){let e=_(5);r(6),N(e.discoveryGaps())}}function dn(n,t){if(n&1&&(o(0,"div",153)(1,"span",154),c(2),a(),o(3,"span",155),c(4),a()()),n&2){let e=t.$implicit;r(2),h(e.value),r(2),h(e.label)}}function _n(n,t){if(n&1&&(o(0,"section",89)(1,"h3"),c(2,"Viewing Insights"),a(),o(3,"div",152),F(4,dn,5,2,"div",153,de),a()()),n&2){let e=_(5);r(4),N(e.viewingInsights())}}function mn(n,t){if(n&1&&(o(0,"span",162),c(1),a()),n&2){let e=_().$implicit;r(),B("\u2605 ",e.rating,"/10")}}function pn(n,t){if(n&1&&(o(0,"div",157),P(1,"div",158),o(2,"div",159)(3,"a",160),c(4),a(),o(5,"span",161),c(6),a(),C(7,mn,2,1,"span",162),a()()),n&2){let e=t.$implicit;r(3),k("routerLink",q(4,ke,e.movieId)),r(),h(e.title),r(2),h(e.dateLabel),r(),v(e.rating?7:-1)}}function gn(n,t){if(n&1&&(o(0,"section",90)(1,"h3"),c(2,"Watch History"),a(),o(3,"div",156),F(4,pn,8,6,"div",157,Ve),a()()),n&2){let e=_(5);r(4),N(e.watchTimeline())}}function Cn(n,t){if(n&1&&(o(0,"div",69)(1,"div",70)(2,"span",71),c(3),a(),o(4,"span",72),c(5,"Films Watched"),a()(),o(6,"div",73)(7,"span",71),c(8),a(),o(9,"span",72),c(10),a()(),o(11,"div",70)(12,"span",71),c(13),a(),o(14,"span",72),c(15,"Avg. Your Rating"),a()(),o(16,"div",70)(17,"span",71),c(18),a(),o(19,"span",72),c(20,"Avg. TMDb Rating"),a()(),o(21,"div",70)(22,"span",71),c(23),a(),o(24,"span",72),c(25,"Decades Spanned"),a()(),C(26,Tt,5,1,"div",70),o(27,"div",70)(28,"span",71),c(29),a(),o(30,"span",72),c(31,"Current Streak (days)"),a()(),o(32,"div",70)(33,"span",71),c(34),a(),o(35,"span",72),c(36,"Best Streak (days)"),a()(),C(37,Et,5,1,"div",70),C(38,Pt,5,1,"div",70),C(39,kt,5,1,"div",70),C(40,Ot,5,1,"div",70),C(41,Dt,5,1,"div",70),C(42,It,5,1,"div",70),C(43,Ft,5,1,"div",70),C(44,Nt,5,1,"div",70),C(45,Rt,5,1,"div",70),C(46,Vt,5,1,"div",70),C(47,At,5,1,"div",70),C(48,Lt,5,1,"div",70),C(49,$t,5,1,"div",70),a(),C(50,zt,12,7,"div",74),C(51,Wt,6,0,"section",75),o(52,"section",76)(53,"h3"),c(54),a(),o(55,"div",77),F(56,Bt,12,9,"div",78,ne),a()(),C(58,Gt,6,0,"section",79),o(59,"div",80)(60,"section",79)(61,"h3"),c(62,"Top Genres"),a(),o(63,"div",81),F(64,Ut,7,7,"a",82,Z),a()(),o(66,"section",79)(67,"h3"),c(68,"By Decade"),a(),o(69,"div",81),F(70,Ht,7,7,"a",82,Z),a()()(),C(72,Qt,6,0,"section",83),C(73,Zt,6,0,"section",84),C(74,Xt,6,0,"section",85),C(75,an,18,1,"section",86),C(76,rn,8,0,"section",87),C(77,sn,8,0,"section",88),C(78,_n,6,0,"section",89),C(79,gn,6,0,"section",90)),n&2){let e,l,i,s,d,g,f,x,m=_(4);r(3),h(m.watchedMovies().length),r(5),h(m.watchedThisYear()),r(2),B("Watched in ",m.currentYear),r(3),h(m.avgRating()),r(5),h(m.avgTmdbRating()),r(5),h(m.totalDecades()),r(3),v(m.uniqueLanguages()>1?26:-1),r(3),h(m.currentStreak()),r(5),h(m.longestStreak()),r(3),v(m.watchedAvgFilmAge()>0?37:-1),r(),v(m.watchedDirectorCount()>1?38:-1),r(),v(m.watchedNonEnglishCount()>0?39:-1),r(),v(m.watchedSilentEraCount()>0?40:-1),r(),v((e=m.watchedMedianYear())?41:-1,e),r(),v((l=m.watchedAvgYear())?42:-1,l),r(),v(m.watchedCoDirectedCount()>0?43:-1),r(),v((i=m.watchedAvgTitleLength())?44:-1,i),r(),v((s=m.watchedLongestTitle())?45:-1,s),r(),v((d=m.watchedShortestTitle())?46:-1,d),r(),v(m.watchedHighlyRatedCount()>0?47:-1),r(),v((g=m.watchedStreamablePct())?48:-1,g),r(),v((f=m.watchedMedianRating())?49:-1,f),r(),v((x=m.nextMilestone())?50:-1,x),r(),v(m.achievements().length>0?51:-1),r(3),B("",m.monthlyChallenges().month," Challenges"),r(2),N(m.monthlyChallenges().challenges),r(2),v(m.directorStats().length>0?58:-1),r(6),N(m.genreStats()),r(6),N(m.decadeStats()),r(2),v(m.languageStats().length>1?72:-1),r(),v(m.ratingDistribution().length>0?73:-1),r(),v(m.monthlyTrends().length>1?74:-1),r(),v(m.watchHeatmap().weeks.length>0?75:-1),r(),v(m.filmTimeline().length>1?76:-1),r(),v(m.discoveryGaps().length>0?77:-1),r(),v(m.viewingInsights().length>0?78:-1),r(),v(m.watchTimeline().length>0?79:-1)}}function vn(n,t){if(n&1&&(o(0,"div",17),C(1,St,7,0,"div",3)(2,Cn,80,34),a()),n&2){let e=_(3);r(),v(e.watchedMovies().length===0?1:2)}}function un(n,t){if(n&1){let e=A();o(0,"div",7)(1,"div",8)(2,"button",9),O("click",function(){T(e);let i=_(2);return E(i.activeTab.set("watchlist"))}),c(3," Watchlist "),C(4,Ye,2,1,"span",10),C(5,We,1,2,"span",11),a(),o(6,"button",9),O("click",function(){T(e);let i=_(2);return E(i.activeTab.set("watched"))}),c(7," Watched "),C(8,Be,2,1,"span",10),a(),o(9,"button",9),O("click",function(){T(e);let i=_(2);return E(i.activeTab.set("favorites"))}),c(10," Favorites "),C(11,je,2,1,"span",10),a(),o(12,"button",9),O("click",function(){T(e);let i=_(2);return E(i.activeTab.set("playlists"))}),c(13," Playlists "),C(14,Ge,2,1,"span",10),a(),o(15,"button",9),O("click",function(){T(e);let i=_(2);return E(i.activeTab.set("stats"))}),c(16," Stats "),a()(),C(17,Qe,13,2,"div",12),C(18,Ze,18,2,"div",13),C(19,Ke,3,0,"div",14),C(20,Xe,6,0,"div",14),a(),C(21,ot,3,1,"div",15),C(22,st,3,1,"div",15),C(23,gt,3,1,"div",15),C(24,Mt,7,3,"div",16),C(25,vn,3,1,"div",17)}if(n&2){let e=_(2);r(2),W("collection__tab--active",e.activeTab()==="watchlist"),H("aria-selected",e.activeTab()==="watchlist"),r(2),v(e.watchlistMovies().length>0?4:-1),r(),v(e.newThisWeek()>0?5:-1),r(),W("collection__tab--active",e.activeTab()==="watched"),H("aria-selected",e.activeTab()==="watched"),r(2),v(e.watchedMovies().length>0?8:-1),r(),W("collection__tab--active",e.activeTab()==="favorites"),H("aria-selected",e.activeTab()==="favorites"),r(2),v(e.favoriteMovies().length>0?11:-1),r(),W("collection__tab--active",e.activeTab()==="playlists"),H("aria-selected",e.activeTab()==="playlists"),r(2),v(e.collectionService.playlists().length>0?14:-1),r(),W("collection__tab--active",e.activeTab()==="stats"),H("aria-selected",e.activeTab()==="stats"),r(2),v(e.activeTab()!=="stats"&&e.activeTab()!=="playlists"?17:-1),r(),v(e.activeTab()!=="stats"?18:-1),r(),v(e.activeTab()!=="stats"&&e.activeTab()!=="playlists"?19:-1),r(),v(e.activeTab()!=="stats"?20:-1),r(),v(e.activeTab()==="watchlist"?21:-1),r(),v(e.activeTab()==="watched"?22:-1),r(),v(e.activeTab()==="favorites"?23:-1),r(),v(e.activeTab()==="playlists"?24:-1),r(),v(e.activeTab()==="stats"?25:-1)}}function hn(n,t){if(n&1&&(o(0,"h1"),c(1,"My Collection"),a(),C(2,ze,1,0,"app-loading-spinner")(3,un,26,29)),n&2){let e=_();r(2),v(e.catalog.loading()?2:3)}}var Pe=class n{catalog=Q(be);collectionService=Q(we);notifications=Q(ye);route=Q(fe);currentYear=new Date().getFullYear();isSharedView=V(!1);sharedMovies=V([]);activeTab=V("watchlist");sortBy=V("added-desc");viewMode=V("grid");collectionQuery=V("");genreFilter=V("");decadeFilter=V("");ratingFilter=V(0);heatmapYear=V(null);watchlistMovies=b(()=>{let t=this.collectionService.watchlistIds();return this.catalog.movies().filter(e=>t.has(e.id))});watchedMovies=b(()=>{let t=this.collectionService.watchedIds();return this.catalog.movies().filter(e=>t.has(e.id))});currentMovies=b(()=>this.activeTab()==="watchlist"?this.watchlistMovies():this.watchedMovies());favoriteMovies=b(()=>{let t=this.collectionService.favoriteIds();return this.catalog.movies().filter(e=>t.has(e.id))});collectionGenres=b(()=>{let t=[...this.watchlistMovies(),...this.watchedMovies(),...this.favoriteMovies()],e=new Set;for(let l of t)for(let i of l.genres)e.add(i);return[...e].sort()});collectionDecades=b(()=>{let t=[...this.watchlistMovies(),...this.watchedMovies(),...this.favoriteMovies()],e=new Set;for(let l of t)e.add(Math.floor(l.year/10)*10);return[...e].sort()});sortedWatchlist=b(()=>this.applyFilters(this.applyQuery(this.sortMovies(this.watchlistMovies(),"watchlist"))));sortedWatched=b(()=>this.applyRatingFilter(this.applyFilters(this.applyQuery(this.sortMovies(this.watchedMovies(),"watched")))));sortedFavorites=b(()=>{let t=this.sortBy(),l=[...this.favoriteMovies()].sort((i,s)=>{switch(t){case"title-asc":return i.title.localeCompare(s.title);case"title-desc":return s.title.localeCompare(i.title);case"rating-desc":return s.voteAverage-i.voteAverage;case"year-desc":return s.year-i.year;default:return 0}});return this.applyFilters(this.applyQuery(l))});avgRating=b(()=>{let t=this.collectionService.watched().filter(l=>l.userRating!=null);return t.length===0?"\u2014":(t.reduce((l,i)=>l+(i.userRating??0),0)/t.length).toFixed(1)});avgTmdbRating=b(()=>{let t=this.watchedMovies().filter(l=>l.voteAverage>0);return t.length===0?"\u2014":(t.reduce((l,i)=>l+i.voteAverage,0)/t.length).toFixed(1)});totalDecades=b(()=>new Set(this.watchedMovies().map(e=>Math.floor(e.year/10)*10)).size);uniqueLanguages=b(()=>new Set(this.watchedMovies().filter(e=>e.language).map(e=>e.language)).size);watchedThisYear=b(()=>{let t=new Date(new Date().getFullYear(),0,1).getTime();return this.collectionService.watched().filter(e=>e.watchedAt>=t).length});newThisWeek=b(()=>{let t=Date.now()-6048e5;return this.collectionService.watchlist().filter(e=>e.addedAt>=t).length});achievements=b(()=>{let t=this.watchedMovies(),e=t.length,l=new Set(t.map(m=>Math.floor(m.year/10)*10)),i=new Set(t.flatMap(m=>m.genres)),s=t.filter(m=>m.year<1930).length,d=t.filter(m=>m.isStreamable).length,g=this.collectionService.favorites().length,f=this.collectionService.watched().filter(m=>m.userRating!=null).length,{longest:x}=this.computeStreaks();return[{id:"first",icon:"\u{1F3AC}",name:"First Film",description:"Watch your first film",earned:e>=1},{id:"ten",icon:"\u{1F39E}\uFE0F",name:"Film Buff",description:"Watch 10 films",earned:e>=10},{id:"twentyfive",icon:"\u{1F4FD}\uFE0F",name:"Cinephile",description:"Watch 25 films",earned:e>=25},{id:"fifty",icon:"\u{1F3C6}",name:"Film Scholar",description:"Watch 50 films",earned:e>=50},{id:"hundred",icon:"\u{1F451}",name:"Film Historian",description:"Watch 100 films",earned:e>=100},{id:"decades3",icon:"\u{1F4C5}",name:"Time Traveler",description:"Watch films from 3+ decades",earned:l.size>=3},{id:"decades5",icon:"\u23F3",name:"Era Explorer",description:"Watch films from 5+ decades",earned:l.size>=5},{id:"genres5",icon:"\u{1F3AD}",name:"Genre Hopper",description:"Watch films in 5+ genres",earned:i.size>=5},{id:"silent",icon:"\u{1F92B}",name:"Silent Era Fan",description:"Watch 3 films from before 1930",earned:s>=3},{id:"stream5",icon:"\u{1F4FA}",name:"Free Spirit",description:"Watch 5 free films",earned:d>=5},{id:"fav5",icon:"\u2764\uFE0F",name:"Curator",description:"Favorite 5 films",earned:g>=5},{id:"rate10",icon:"\u2B50",name:"Critic",description:"Rate 10 films",earned:f>=10},{id:"streak7",icon:"\u{1F525}",name:"On Fire",description:"7-day watch streak",earned:x>=7}]});nextMilestone=b(()=>{let e=this.achievements().filter(M=>!M.earned);if(e.length===0)return null;let l=this.watchedMovies(),i=l.length,s=new Set(l.map(M=>Math.floor(M.year/10)*10)),d=new Set(l.flatMap(M=>M.genres)),g=l.filter(M=>M.year<1930).length,f=l.filter(M=>M.isStreamable).length,x=this.collectionService.favorites().length,m=this.collectionService.watched().filter(M=>M.userRating!=null).length,{longest:y}=this.computeStreaks(),w={first:{current:i,target:1},ten:{current:i,target:10},twentyfive:{current:i,target:25},fifty:{current:i,target:50},hundred:{current:i,target:100},decades3:{current:s.size,target:3},decades5:{current:s.size,target:5},genres5:{current:d.size,target:5},silent:{current:g,target:3},stream5:{current:f,target:5},fav5:{current:x,target:5},rate10:{current:m,target:10},streak7:{current:y,target:7}},D=null;for(let M of e){let I=w[M.id];if(!I)continue;let j=I.target-I.current,R=Math.round(I.current/I.target*100);(!D||j<D.remaining)&&(D={icon:M.icon,name:M.name,current:I.current,target:I.target,remaining:j,pct:R})}return D});currentStreak=b(()=>this.computeStreaks().current);longestStreak=b(()=>this.computeStreaks().longest);watchedAvgFilmAge=b(()=>{let t=this.watchedMovies();if(t.length<2)return 0;let e=new Date().getFullYear();return Math.round(t.reduce((l,i)=>l+(e-i.year),0)/t.length)});watchedDirectorCount=b(()=>{let t=this.watchedMovies();if(t.length<2)return 0;let e=new Set;for(let l of t)for(let i of l.directors)e.add(i);return e.size});watchedNonEnglishCount=b(()=>{let t=this.watchedMovies();return t.length<2?0:t.filter(e=>e.language&&e.language!=="English"&&e.language!=="en").length});watchedSilentEraCount=b(()=>{let t=this.watchedMovies();return t.length<2?0:t.filter(e=>e.year<1930).length});watchedMedianYear=b(()=>{let t=this.watchedMovies();if(t.length<5)return null;let e=t.map(i=>i.year).sort((i,s)=>i-s),l=Math.floor(e.length/2);return e.length%2===0?Math.round((e[l-1]+e[l])/2):e[l]});watchedAvgYear=b(()=>{let t=this.watchedMovies();return t.length<5?null:Math.round(t.reduce((e,l)=>e+l.year,0)/t.length)});watchedCoDirectedCount=b(()=>{let t=this.watchedMovies();return t.length<2?0:t.filter(e=>e.directors.length>1).length});watchedAvgTitleLength=b(()=>{let t=this.watchedMovies();return t.length<5?null:Math.round(t.reduce((e,l)=>e+l.title.length,0)/t.length)});watchedHighlyRatedCount=b(()=>this.watchedMovies().filter(t=>t.voteAverage>=8).length);watchedShortestTitle=b(()=>{let t=this.watchedMovies();if(t.length<3)return null;let e=t.reduce((l,i)=>l.title.length<=i.title.length?l:i);return e.title.length<=15?e.title:null});watchedStreamablePct=b(()=>{let t=this.watchedMovies();if(t.length<3)return null;let e=Math.round(t.filter(l=>l.isStreamable).length/t.length*100);return e>0&&e<100?e:null});watchedMedianRating=b(()=>{let t=this.watchedMovies().filter(s=>s.voteAverage>0);if(t.length<3)return null;let e=t.map(s=>s.voteAverage).sort((s,d)=>s-d),l=Math.floor(e.length/2);return(e.length%2===0?(e[l-1]+e[l])/2:e[l]).toFixed(1)});watchedLongestTitle=b(()=>{let t=this.watchedMovies();if(t.length<3)return null;let e=t.reduce((l,i)=>l.title.length>=i.title.length?l:i);return e.title.length>=15?e.title:null});computeStreaks(){let t=this.collectionService.watched();if(t.length===0)return{current:0,longest:0};let e=new Set;for(let w of t){let D=new Date(w.watchedAt);e.add(`${D.getFullYear()}-${D.getMonth()}-${D.getDate()}`)}let l=[...e].sort();if(l.length===0)return{current:0,longest:0};let i=w=>{let[D,M,I]=w.split("-").map(Number);return new Date(D,M,I)},s=1,d=1;for(let w=1;w<l.length;w++){let D=i(l[w-1]),I=(i(l[w]).getTime()-D.getTime())/(1e3*60*60*24);Math.round(I)===1?(d++,d>s&&(s=d)):d=1}let g=i(l[l.length-1]),f=new Date;return{current:(new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime()-g.getTime())/(1e3*60*60*24)<=1?d:0,longest:s}}genreStats=b(()=>this.computeStats(this.watchedMovies().flatMap(t=>t.genres)));decadeStats=b(()=>this.computeStats(this.watchedMovies().map(t=>`${Math.floor(t.year/10)*10}s`)));languageStats=b(()=>{let t=this.watchedMovies().filter(d=>d.language);if(t.length<3)return[];let e={en:"English",fr:"French",de:"German",ja:"Japanese",it:"Italian",es:"Spanish",ru:"Russian",sv:"Swedish",da:"Danish",pt:"Portuguese",nl:"Dutch",zh:"Chinese",ko:"Korean",pl:"Polish",cs:"Czech",hu:"Hungarian",fi:"Finnish",el:"Greek",ro:"Romanian",tr:"Turkish",ar:"Arabic",hi:"Hindi",no:"Norwegian",nb:"Norwegian"},l=new Map;for(let d of t){let g=d.language?e[d.language]??d.language.toUpperCase():"Unknown";l.set(g,(l.get(g)??0)+1)}let i=[...l.entries()].sort((d,g)=>g[1]-d[1]).slice(0,8),s=i[0]?.[1]??1;return i.map(([d,g])=>({name:d,count:g,pct:g/s*100}))});directorStats=b(()=>{let t=new Map;for(let i of this.watchedMovies())for(let s of i.directors)t.set(s,(t.get(s)??0)+1);let e=[...t.entries()].filter(([,i])=>i>=2).sort((i,s)=>s[1]-i[1]).slice(0,8),l=e[0]?.[1]??1;return e.map(([i,s])=>({name:i,count:s,pct:s/l*100}))});ratingDistribution=b(()=>{let t=this.collectionService.watched().filter(i=>i.userRating!=null);if(t.length===0)return[];let e=new Map;for(let i of t){let s=Math.round(i.userRating);e.set(s,(e.get(s)??0)+1)}let l=Math.max(...e.values());return Array.from({length:10},(i,s)=>s+1).map(i=>({name:String(i),count:e.get(i)??0,pct:(e.get(i)??0)/l*100})).filter(i=>i.count>0)});monthlyTrends=b(()=>{let t=this.collectionService.watched();if(t.length===0)return[];let e=new Map;for(let s of t){let d=new Date(s.watchedAt),g=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;e.set(g,(e.get(g)??0)+1)}let l=[...e.entries()].sort((s,d)=>s[0].localeCompare(d[0])).slice(-12),i=Math.max(...l.map(([,s])=>s));return l.map(([s,d])=>{let[g,f]=s.split("-");return{label:new Date(parseInt(g),parseInt(f)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:d,pct:d/i*100}})});filmTimeline=b(()=>{let t=this.watchedMovies();if(t.length<2)return[];let e=new Map;for(let g of t)e.set(g.year,(e.get(g.year)??0)+1);let l=[...e.keys()].sort((g,f)=>g-f),i=l[0],d=l[l.length-1]-i||1;return l.map(g=>({year:g,count:e.get(g),pct:(g-i)/d*100}))});monthlyChallenges=b(()=>{let t=this.collectionService.watched(),e=new Date,l=e.getMonth(),i=e.getFullYear(),s=t.filter(y=>{let w=new Date(y.watchedAt);return w.getMonth()===l&&w.getFullYear()===i}),d=s.filter(y=>y.userRating!=null),g=s.filter(y=>y.review),f=this.catalog.movies().filter(y=>s.some(w=>w.movieId===y.id)),x=new Set(f.map(y=>Math.floor(y.year/10)*10)),m=e.toLocaleDateString("en-US",{month:"long"});return{month:m,challenges:[{id:"watch5",name:"Film Buff",description:`Watch 5 films in ${m}`,current:Math.min(s.length,5),target:5,icon:"\u{1F3AC}"},{id:"rate3",name:"Critic",description:`Rate 3 films in ${m}`,current:Math.min(d.length,3),target:3,icon:"\u2B50"},{id:"review1",name:"Reviewer",description:`Write a review in ${m}`,current:Math.min(g.length,1),target:1,icon:"\u270D\uFE0F"},{id:"decades2",name:"Time Traveler",description:"Watch from 2+ decades this month",current:Math.min(x.size,2),target:2,icon:"\u{1F4C5}"}]}});heatmapYears=b(()=>{let t=new Set;for(let e of this.collectionService.watched())t.add(new Date(e.watchedAt).getFullYear());return[...t].sort((e,l)=>l-e)});watchHeatmap=b(()=>{let t=this.collectionService.watched();if(t.length===0)return{weeks:[]};let e=this.heatmapYear(),l=new Date,i=new Date(l.getFullYear(),l.getMonth(),l.getDate()),s=new Map;for(let x of t){let m=new Date(x.watchedAt),y=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;s.set(y,(s.get(y)??0)+1)}let d,g;e?(d=new Date(e,0,1),d.setDate(d.getDate()-d.getDay()),g=new Date(e,11,31)):(g=i,d=new Date(i),d.setDate(d.getDate()-364-d.getDay()));let f=[];for(let x=0;x<53;x++){let m=[];for(let y=0;y<7;y++){let w=new Date(d);w.setDate(w.getDate()+x*7+y);let D=`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`,M=s.get(D)??0,I=w>i;m.push({date:D,count:I?-1:M,level:I?-1:M===0?0:M===1?1:M===2?2:3})}f.push({days:m})}return{weeks:f}});newPlaylistName=V("");editingPlaylistId=V(null);editPlaylistName=V("");playlistMovies(t){let e=this.collectionService.playlists().find(i=>i.id===t);if(!e)return[];let l=this.catalog.movies();return e.movieIds.map(i=>l.find(s=>s.id===i)).filter(i=>!!i)}createPlaylist(){let t=this.newPlaylistName().trim();t&&(this.collectionService.createPlaylist(t),this.newPlaylistName.set(""),this.notifications.show("Playlist created","success"))}startRename(t){this.editingPlaylistId.set(t.id),this.editPlaylistName.set(t.name)}saveRename(t){let e=this.editPlaylistName().trim();e&&this.collectionService.renamePlaylist(t,e),this.editingPlaylistId.set(null)}deletePlaylist(t){this.collectionService.deletePlaylist(t),this.notifications.show("Playlist deleted","info")}discoveryGaps=b(()=>{let t=this.watchedMovies();if(t.length<5)return[];let e=new Set(t.flatMap(f=>f.genres)),l=new Set(t.map(f=>Math.floor(f.year/10)*10)),i=this.catalog.movies().filter(f=>f.isStreamable),s=[],d=new Map;for(let f of i)for(let x of f.genres)d.set(x,(d.get(x)??0)+1);for(let[f,x]of d)!e.has(f)&&x>=10&&s.push({label:f,count:x,link:["/genre",f]});let g=new Map;for(let f of i){let x=Math.floor(f.year/10)*10;g.set(x,(g.get(x)??0)+1)}for(let[f,x]of g)!l.has(f)&&x>=5&&s.push({label:`${f}s`,count:x,link:["/decade",String(f)]});return s.sort((f,x)=>x.count-f.count).slice(0,8)});viewingInsights=b(()=>{let t=this.collectionService.watched();if(t.length<3)return[];let e=this.catalog.movies(),l=new Map(e.map(p=>[p.id,p])),i=[],s=t.map(p=>p.watchedAt).sort(),d=new Date(s[0]),g=new Date,f=Math.max(1,(g.getFullYear()-d.getFullYear())*12+g.getMonth()-d.getMonth()+1),x=(t.length/f).toFixed(1);i.push({label:"Films per Month",value:x});let m=new Map;for(let p of t){let u=l.get(p.movieId);if(u)for(let S of u.genres)m.set(S,(m.get(S)??0)+1)}let y=[...m.entries()].sort((p,u)=>u[1]-p[1])[0];y&&i.push({label:"Favorite Genre",value:y[0]});let w=new Map;for(let p of t){let u=l.get(p.movieId);if(u)for(let S of u.directors)w.set(S,(w.get(S)??0)+1)}let D=[...w.entries()].sort((p,u)=>u[1]-p[1])[0];D&&D[1]>=2&&i.push({label:"Top Director",value:D[0]});let M=new Map;for(let p of t){let u=l.get(p.movieId);if(u){let S=Math.floor(u.year/10)*10;M.set(S,(M.get(S)??0)+1)}}let I=[...M.entries()].sort((p,u)=>u[1]-p[1])[0];I&&i.push({label:"Preferred Decade",value:`${I[0]}s`});let j=t.reduce((p,u)=>{let S=l.get(u.movieId);return S?p+S.year:p},0),R=t.filter(p=>l.has(p.movieId)).length;R>=3&&i.push({label:"Avg Film Year",value:`${Math.round(j/R)}`});let L=0,$=9999;for(let p of t){let u=l.get(p.movieId);u&&(u.year>L&&(L=u.year),u.year<$&&($=u.year))}L>0&&i.push({label:"Newest Film",value:`${L}`}),$<9999&&i.push({label:"Oldest Film",value:`${$}`});let z=t.filter(p=>p.userRating!=null).sort((p,u)=>(u.userRating??0)-(p.userRating??0));if(z.length>0){let p=l.get(z[0].movieId);if(p){let u=p.title.length>18?p.title.slice(0,16)+"...":p.title;i.push({label:"Highest Rated",value:u})}}let K=t.filter(p=>l.get(p.movieId)?.isStreamable).length;t.length>=3&&i.push({label:"Streamable %",value:`${Math.round(K/t.length*100)}%`});let U=new Set;for(let p of t){let u=l.get(p.movieId);if(u)for(let S of u.directors)U.add(S)}U.size>=2&&i.push({label:"Unique Directors",value:`${U.size}`});let ie=new Set;for(let p of t){let u=l.get(p.movieId);u&&u.language&&ie.add(u.language)}ie.size>=2&&i.push({label:"Languages",value:`${ie.size}`});let oe=new Set;for(let p of t){let u=l.get(p.movieId);if(u)for(let S of u.genres)oe.add(S)}oe.size>=3&&i.push({label:"Genres Explored",value:`${oe.size}`});let ae=t.filter(p=>p.userRating!=null&&p.userRating>0);if(ae.length>=3){let p=ae.reduce((u,S)=>u+(S.userRating??0),0)/ae.length;i.push({label:"Avg Your Rating",value:p.toFixed(1)})}let le=new Set;for(let p of t){let u=l.get(p.movieId);u&&le.add(Math.floor(u.year/10)*10)}if(le.size>=3){let p=[...le].sort((u,S)=>u-S);i.push({label:"Decade Span",value:`${p[0]}s\u2013${p[p.length-1]}s`})}let _e=t.filter(p=>{let u=l.get(p.movieId);return u&&u.directors.length>1}).length;_e>0&&i.push({label:"Co-directed Films",value:`${_e}`});let re=t.map(p=>l.get(p.movieId)).filter(p=>!!p&&p.voteAverage>0);if(re.length>=3){let p=re.reduce((u,S)=>u+S.voteAverage,0)/re.length;i.push({label:"Avg TMDb Rating",value:p.toFixed(1)})}let Oe=new Date().getFullYear(),ce=t.map(p=>l.get(p.movieId)).filter(p=>!!p).map(p=>Oe-p.year);if(ce.length>=3){let p=Math.round(ce.reduce((u,S)=>u+S,0)/ce.length);p>=10&&i.push({label:"Avg Film Age",value:`${p} years`})}if(z.length>=3){let p=0,u=0,S=0;for(let G of z){let se=l.get(G.movieId);se&&se.voteAverage>0&&G.userRating!=null&&(p+=G.userRating,u+=se.voteAverage,S++)}if(S>=3){let G=p/S-u/S;Math.abs(G)>=.3&&i.push({label:"Rating Bias",value:G>0?`+${G.toFixed(1)} vs TMDb`:`${G.toFixed(1)} vs TMDb`})}}return i});watchTimeline=b(()=>{let t=new Map(this.catalog.movies().map(e=>[e.id,e]));return[...this.collectionService.watched()].sort((e,l)=>l.watchedAt-e.watchedAt).slice(0,20).map(e=>{let l=t.get(e.movieId),i=new Date(e.watchedAt);return{movieId:e.movieId,title:l?.title??"Unknown Film",dateLabel:i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),rating:e.userRating}})});ngOnInit(){this.catalog.load();let t=this.route.snapshot.queryParams.shared;if(t){this.isSharedView.set(!0);let e=t.split(","),l=()=>{if(this.catalog.loaded()){let i=this.catalog.movies();this.sharedMovies.set(e.map(s=>i.find(d=>d.id===s)).filter(s=>!!s))}else setTimeout(l,100)};l()}}shareCollection(){let t=this.currentMovies();if(t.length===0){this.notifications.show("No films to share","info");return}let e=t.map(i=>i.id).join(","),l=`${window.location.origin}/collection?shared=${e}`;navigator.clipboard.writeText(l).then(()=>{this.notifications.show("Share link copied to clipboard","success")}).catch(()=>{this.notifications.show("Failed to copy link","error")})}onSortChange(t){this.sortBy.set(t.target.value)}onRatingFilterChange(t){this.ratingFilter.set(parseInt(t.target.value,10))}applyQuery(t){let e=this.collectionQuery().toLowerCase().trim();return e?t.filter(l=>l.title.toLowerCase().includes(e)||l.directors.some(i=>i.toLowerCase().includes(e))||l.genres.some(i=>i.toLowerCase().includes(e))):t}applyFilters(t){let e=this.genreFilter(),l=this.decadeFilter(),i=t;if(e&&(i=i.filter(s=>s.genres.includes(e))),l){let s=parseInt(l,10);i=i.filter(d=>Math.floor(d.year/10)*10===s)}return i}applyRatingFilter(t){let e=this.ratingFilter();return e===0?t:e===-1?t.filter(l=>{let i=this.collectionService.watched().find(s=>s.movieId===l.id);return i&&i.userRating==null}):t.filter(l=>{let i=this.collectionService.watched().find(s=>s.movieId===l.id);return i&&i.userRating!=null&&i.userRating>=e})}exportCsv(){let t=this.currentMovies(),e=this.activeTab(),l=["Title","Year","Genres","Directors","Rating","Streamable"];e==="watched"&&l.push("Your Rating");let i=t.map(x=>{let m=[`"${x.title.replace(/"/g,'""')}"`,x.year,`"${x.genres.join(", ")}"`,`"${x.directors.join(", ")}"`,x.voteAverage||"",x.isStreamable?"Yes":"No"];if(e==="watched"){let y=this.collectionService.watched().find(w=>w.movieId===x.id);m.push(y?.userRating??"")}return m.join(",")}),s=[l.join(","),...i].join(`
`),d=new Blob([s],{type:"text/csv"}),g=URL.createObjectURL(d),f=document.createElement("a");f.href=g,f.download=`bw-cinema-${e}-${new Date().toISOString().slice(0,10)}.csv`,f.click(),URL.revokeObjectURL(g)}exportLetterboxd(){let t=this.activeTab()==="watched"?this.sortedWatched():this.sortedWatchlist(),e=this.activeTab(),l=["imdbID","Title","Year","Rating10"],i=t.map(x=>{let m=e==="watched"?this.collectionService.watched().find(y=>y.movieId===x.id):null;return[x.imdbId??"",`"${x.title.replace(/"/g,'""')}"`,x.year,m?.userRating??""].join(",")}),s=[l.join(","),...i].join(`
`),d=new Blob([s],{type:"text/csv"}),g=URL.createObjectURL(d),f=document.createElement("a");f.href=g,f.download=`letterboxd-${e}-${new Date().toISOString().slice(0,10)}.csv`,f.click(),URL.revokeObjectURL(g),this.notifications.show("Letterboxd CSV exported","success")}importLetterboxd(t){let e=t.target,l=e.files?.[0];if(!l)return;let i=new FileReader;i.onload=()=>{try{let d=i.result.split(`
`).filter(R=>R.trim());if(d.length<2){this.notifications.show("CSV file is empty","error");return}let g=d[0].toLowerCase(),f=g.includes("imdbid"),x=g.includes("title");if(!f&&!x){this.notifications.show("CSV must have imdbID or Title column","error");return}let m=this.parseCsvRow(d[0]),y=m.findIndex(R=>R.toLowerCase().trim()==="imdbid"),w=m.findIndex(R=>R.toLowerCase().trim()==="title"),D=m.findIndex(R=>R.toLowerCase().trim()==="year"),M=m.findIndex(R=>R.toLowerCase().trim().includes("rating")),I=this.catalog.movies(),j=0;for(let R=1;R<d.length;R++){let L=this.parseCsvRow(d[R]);if(L.length===0)continue;let $;if(y>=0&&L[y]&&($=I.find(z=>z.imdbId===L[y].trim())),!$&&w>=0&&L[w]){let z=L[w].trim().toLowerCase(),K=D>=0?parseInt(L[D],10):NaN;$=I.find(U=>U.title.toLowerCase()===z&&(isNaN(K)||U.year===K))}if($&&!this.collectionService.isWatched($.id)){let z=M>=0?parseFloat(L[M]):NaN;this.collectionService.markWatched($.id,isNaN(z)?null:Math.round(z*2)/2),j++}}this.notifications.show(`Imported ${j} film${j!==1?"s":""}`,"success")}catch{this.notifications.show("Failed to parse CSV file","error")}e.value=""},i.readAsText(l)}parseCsvRow(t){let e=[],l="",i=!1;for(let s=0;s<t.length;s++){let d=t[s];i?d==='"'?t[s+1]==='"'?(l+='"',s++):i=!1:l+=d:d==='"'?i=!0:d===","?(e.push(l),l=""):l+=d}return e.push(l),e}exportBackup(){let t={watchlist:this.collectionService.watchlist(),watched:this.collectionService.watched(),favorites:this.collectionService.favorites(),exportedAt:new Date().toISOString()},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),l=URL.createObjectURL(e),i=document.createElement("a");i.href=l,i.download=`bw-cinema-backup-${new Date().toISOString().slice(0,10)}.json`,i.click(),URL.revokeObjectURL(l),this.notifications.show("Backup downloaded","success")}importBackup(t){let e=t.target,l=e.files?.[0];if(!l)return;let i=new FileReader;i.onload=()=>{try{let s=JSON.parse(i.result);if(s.watchlist&&Array.isArray(s.watchlist))for(let d of s.watchlist)d.movieId&&!this.collectionService.isInWatchlist(d.movieId)&&!this.collectionService.isWatched(d.movieId)&&this.collectionService.addToWatchlist(d.movieId);if(s.watched&&Array.isArray(s.watched))for(let d of s.watched)d.movieId&&!this.collectionService.isWatched(d.movieId)&&this.collectionService.markWatched(d.movieId,d.userRating??null);if(s.favorites&&Array.isArray(s.favorites))for(let d of s.favorites)typeof d=="string"&&!this.collectionService.isFavorite(d)&&this.collectionService.toggleFavorite(d);this.notifications.show("Collection restored successfully","success")}catch{this.notifications.show("Invalid backup file","error")}e.value=""},i.readAsText(l)}sortMovies(t,e){let l=this.sortBy(),i=e==="watchlist"?this.collectionService.watchlist():this.collectionService.watched(),s=new Map(i.map(d=>[d.movieId,"addedAt"in d?d.addedAt:d.watchedAt]));return[...t].sort((d,g)=>{switch(l){case"added-desc":return(s.get(g.id)??0)-(s.get(d.id)??0);case"added-asc":return(s.get(d.id)??0)-(s.get(g.id)??0);case"title-asc":return d.title.localeCompare(g.title);case"title-desc":return g.title.localeCompare(d.title);case"rating-desc":return g.voteAverage-d.voteAverage;case"year-desc":return g.year-d.year;default:return 0}})}computeStats(t){let e=new Map;for(let s of t)e.set(s,(e.get(s)??0)+1);let l=[...e.entries()].sort((s,d)=>d[1]-s[1]).slice(0,8),i=l[0]?.[1]??1;return l.map(([s,d])=>({name:s,count:d,pct:d/i*100}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=pe({type:n,selectors:[["app-collection"]],decls:3,vars:1,consts:[[1,"collection","container"],[1,"collection__shared-info"],[3,"movies"],[1,"collection__empty"],[1,"collection__empty-title"],[1,"collection__empty-text"],["routerLink","/browse",1,"btn-primary"],[1,"collection__controls"],["role","tablist",1,"collection__tabs"],["role","tab",1,"collection__tab",3,"click"],[1,"collection__count"],[1,"collection__new-dot",3,"title"],[1,"collection__search"],[1,"collection__actions"],[1,"collection__backup"],["role","tabpanel"],["role","tabpanel",1,"playlists"],["role","tabpanel",1,"stats"],["type","search","placeholder","Search in collection...","autocomplete","off",1,"collection__search-input",3,"input","value"],[1,"collection__filter-select",3,"change"],["value",""],[3,"value"],[1,"collection__rating-filter"],[1,"collection__rating-filter",3,"change"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","-1"],["for","collection-sort",1,"sr-only"],["id","collection-sort",1,"collection__sort",3,"change"],["value","added-desc","selected",""],["value","added-asc"],["value","title-asc"],["value","title-desc"],["value","rating-desc"],["value","year-desc"],[3,"modeChange","mode"],[1,"btn-ghost","collection__export",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"btn-ghost","collection__export","collection__import-label"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["type","file","accept",".csv",1,"sr-only",3,"change"],[1,"btn-ghost","collection__backup-btn",3,"click"],[1,"btn-ghost","collection__backup-btn","collection__restore-label"],["type","file","accept",".json",1,"sr-only",3,"change"],[1,"playlists__create"],["type","text","placeholder","New playlist name...",1,"playlists__input",3,"input","keydown.enter","value"],[1,"btn-secondary",3,"click","disabled"],[1,"playlists__card"],[1,"playlists__header"],["type","text",1,"playlists__rename-input",3,"value"],[1,"playlists__name"],[1,"playlists__count"],["aria-label","Delete playlist",1,"btn-ghost","playlists__delete",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"playlists__movies"],["type","text",1,"playlists__rename-input",3,"input","keydown.enter","blur","value"],[1,"playlists__name",3,"click"],[1,"playlists__movie",3,"routerLink"],["loading","lazy",3,"src","alt"],[1,"playlists__movie-placeholder"],[1,"stats__overview"],[1,"stats__card"],[1,"stats__card-value"],[1,"stats__card-label"],[1,"stats__card","stats__card--highlight"],[1,"stats__milestone"],[1,"achievements"],[1,"challenges"],[1,"challenges__grid"],[1,"challenges__card",3,"challenges__card--done"],[1,"stats__section"],[1,"stats__sections"],[1,"stats__bars"],[1,"stats__bar-row",3,"routerLink"],[1,"stats__section","stats__lang-section"],[1,"stats__section","stats__rating-dist"],[1,"stats__section","stats__trends"],[1,"heatmap"],[1,"film-tl"],[1,"gaps"],[1,"insights"],[1,"timeline"],[1,"stats__card-value",2,"font-size","0.75em"],[1,"stats__card-value",2,"font-size","0.85em"],[1,"stats__milestone-icon"],[1,"stats__milestone-info"],[1,"stats__milestone-name"],[1,"stats__milestone-desc"],[1,"stats__milestone-bar-track"],[1,"stats__milestone-bar-fill"],[1,"stats__milestone-progress"],[1,"achievements__grid"],[1,"achievements__badge",3,"achievements__badge--earned"],[1,"achievements__badge"],[1,"achievements__icon"],[1,"achievements__name"],[1,"achievements__desc"],[1,"challenges__card"],[1,"challenges__icon"],[1,"challenges__info"],[1,"challenges__name"],[1,"challenges__desc"],[1,"challenges__bar-track"],[1,"challenges__bar-fill"],[1,"challenges__progress"],[1,"stats__bar-row"],[1,"stats__bar-label","stats__bar-label--link",3,"routerLink"],[1,"stats__bar-track"],[1,"stats__bar-fill"],[1,"stats__bar-count"],[1,"stats__bar-label","stats__bar-label--link"],[1,"stats__bar-label"],[1,"stats__trend-chart"],[1,"stats__trend-col"],[1,"stats__trend-count"],[1,"stats__trend-bar"],[1,"stats__trend-label"],[1,"heatmap__header"],[1,"heatmap__years"],[1,"heatmap__scroll"],[1,"heatmap__grid"],[1,"heatmap__col"],[1,"heatmap__legend"],[1,"heatmap__cell","heatmap__cell--l0"],[1,"heatmap__cell","heatmap__cell--l1"],[1,"heatmap__cell","heatmap__cell--l2"],[1,"heatmap__cell","heatmap__cell--l3"],[1,"heatmap__year-btn",3,"click"],[1,"heatmap__year-btn",3,"heatmap__year-btn--active"],[1,"heatmap__cell",3,"heatmap__cell--l1","heatmap__cell--l2","heatmap__cell--l3","heatmap__cell--future","title"],[1,"heatmap__cell",3,"title"],[1,"film-tl__scroll"],[1,"film-tl__track"],[1,"film-tl__line"],[1,"film-tl__point",3,"left"],[1,"film-tl__point"],[1,"film-tl__marker",3,"title"],[1,"film-tl__year"],[1,"gaps__desc"],[1,"gaps__grid"],[1,"gaps__chip",3,"routerLink"],[1,"gaps__chip-label"],[1,"gaps__chip-count"],[1,"insights__grid"],[1,"insights__card"],[1,"insights__value"],[1,"insights__label"],[1,"timeline__list"],[1,"timeline__item"],[1,"timeline__dot"],[1,"timeline__content"],[1,"timeline__title",3,"routerLink"],[1,"timeline__date"],[1,"timeline__rating"]],template:function(e,l){e&1&&(o(0,"div",0),C(1,$e,6,3)(2,hn,4,1),a()),e&2&&(r(),v(l.isSharedView()?1:2))},dependencies:[xe,Me,Se,Te,Ee],styles:['.collection[_ngcontent-%COMP%]{padding:var(--space-xl) 0}.collection__shared-info[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 var(--space-xl)}.collection__controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-xl)}.collection__tabs[_ngcontent-%COMP%]{display:flex;gap:2px;background-color:var(--bg-surface);border-radius:var(--radius-lg);padding:4px;width:fit-content}.collection__tab[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-tertiary);font-size:.95rem;font-weight:600;padding:var(--space-sm) var(--space-xl);cursor:pointer;border-radius:var(--radius);transition:all .2s ease;display:flex;align-items:center;gap:var(--space-sm);min-height:40px}.collection__tab[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.collection__tab--active[_ngcontent-%COMP%]{color:var(--accent-gold);background-color:var(--bg-raised)}.collection__count[_ngcontent-%COMP%]{font-size:.75rem;background-color:var(--accent-gold-dim);color:var(--accent-gold);padding:1px 8px;border-radius:10px}.collection__new-dot[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:50%;background-color:#198754;margin-left:2px;vertical-align:super}.collection__actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);align-items:center}.collection__sort[_ngcontent-%COMP%]{min-width:160px;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);background-color:var(--bg-surface);font-size:.9rem}.collection__export[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:.85rem;white-space:nowrap}.collection__import-label[_ngcontent-%COMP%]{cursor:pointer}.collection__search[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm);width:100%}.collection__search-input[_ngcontent-%COMP%]{flex:1;max-width:320px;padding:var(--space-sm) var(--space-md);background-color:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border);border-radius:var(--radius-lg);font-size:.9rem}.collection__search-input[_ngcontent-%COMP%]:focus{border-color:var(--accent-gold);outline:none}.collection__filter-select[_ngcontent-%COMP%], .collection__rating-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border-radius:var(--radius-lg);background-color:var(--bg-surface);border:1px solid var(--border);color:var(--text-primary);font-size:.85rem;min-width:120px}.collection__empty[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) var(--space-lg)}.collection__empty-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:1.3rem;color:var(--text-primary);margin:0 0 var(--space-sm)}.collection__empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-lg)}.stats__overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:var(--space-md);margin-bottom:var(--space-2xl)}.stats__card[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-lg);text-align:center}.stats__card--highlight[_ngcontent-%COMP%]{border-color:var(--accent-gold);background-color:var(--accent-gold-dim)}.stats__card-value[_ngcontent-%COMP%]{display:block;font-family:var(--font-heading);font-size:2rem;font-weight:700;color:var(--accent-gold);margin-bottom:4px}.stats__card-label[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-tertiary)}.stats__sections[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-xl)}.stats__section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.stats__bars[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.stats__bar-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.stats__bar-label[_ngcontent-%COMP%]{min-width:80px;font-size:.85rem;color:var(--text-secondary);text-align:right}.stats__bar-track[_ngcontent-%COMP%]{flex:1;height:8px;background-color:var(--bg-raised);border-radius:4px;overflow:hidden}.stats__bar-fill[_ngcontent-%COMP%]{height:100%;background-color:var(--accent-gold);border-radius:4px;transition:width .4s ease}.stats__bar-count[_ngcontent-%COMP%]{min-width:24px;font-size:.8rem;color:var(--text-tertiary)}.stats__bar-label--link[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-secondary);transition:color .2s}.stats__bar-label--link[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.collection__backup[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-bottom:var(--space-md)}.collection__backup-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:var(--space-xs) var(--space-md);min-height:36px}.collection__restore-label[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center}.stats__lang-section[_ngcontent-%COMP%], .stats__rating-dist[_ngcontent-%COMP%]{margin-top:var(--space-xl);max-width:500px}.stats__milestone[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius-lg);margin-bottom:var(--space-xl)}.stats__milestone-icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.stats__milestone-info[_ngcontent-%COMP%]{flex:1;min-width:0}.stats__milestone-name[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:.9rem;color:var(--text-primary)}.stats__milestone-desc[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary)}.stats__milestone-bar-track[_ngcontent-%COMP%]{width:80px;height:6px;background:var(--bg-raised);border-radius:3px;overflow:hidden;flex-shrink:0}.stats__milestone-bar-fill[_ngcontent-%COMP%]{height:100%;background:var(--accent-gold);border-radius:3px}.stats__milestone-progress[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);font-weight:600;white-space:nowrap}.achievements[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.achievements[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.achievements__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--space-sm)}.achievements__badge[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md);text-align:center;opacity:.35;transition:opacity .3s}.achievements__badge--earned[_ngcontent-%COMP%]{opacity:1;border-color:var(--accent-gold);background-color:var(--accent-gold-dim)}.achievements__icon[_ngcontent-%COMP%]{display:block;font-size:1.8rem;margin-bottom:var(--space-xs)}.achievements__name[_ngcontent-%COMP%]{display:block;font-size:.85rem;font-weight:700;color:var(--text-primary);margin-bottom:2px}.achievements__desc[_ngcontent-%COMP%]{display:block;font-size:.7rem;color:var(--text-tertiary)}.stats__trends[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.stats__trend-chart[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);align-items:flex-end;height:160px;padding-top:var(--space-md)}.stats__trend-col[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;height:100%;justify-content:flex-end}.stats__trend-count[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.stats__trend-bar[_ngcontent-%COMP%]{width:100%;max-width:40px;min-height:4px;background-color:var(--accent-gold);border-radius:3px 3px 0 0;transition:height .4s ease}.stats__trend-label[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);white-space:nowrap}.playlists__create[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-bottom:var(--space-xl)}.playlists__input[_ngcontent-%COMP%]{flex:1;max-width:320px;padding:var(--space-sm) var(--space-md);background-color:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border);border-radius:var(--radius-lg);font-size:.95rem}.playlists__input[_ngcontent-%COMP%]:focus{border-color:var(--accent-gold);outline:none}.playlists__card[_ngcontent-%COMP%]{background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md);margin-bottom:var(--space-md)}.playlists__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-sm)}.playlists__name[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;cursor:pointer}.playlists__name[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.playlists__rename-input[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;background:var(--bg-raised);border:1px solid var(--accent-gold);border-radius:var(--radius);color:var(--text-primary);padding:2px 8px}.playlists__count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.playlists__delete[_ngcontent-%COMP%]{margin-left:auto;color:var(--text-tertiary);min-width:36px;min-height:36px;padding:0;display:flex;align-items:center;justify-content:center}.playlists__delete[_ngcontent-%COMP%]:hover{color:#e53e3e}.playlists__movies[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);overflow-x:auto;padding-bottom:var(--space-xs)}.playlists__movie[_ngcontent-%COMP%]{flex:0 0 60px}.playlists__movie[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius-sm)}.playlists__movie-placeholder[_ngcontent-%COMP%]{width:60px;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);color:var(--text-tertiary);font-size:1.2rem}.challenges[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.challenges[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.challenges__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:var(--space-sm)}.challenges__card[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);align-items:flex-start;background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md);transition:border-color .3s}.challenges__card--done[_ngcontent-%COMP%]{border-color:var(--accent-gold);background-color:var(--accent-gold-dim)}.challenges__icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.challenges__info[_ngcontent-%COMP%]{flex:1;min-width:0}.challenges__name[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:700;color:var(--text-primary);margin-bottom:2px}.challenges__desc[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-tertiary);margin-bottom:var(--space-xs)}.challenges__bar-track[_ngcontent-%COMP%]{height:6px;background-color:var(--bg-raised);border-radius:3px;overflow:hidden;margin-bottom:4px}.challenges__bar-fill[_ngcontent-%COMP%]{height:100%;background-color:var(--accent-gold);border-radius:3px;transition:width .4s ease}.challenges__progress[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.heatmap__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:var(--space-sm);margin-bottom:var(--space-md)}.heatmap__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.heatmap__years[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.heatmap__year-btn[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;background:var(--bg-raised);border:1px solid transparent;color:var(--text-tertiary);font-size:.75rem;font-weight:600;cursor:pointer;transition:all .15s;min-height:auto;min-width:auto}.heatmap__year-btn[_ngcontent-%COMP%]:hover{color:var(--accent-gold);border-color:var(--accent-gold)}.heatmap__year-btn--active[_ngcontent-%COMP%]{background:var(--accent-gold-dim);border-color:var(--accent-gold);color:var(--accent-gold)}.heatmap[_ngcontent-%COMP%]{margin-top:var(--space-2xl)}.heatmap[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.heatmap__scroll[_ngcontent-%COMP%]{overflow-x:auto;padding-bottom:var(--space-sm)}.heatmap__grid[_ngcontent-%COMP%]{display:flex;gap:2px}.heatmap__col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.heatmap__cell[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px;background-color:var(--bg-raised)}.heatmap__cell--l1[_ngcontent-%COMP%]{background-color:#d4af374d}.heatmap__cell--l2[_ngcontent-%COMP%]{background-color:#d4af3799}.heatmap__cell--l3[_ngcontent-%COMP%]{background-color:var(--accent-gold)}.heatmap__cell--future[_ngcontent-%COMP%]{background-color:transparent}.heatmap__legend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;margin-top:var(--space-sm);justify-content:flex-end;font-size:.65rem;color:var(--text-tertiary)}.heatmap__legend[_ngcontent-%COMP%]   .heatmap__cell[_ngcontent-%COMP%]{width:10px;height:10px}.heatmap__cell--l0[_ngcontent-%COMP%]{background-color:var(--bg-raised)}.film-tl[_ngcontent-%COMP%]{margin-top:var(--space-2xl)}.film-tl[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.film-tl__scroll[_ngcontent-%COMP%]{overflow-x:auto;padding-bottom:var(--space-md)}.film-tl__track[_ngcontent-%COMP%]{position:relative;min-width:600px;height:80px;margin:0 var(--space-md)}.film-tl__line[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;right:0;height:2px;background-color:var(--border)}.film-tl__point[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center}.film-tl__marker[_ngcontent-%COMP%]{width:8px;background-color:var(--accent-gold);border-radius:4px;margin-bottom:4px}.film-tl__year[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-tertiary);white-space:nowrap;margin-top:4px}.timeline[_ngcontent-%COMP%]{margin-top:var(--space-2xl)}.timeline[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.timeline__list[_ngcontent-%COMP%]{position:relative;padding-left:var(--space-lg)}.gaps[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.gaps[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-xs)}.gaps__desc[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-tertiary);margin:0 0 var(--space-md)}.gaps__grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--space-sm)}.gaps__chip[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;padding:var(--space-sm) var(--space-md);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);text-decoration:none;color:var(--text-secondary);transition:border-color .2s,color .2s}.gaps__chip[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.gaps__chip-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600}.gaps__chip-count[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-tertiary)}.insights[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.insights__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:var(--space-md);margin-top:var(--space-md)}.insights__card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:var(--space-md);text-align:center}.insights__value[_ngcontent-%COMP%]{display:block;font-family:var(--font-heading);font-size:1.2rem;font-weight:700;color:var(--accent-gold);margin-bottom:4px}.insights__label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;letter-spacing:.05em;color:var(--text-tertiary)}.timeline__list[_ngcontent-%COMP%]:before{content:"";position:absolute;left:6px;top:4px;bottom:4px;width:2px;background-color:var(--border)}.timeline__item[_ngcontent-%COMP%]{position:relative;display:flex;gap:var(--space-md);padding-bottom:var(--space-md)}.timeline__dot[_ngcontent-%COMP%]{position:absolute;left:calc(-1 * var(--space-lg) + 2px);top:4px;width:10px;height:10px;border-radius:50%;background-color:var(--accent-gold);border:2px solid var(--bg-deep);flex-shrink:0}.timeline__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.timeline__title[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600;font-size:.95rem;text-decoration:none}.timeline__title[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.timeline__date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary)}.timeline__rating[_ngcontent-%COMP%]{font-size:.8rem;color:var(--accent-gold)}@media(max-width:768px){.collection__controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.stats__sections[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats__overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:480px){.collection__tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:nowrap;max-width:100%;scrollbar-width:none}.collection__tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.collection__tab[_ngcontent-%COMP%]{flex-shrink:0;padding:var(--space-sm) var(--space-md);font-size:.85rem}.stats__overview[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}.stats__overview[_ngcontent-%COMP%]   .stats__card[_ngcontent-%COMP%]{padding:var(--space-md)}.film-tl__track[_ngcontent-%COMP%]{min-width:400px}.collection__actions[_ngcontent-%COMP%]{flex-wrap:wrap}.challenges__grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}'],changeDetection:0})};export{Pe as CollectionComponent};
