import{a as he}from"./chunk-SATL3JCH.js";import{a as ve}from"./chunk-VYUST5ET.js";import{a as fe}from"./chunk-JVUEOQ2T.js";import{a as Ce}from"./chunk-U6UKIARX.js";import{$ as _,$a as pe,A as ne,Aa as g,Ba as ae,F as P,Ja as _e,K as se,Ma as m,O as i,R as de,_ as u,_a as me,a as le,b as re,ba as ie,ca as X,da as Z,ea as oe,fa as l,fb as ge,ga as a,ha as Y,la as ee,na as T,pa as f,v as F,va as ce,wa as ue,x as w,y as I,ya as s,z as te,za as E}from"./chunk-SA65F7OW.js";var be=n=>["/movie",n],ye=(n,e)=>e.value,ze=(n,e)=>e.id;function Se(n,e){if(n&1){let t=ee();l(0,"div",2)(1,"p"),s(2),a(),l(3,"button",4),T("click",function(){w(t);let o=f();return I(o.catalog.retry())}),s(4,"Try Again"),a()()}n&2&&(i(2),E(e))}function Me(n,e){n&1&&Y(0,"app-loading-spinner")}function we(n,e){if(n&1){let t=ee();l(0,"button",13),T("click",function(){let o=w(t).$implicit,d=f(2);return I(d.selectAnswer(o.value))}),s(1),a()}if(n&2){let t=e.$implicit,r=f(2);ue("quiz__option--selected",r.answers()[r.step()]===t.value),i(),g(" ",t.label," ")}}function Ie(n,e){if(n&1){let t=ee();l(0,"button",14),T("click",function(){w(t);let o=f(2);return I(o.step.set(o.step()-1))}),s(1,"Back"),a()}}function Te(n,e){if(n&1&&(l(0,"div",5),Y(1,"div",6),a(),l(2,"div",7)(3,"h2",8),s(4),a(),l(5,"div",9),X(6,we,2,3,"button",10,ye),a(),l(8,"div",11),u(9,Ie,2,0,"button",12),a()()),n&2){let t=f();i(),ce("width",t.progressPct(),"%"),i(3),E(t.currentStep().question),i(2),Z(t.currentStep().options),i(3),_(t.step()>0?9:-1)}}function Ee(n,e){if(n&1&&s(0),n&2){let t=f(3);g(" \xB7 Avg ",t.avgMatchScore(),"% match ")}}function qe(n,e){if(n&1&&(l(0,"p",16),s(1),u(2,Ee,1,1),a()),n&2){let t=f(2);i(),g(" Shuffled from ",t.poolSize()," matching films "),i(),_(t.avgMatchScore()>0?2:-1)}}function De(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Spanning ",e))}function Pe(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Avg rating: \u2605 ",e))}function ke(n,e){if(n&1&&(l(0,"p",17),s(1),a()),n&2){let t=f(2);i(),ae("",t.resultStreamableCount()," of ",t.results().length," free to watch")}}function Qe(n,e){if(n&1&&(l(0,"p",17),s(1),a()),n&2){let t=f(3);i(),g("",t.resultUniqueDirectors()," different directors")}}function Ne(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Average release year: ",e))}function Ae(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," languages represented"))}function Oe(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," genres covered"))}function Re(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Oldest from ",e))}function Le(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Top pick: ",e))}function Fe(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Avg age: ",e," years"))}function Ye(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," co-directed films"))}function Ve(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," non-English films"))}function We(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," silent-era films (pre-1930)"))}function $e(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Median year: ",e))}function He(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% free to watch"))}function je(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% co-directed"))}function Be(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Avg title: ",e," characters"))}function Ue(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," rated 8.0+"))}function Ge(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g('Longest: "',e,'"'))}function Je(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g('Shortest: "',e,'"'))}function Ke(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Top director: ",e))}function Xe(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g('Newest: "',e,'"'))}function Ze(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g('Oldest: "',e,'"'))}function et(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Median rating: \u2605 ",e))}function tt(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% non-English"))}function nt(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% from silent era"))}function it(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% pre-1940"))}function ot(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," unique directors"))}function at(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Avg ",e," directors per film"))}function lt(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("Avg ",e," genres per film"))}function rt(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% have poster art"))}function st(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% linked to IMDb"))}function dt(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% on YouTube"))}function ct(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e," on Internet Archive"))}function ut(n,e){n&1&&(l(0,"p",17),s(1),a()),n&2&&(i(),g("",e,"% on IA"))}function _t(n,e){if(n&1&&(u(0,Qe,2,1,"p",17),u(1,Ne,2,1,"p",17),u(2,Ae,2,1,"p",17),u(3,Oe,2,1,"p",17),u(4,Re,2,1,"p",17),u(5,Le,2,1,"p",17),u(6,Fe,2,1,"p",17),u(7,Ye,2,1,"p",17),u(8,Ve,2,1,"p",17),u(9,We,2,1,"p",17),u(10,$e,2,1,"p",17),u(11,He,2,1,"p",17),u(12,je,2,1,"p",17),u(13,Be,2,1,"p",17),u(14,Ue,2,1,"p",17),u(15,Ge,2,1,"p",17),u(16,Je,2,1,"p",17),u(17,Ke,2,1,"p",17),u(18,Xe,2,1,"p",17),u(19,Ze,2,1,"p",17),u(20,et,2,1,"p",17),u(21,tt,2,1,"p",17),u(22,nt,2,1,"p",17),u(23,it,2,1,"p",17),u(24,ot,2,1,"p",17),u(25,at,2,1,"p",17),u(26,lt,2,1,"p",17),u(27,rt,2,1,"p",17),u(28,st,2,1,"p",17),u(29,dt,2,1,"p",17),u(30,ct,2,1,"p",17),u(31,ut,2,1,"p",17)),n&2){let t,r,o,d,v,x,y,c,h,b,S,q,z,V,W,$,H,j,k,Q,N,A,D,B,U,O,G,J,K,R,L,C=f(2);_(C.resultUniqueDirectors()>1?0:-1),i(),_((t=C.resultAvgYear())?1:-1,t),i(),_((r=C.resultLanguageCount())?2:-1,r),i(),_((o=C.resultGenreCount())?3:-1,o),i(),_((d=C.resultOldestYear())?4:-1,d),i(),_((v=C.resultHighestRated())?5:-1,v),i(),_((x=C.resultAvgFilmAge())?6:-1,x),i(),_((y=C.resultCoDirectedCount())?7:-1,y),i(),_((c=C.resultNonEnglishCount())?8:-1,c),i(),_((h=C.resultSilentEraCount())?9:-1,h),i(),_((b=C.resultMedianYear())?10:-1,b),i(),_((S=C.resultStreamablePct())?11:-1,S),i(),_((q=C.resultCoDirectedPct())?12:-1,q),i(),_((z=C.resultAvgTitleLength())?13:-1,z),i(),_((V=C.resultHighlyRatedCount())?14:-1,V),i(),_((W=C.resultLongestTitle())?15:-1,W),i(),_(($=C.resultShortestTitle())?16:-1,$),i(),_((H=C.resultTopDirector())?17:-1,H),i(),_((j=C.resultNewestTitle())?18:-1,j),i(),_((k=C.resultOldestTitle())?19:-1,k),i(),_((Q=C.resultMedianRating())?20:-1,Q),i(),_((N=C.resultNonEnglishPct())?21:-1,N),i(),_((A=C.resultSilentEraPct())?22:-1,A),i(),_((D=C.resultPreWarPct())?23:-1,D),i(),_((B=C.resultUniqueDirectorCount())?24:-1,B),i(),_((U=C.resultAvgDirectorCount())?25:-1,U),i(),_((O=C.resultAvgGenreCount())?26:-1,O),i(),_((G=C.resultPosterCoveragePct())?27:-1,G),i(),_((J=C.resultImdbLinkedPct())?28:-1,J),i(),_((K=C.resultYtStreamablePct())?29:-1,K),i(),_((R=C.resultIaStreamableCount())?30:-1,R),i(),_((L=C.resultIaStreamablePct())?31:-1,L)}}function mt(n,e){if(n&1&&(l(0,"span",20),s(1),a()),n&2){let t=e.$implicit;i(),E(t)}}function pt(n,e){n&1&&(l(0,"span",36),s(1,"Best Match"),a())}function gt(n,e){n&1&&(l(0,"span",37),s(1),a()),n&2&&(i(),g("",e,"% match"))}function Ct(n,e){if(n&1&&Y(0,"img",38),n&2){let t=f().$implicit;oe("src",t.posterUrl,se)("alt",t.title)}}function vt(n,e){if(n&1&&(l(0,"div",39)(1,"span"),s(2),a()()),n&2){let t=f().$implicit;i(2),E(t.title)}}function ft(n,e){if(n&1&&(l(0,"p",42),s(1),a()),n&2){let t=f().$implicit;i(),g("\u2605 ",t.voteAverage.toFixed(1))}}function ht(n,e){if(n&1&&(l(0,"span",44),s(1),a()),n&2){let t=e.$implicit;i(),E(t)}}function xt(n,e){n&1&&(l(0,"div",43),X(1,ht,2,1,"span",44,ie),a()),n&2&&(i(),Z(e))}function bt(n,e){if(n&1&&(l(0,"a",22),u(1,pt,2,0,"span",36)(2,gt,2,1,"span",37),u(3,Ct,1,2,"img",38)(4,vt,3,1,"div",39),l(5,"div",40)(6,"h3"),s(7),a(),l(8,"p",41),s(9),a(),u(10,ft,2,1,"p",42),u(11,xt,3,0,"div",43),a()()),n&2){let t,r,o=e.$implicit,d=f(2);oe("routerLink",_e(8,be,o.id)),i(),_(o.id===d.bestMatchId()?1:(t=d.matchScores().get(o.id))?2:-1,t),i(2),_(o.posterUrl?3:4),i(4),E(o.title),i(2),ae("",o.year," \xB7 ",o.genres.slice(0,2).join(", ")),i(),_(o.voteAverage>0?10:-1),i(),_((r=d.matchReasons().get(o.id))?11:-1,r)}}function yt(n,e){if(n&1){let t=ee();l(0,"div",3)(1,"h2"),s(2,"Your Recommendations"),a(),l(3,"p",15),s(4),a(),u(5,qe,3,2,"p",16),u(6,De,2,1,"p",17),u(7,Pe,2,1,"p",17),u(8,ke,2,2,"p",17),l(9,"button",18),T("click",function(){w(t);let o=f();return I(o.showMoreResults.set(!o.showMoreResults()))}),s(10),a(),u(11,_t,32,32),l(12,"div",19),X(13,mt,2,1,"span",20,ie),a(),l(15,"div",21),X(16,bt,12,10,"a",22,ze),a(),l(18,"div",23)(19,"button",24),T("click",function(){w(t);let o=f();return I(o.shuffle())}),s(20,"Shuffle"),a(),l(21,"button",25),T("click",function(){w(t);let o=f();return I(o.addAllToWatchlist())}),te(),l(22,"svg",26),Y(23,"line",27)(24,"line",28),a(),s(25," Add All to Watchlist "),a(),ne(),l(26,"button",29),T("click",function(){w(t);let o=f();return I(o.shareResults())}),te(),l(27,"svg",30),Y(28,"circle",31)(29,"circle",32)(30,"circle",33)(31,"line",34)(32,"line",35),a(),s(33," Share Results "),a(),ne(),l(34,"button",14),T("click",function(){w(t);let o=f();return I(o.restart())}),s(35,"Start Over"),a()()()}if(n&2){let t,r,o=f();i(4),g("Based on your preferences, here are ",o.results().length," films we think you'll enjoy:"),i(),_(o.poolSize()>o.results().length?5:-1),i(),_((t=o.resultDecadeRange())?6:-1,t),i(),_((r=o.resultAvgRating())?7:-1,r),i(),_(o.resultStreamableCount()>0?8:-1),i(2),E(o.showMoreResults()?"Less":"More stats"),i(),_(o.showMoreResults()?11:-1),i(2),Z(o.selectedPrefs()),i(3),Z(o.results())}}var xe=class n{showMoreResults=P(!1);catalog=F(Ce);collection=F(ve);notifications=F(fe);titleService=F(pe);metaService=F(me);steps=[{question:"What era interests you most?",options:[{label:"Silent era (pre-1930)",value:"silent"},{label:"Golden age (1930s\u20131940s)",value:"golden"},{label:"Post-war (1950s\u20131960s)",value:"postwar"},{label:"Surprise me!",value:"any"}]},{question:"What genre are you in the mood for?",options:[{label:"Drama",value:"Drama"},{label:"Comedy",value:"Comedy"},{label:"Horror / Thriller",value:"Horror"},{label:"Anything goes",value:"any"}]},{question:"What mood are you looking for?",options:[{label:"Something thought-provoking",value:"deep"},{label:"Light and fun",value:"light"},{label:"Dark and intense",value:"dark"},{label:"No preference",value:"any"}]},{question:"How important are ratings?",options:[{label:"Only the best (8+)",value:"high"},{label:"Well-regarded (6+)",value:"medium"},{label:"Hidden gems \u2014 ratings don't matter",value:"low"}]},{question:"Any language preference?",options:[{label:"English only",value:"english"},{label:"World cinema (non-English)",value:"foreign"},{label:"No preference",value:"any"}]},{question:"Must it be free to watch?",options:[{label:"Yes, free streaming only",value:"free"},{label:"No, show me everything",value:"any"}]}];step=P(0);answers=P({});showResults=P(!1);results=P([]);poolSize=P(0);bestMatchId=m(()=>{let e=this.matchScores();if(e.size<2)return null;let t=null,r=0;for(let[o,d]of e)d>r&&(r=d,t=o);return r>50?t:null});resultIdx=m(()=>{let e=this.results(),t=e.length,r=new Date().getFullYear(),o=0,d=0,v=0,x=0,y=0,c=0,h=0,b=0,S=0,q=0,z=0,V=0,W=0,$=0,H=0,j=0,k=1/0,Q=0,N="",A=e[0]?.title??"",D=null,B=null,U=null,O=new Set,G=new Set,J=new Set,K=new Set,R=new Map,L=[],C=[];for(let p of e){p.voteAverage>0&&(o+=p.voteAverage,d++,C.push(p.voteAverage)),p.voteAverage>=8&&q++,(!D||p.voteAverage>D.voteAverage)&&(D=p),v+=p.year,L.push(p.year),p.year<k&&(k=p.year,B=p),p.year>Q&&(Q=p.year,U=p),O.add(Math.floor(p.year/10)*10),x+=p.title.length,p.title.length>N.length&&(N=p.title),p.title.length<A.length&&(A=p.title),p.isStreamable&&y++,p.language&&p.language!=="English"&&p.language!=="en"&&c++,p.year<1930&&h++,p.year<1940&&b++,p.directors.length>1&&S++,z+=p.directors.length,V+=p.genres.length,p.posterUrl&&W++,p.imdbId&&$++,p.youtubeId&&H++,p.internetArchiveId&&j++,p.language&&J.add(p.language);for(let M of p.genres)G.add(M);for(let M of p.directors)K.add(M),R.set(M,(R.get(M)??0)+1)}return L.sort((p,M)=>p-M),C.sort((p,M)=>p-M),{n:t,now:r,ratingSum:o,ratedCount:d,yearSum:v,titleLenSum:x,streamable:y,nonEnglish:c,silentEra:h,preWar:b,coDirected:S,highlyRated8:q,dirLenSum:z,genreLenSum:V,withPoster:W,withImdb:$,withYt:H,withIa:j,minYear:k,maxYear:Q,longestTitle:N,shortestTitle:A,bestRated:D,oldest:B,newest:U,decadeCount:O.size,decades:O,genreCount:G.size,langCount:J.size,dirCount:K.size,dirCounts:R,years:L,ratings:C}});resultDecadeRange=m(()=>{let e=this.resultIdx();if(e.n<2||e.decadeCount<2)return null;let t=[...e.decades].sort((r,o)=>r-o);return`${t[0]}s\u2013${t[t.length-1]}s`});resultAvgRating=m(()=>{let e=this.resultIdx();return e.ratedCount>0?(e.ratingSum/e.ratedCount).toFixed(1):null});resultStreamableCount=m(()=>this.resultIdx().streamable);resultUniqueDirectors=m(()=>this.resultIdx().dirCount);resultGenreCount=m(()=>{let e=this.resultIdx();return e.n>=2&&e.genreCount>2?e.genreCount:null});resultLanguageCount=m(()=>{let e=this.resultIdx();return e.n>=2&&e.langCount>1?e.langCount:null});resultAvgYear=m(()=>{let e=this.resultIdx();return e.n>=2?Math.round(e.yearSum/e.n):null});resultHighestRated=m(()=>{let e=this.resultIdx();return e.n<2||!e.bestRated||e.bestRated.voteAverage<=0?null:`${e.bestRated.title.length>25?e.bestRated.title.slice(0,23)+"...":e.bestRated.title} (${e.bestRated.voteAverage.toFixed(1)})`});resultAvgFilmAge=m(()=>{let e=this.resultIdx();return e.n>=2?Math.round(e.years.reduce((t,r)=>t+(e.now-r),0)/e.n):null});resultCoDirectedCount=m(()=>{let e=this.resultIdx();return e.n>=3&&e.coDirected>0?e.coDirected:null});resultNonEnglishCount=m(()=>{let e=this.resultIdx();return e.n>=3&&e.nonEnglish>0?e.nonEnglish:null});resultSilentEraCount=m(()=>{let e=this.resultIdx();return e.n>=3&&e.silentEra>0?e.silentEra:null});resultStreamablePct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.streamable/e.n*100);return t>0?t:null});resultMedianYear=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.floor(e.years.length/2);return e.years.length%2===0?Math.round((e.years[t-1]+e.years[t])/2):e.years[t]});resultHighlyRatedCount=m(()=>{let e=this.resultIdx();return e.n>=3&&e.highlyRated8>0?e.highlyRated8:null});resultAvgTitleLength=m(()=>{let e=this.resultIdx();return e.n>=3?Math.round(e.titleLenSum/e.n):null});resultCoDirectedPct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.coDirected/e.n*100);return t>0&&t<100?t:null});resultOldestYear=m(()=>{let e=this.resultIdx();return e.n>=2&&e.maxYear-e.minYear>=5?e.minYear:null});resultLongestTitle=m(()=>{let e=this.resultIdx();return e.n>=3&&e.longestTitle.length>=20?e.longestTitle:null});resultShortestTitle=m(()=>{let e=this.resultIdx();return e.n>=3&&e.shortestTitle.length<=10?e.shortestTitle:null});resultTopDirector=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=[...e.dirCounts.entries()].sort((r,o)=>o[1]-r[1])[0];return t&&t[1]>=2?t[0]:null});resultSilentEraPct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.silentEra/e.n*100);return t>0&&t<100?t:null});resultAvgGenreCount=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=e.genreLenSum/e.n;return t>=1.5?t.toFixed(1):null});resultPosterCoveragePct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.withPoster/e.n*100);return t>0&&t<100?t:null});resultImdbLinkedPct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.withImdb/e.n*100);return t>0&&t<100?t:null});resultYtStreamablePct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.withYt/e.n*100);return t>0&&t<100?t:null});resultAvgDirectorCount=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=e.dirLenSum/e.n;return t>=1.1?t.toFixed(1):null});resultUniqueDirectorCount=m(()=>{let e=this.resultIdx();return e.n>=3&&e.dirCount>=3?e.dirCount:null});resultPreWarPct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.preWar/e.n*100);return t>0&&t<100?t:null});resultNonEnglishPct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.nonEnglish/e.n*100);return t>0&&t<100?t:null});resultMedianRating=m(()=>{let e=this.resultIdx();if(e.ratings.length<3)return null;let t=Math.floor(e.ratings.length/2);return(e.ratings.length%2===0?(e.ratings[t-1]+e.ratings[t])/2:e.ratings[t]).toFixed(1)});resultOldestTitle=m(()=>{let e=this.resultIdx();return e.n>=2&&e.oldest?e.oldest.title:null});resultNewestTitle=m(()=>{let e=this.resultIdx();return e.n>=2&&e.newest?e.newest.title:null});resultIaStreamableCount=m(()=>{let e=this.resultIdx();return e.n>=3&&e.withIa>0?e.withIa:null});resultIaStreamablePct=m(()=>{let e=this.resultIdx();if(e.n<3)return null;let t=Math.round(e.withIa/e.n*100);return t>0&&t<100?t:null});avgMatchScore=m(()=>{let e=this.matchScores();if(e.size===0)return 0;let t=[...e.values()].reduce((r,o)=>r+o,0);return Math.round(t/e.size)});currentStep=m(()=>this.steps[this.step()]);progressPct=m(()=>(this.step()+1)/this.steps.length*100);selectedPrefs=m(()=>{let e=this.answers(),t=[];for(let r=0;r<this.steps.length;r++){let o=e[r];if(o&&o!=="any"){let d=this.steps[r].options.find(v=>v.value===o);d&&t.push(d.label)}}return t});matchScores=m(()=>{let e=this.answers(),t=this.results(),r=new Map,o=Object.values(e).filter(d=>d!=="any").length;if(o===0)return r;for(let d of t){let v=0,x=e[0];(x==="silent"&&d.year<1930||x==="golden"&&d.year>=1930&&d.year<1950||x==="postwar"&&d.year>=1950)&&v++;let y=e[1];y&&y!=="any"&&d.genres.some(z=>z.toLowerCase().includes(y.toLowerCase()))&&v++;let c=e[2];(c==="light"&&d.genres.some(z=>["Comedy","Musical","Romance","Animation"].includes(z))||c==="dark"&&d.genres.some(z=>["Horror","Thriller","Crime","War","Mystery"].includes(z))||c==="deep"&&d.genres.some(z=>["Drama","History","Documentary"].includes(z)))&&v++;let h=e[3];(h==="high"&&d.voteAverage>=8||h==="medium"&&d.voteAverage>=6)&&v++;let b=e[4];(b==="english"&&(!d.language||d.language==="English")||b==="foreign"&&d.language&&d.language!=="English")&&v++,e[5]==="free"&&d.isStreamable&&v++;let q=Math.round(v/o*100);r.set(d.id,Math.min(q,100))}return r});matchReasons=m(()=>{let e=this.answers(),t=this.results(),r=new Map;for(let o of t){let d=[],v=e[0];v==="silent"&&o.year<1930?d.push("Silent era"):v==="golden"&&o.year>=1930&&o.year<1950?d.push("Golden age"):v==="postwar"&&o.year>=1950&&d.push("Post-war");let x=e[1];if(x&&x!=="any"){let y=o.genres.find(c=>c.toLowerCase().includes(x.toLowerCase()));y&&d.push(y)}o.voteAverage>=8?d.push("Highly rated"):o.voteAverage>=7&&d.push("Well rated"),o.language&&o.language!=="English"&&d.push(o.language),o.isStreamable&&d.push("Free"),r.set(o.id,d.slice(0,3))}return r});ngOnInit(){this.catalog.load(),this.titleService.setTitle("Film Quiz \u2014 BW Cinema");let e="Take a short quiz to find the perfect classic black-and-white film to watch.";this.metaService.updateTag({name:"description",content:e}),this.metaService.updateTag({property:"og:description",content:e}),this.metaService.updateTag({name:"twitter:description",content:e})}selectAnswer(e){this.answers.update(t=>re(le({},t),{[this.step()]:e})),this.step()<this.steps.length-1?this.step.update(t=>t+1):this.computeResults()}shuffle(){this.computeResults()}addAllToWatchlist(){let e=this.results(),t=0;for(let r of e)!this.collection.isInWatchlist(r.id)&&!this.collection.isWatched(r.id)&&(this.collection.addToWatchlist(r.id),t++);t>0?this.notifications.show(`Added ${t} film${t>1?"s":""} to watchlist`,"success"):this.notifications.show("All films already in your collection","info")}shareResults(){let e=this.results();if(e.length===0)return;let r=`My BW Cinema quiz picks:

${e.map(o=>`${o.title} (${o.year})`).join(`
`)}

Take the quiz: ${window.location.origin}/quiz`;navigator.clipboard.writeText(r).then(()=>{this.notifications.show("Results copied to clipboard","success")}).catch(()=>{this.notifications.show("Failed to copy","error")})}restart(){this.step.set(0),this.answers.set({}),this.showResults.set(!1),this.results.set([])}computeResults(){let e=this.answers(),t=this.catalog.movies().filter(c=>c.isStreamable),r=e[0];r==="silent"?t=t.filter(c=>c.year<1930):r==="golden"?t=t.filter(c=>c.year>=1930&&c.year<1950):r==="postwar"&&(t=t.filter(c=>c.year>=1950));let o=e[1];o&&o!=="any"&&(t=t.filter(c=>c.genres.some(h=>h.toLowerCase().includes(o.toLowerCase()))));let d=e[2];if(d==="light"){let c=["comedy","musical","romance","animation"];t=t.filter(h=>h.genres.some(b=>c.some(S=>b.toLowerCase().includes(S))))}else if(d==="dark"){let c=["horror","thriller","crime","war","mystery","noir"];t=t.filter(h=>h.genres.some(b=>c.some(S=>b.toLowerCase().includes(S))))}else if(d==="deep"){let c=["drama","history","documentary"];t=t.filter(h=>h.genres.some(b=>c.some(S=>b.toLowerCase().includes(S))))}let v=e[3];v==="high"?t=t.filter(c=>c.voteAverage>=8):v==="medium"&&(t=t.filter(c=>c.voteAverage>=6));let x=e[4];x==="english"?t=t.filter(c=>!c.language||c.language==="English"):x==="foreign"&&(t=t.filter(c=>c.language&&c.language!=="English")),e[5]==="free"&&(t=t.filter(c=>c.isStreamable)),this.poolSize.set(t.length);for(let c=t.length-1;c>0;c--){let h=Math.floor(Math.random()*(c+1));[t[c],t[h]]=[t[h],t[c]]}this.results.set(t.slice(0,5)),this.showResults.set(!0),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=de({type:n,selectors:[["app-quiz"]],decls:9,vars:1,consts:[[1,"quiz","container"],[1,"quiz__subtitle"],["role","alert",1,"catalog-error"],[1,"quiz__results"],[3,"click"],[1,"quiz__progress"],[1,"quiz__progress-bar"],[1,"quiz__step"],[1,"quiz__question"],[1,"quiz__options"],[1,"quiz__option",3,"quiz__option--selected"],[1,"quiz__nav"],[1,"btn-ghost"],[1,"quiz__option",3,"click"],[1,"btn-ghost",3,"click"],[1,"quiz__results-subtitle"],[1,"quiz__pool-note"],[1,"quiz__decade-range"],[1,"quiz__more-toggle",3,"click"],[1,"quiz__prefs"],[1,"quiz__pref-chip"],[1,"quiz__result-grid"],[1,"quiz__result-card",3,"routerLink"],[1,"quiz__result-actions"],[1,"btn-secondary",3,"click"],[1,"quiz__add-all",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"quiz__share-btn",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"quiz__best-match"],[1,"quiz__match-score"],["loading","lazy",3,"src","alt"],[1,"quiz__poster-placeholder"],[1,"quiz__result-info"],[1,"quiz__result-meta"],[1,"quiz__result-rating"],[1,"quiz__match-tags"],[1,"quiz__match-tag"]],template:function(t,r){if(t&1&&(l(0,"div",0)(1,"h1"),s(2,"What Should I Watch?"),a(),l(3,"p",1),s(4,"Answer a few questions and we'll recommend the perfect classic film."),a(),u(5,Se,5,1,"div",2)(6,Me,1,0,"app-loading-spinner")(7,Te,10,4)(8,yt,36,7,"div",3),a()),t&2){let o;i(5),_((o=r.catalog.error())?5:r.catalog.loading()?6:r.showResults()?8:7,o)}},dependencies:[ge,he],styles:[".quiz[_ngcontent-%COMP%]{padding:var(--space-xl) 0;max-width:700px}.quiz__subtitle[_ngcontent-%COMP%]{color:var(--text-tertiary);margin:0 0 var(--space-xl)}.quiz__progress[_ngcontent-%COMP%]{height:4px;background-color:var(--bg-raised);border-radius:2px;margin-bottom:var(--space-xl);overflow:hidden}.quiz__progress-bar[_ngcontent-%COMP%]{height:100%;background-color:var(--accent-gold);border-radius:2px;transition:width .3s ease}.quiz__step[_ngcontent-%COMP%]{text-align:center}.quiz__question[_ngcontent-%COMP%]{margin-bottom:var(--space-xl)}.quiz__options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);max-width:400px;margin:0 auto var(--space-xl)}.quiz__option[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);background-color:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);color:var(--text-primary);font-size:1rem;cursor:pointer;transition:all .2s;text-align:left}.quiz__option[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);background-color:var(--accent-gold-dim)}.quiz__option--selected[_ngcontent-%COMP%]{border-color:var(--accent-gold);background-color:var(--accent-gold-dim);color:var(--accent-gold);font-weight:600}.quiz__nav[_ngcontent-%COMP%]{display:flex;justify-content:center}.quiz__results[_ngcontent-%COMP%]{text-align:center}.quiz__results-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 var(--space-xl)}.quiz__prefs[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);justify-content:center;flex-wrap:wrap;margin-bottom:var(--space-lg)}.quiz__pref-chip[_ngcontent-%COMP%]{font-size:.75rem;padding:3px 10px;border-radius:10px;background:var(--bg-surface);border:1px solid var(--border);color:var(--text-secondary)}.quiz__result-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:var(--space-md);margin-bottom:var(--space-xl);text-align:left}.quiz__result-card[_ngcontent-%COMP%]{text-decoration:none;color:inherit;transition:transform .2s}.quiz__result-card[_ngcontent-%COMP%]:hover{color:inherit}@media(hover:hover)and (pointer:fine){.quiz__result-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}}.quiz__match-score[_ngcontent-%COMP%]{display:inline-block;font-size:.7rem;font-weight:700;color:var(--accent-gold);background:var(--accent-gold-dim);padding:2px 8px;border-radius:8px;margin-bottom:var(--space-xs)}.quiz__best-match[_ngcontent-%COMP%]{display:inline-block;font-size:.7rem;font-weight:700;color:#fff;background:#198754e6;padding:2px 8px;border-radius:8px;margin-bottom:var(--space-xs)}.quiz__result-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;aspect-ratio:2 / 3;object-fit:cover;border-radius:var(--radius-lg);box-shadow:var(--shadow-poster);margin-bottom:var(--space-sm)}.quiz__poster-placeholder[_ngcontent-%COMP%]{width:100%;aspect-ratio:2 / 3;background:var(--bg-raised);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);color:var(--text-tertiary);text-align:center;padding:var(--space-sm);margin-bottom:var(--space-sm)}.quiz__result-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;margin:0 0 2px}.quiz__result-meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);margin:0}.quiz__result-rating[_ngcontent-%COMP%]{font-size:.85rem;color:var(--accent-gold);font-weight:700;margin:4px 0 0}.quiz__match-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px;margin-top:4px}.quiz__match-tag[_ngcontent-%COMP%]{font-size:.65rem;padding:1px 6px;border-radius:6px;background:var(--accent-gold-dim);color:var(--accent-gold);font-weight:600;white-space:nowrap}.quiz__result-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:center;flex-wrap:wrap}.quiz__add-all[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:var(--space-sm) var(--space-lg);background:var(--accent-gold-dim);border:1px solid var(--accent-gold);border-radius:var(--radius-lg);color:var(--accent-gold);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.quiz__add-all[_ngcontent-%COMP%]:hover{background:var(--accent-gold);color:var(--bg-deep)}.quiz__share-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:var(--space-sm) var(--space-lg);background:var(--bg-surface);border:1px solid var(--border);border-radius:var(--radius-lg);color:var(--text-secondary);font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s}.quiz__share-btn[_ngcontent-%COMP%]:hover{border-color:var(--accent-gold);color:var(--accent-gold)}.quiz__pool-note[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);margin:calc(-1 * var(--space-md)) 0 var(--space-lg)}.quiz__decade-range[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);margin:0 0 var(--space-sm)}.quiz__more-toggle[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-tertiary);font-size:.75rem;cursor:pointer;padding:var(--space-xs) 0;opacity:.7}.quiz__more-toggle[_ngcontent-%COMP%]:hover{opacity:1}@media(max-width:480px){.quiz__result-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"],changeDetection:0})};export{xe as QuizComponent};
