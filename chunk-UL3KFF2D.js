import{a as W}from"./chunk-NFEJ3R32.js";import{a as G}from"./chunk-7YNDMGGC.js";import{$ as m,Aa as k,F as P,Ga as A,J as E,Ja as j,K as I,O as r,Oa as M,P as T,R as y,T as L,Z as z,_ as s,ca as D,da as V,ea as u,fa as i,fb as N,ga as a,ha as v,la as h,na as b,pa as d,v as g,wa as F,x as f,y as C,ya as c,z as x,za as p}from"./chunk-HADTIDD7.js";var w=class e{el=g(E);renderer=g(T);observer=null;ngOnInit(){let n=this.el.nativeElement;this.renderer.setStyle(n,"opacity","0"),this.renderer.setStyle(n,"transition","opacity 0.3s ease");let t=n.getAttribute("src");t&&"IntersectionObserver"in window&&(n.setAttribute("data-src",t),n.removeAttribute("src"),this.observer=new IntersectionObserver(o=>{for(let l of o)if(l.isIntersecting){let _=l.target,S=_.getAttribute("data-src");S&&(_.src=S,_.removeAttribute("data-src")),this.observer?.unobserve(_)}},{rootMargin:"200px 0px"}),this.observer.observe(n)),n.addEventListener("load",this.onLoad),n.addEventListener("error",this.onLoad)}ngOnDestroy(){this.observer?.disconnect();let n=this.el.nativeElement;n.removeEventListener("load",this.onLoad),n.removeEventListener("error",this.onLoad)}onLoad=()=>{this.renderer.setStyle(this.el.nativeElement,"opacity","1")};static \u0275fac=function(t){return new(t||e)};static \u0275dir=L({type:e,selectors:[["img","appLazyImage",""]]})};var B=e=>["/movie",e];function $(e,n){if(e&1){let t=h();i(0,"img",25),b("load",function(){f(t);let l=d();return C(l.onImageLoad())})("error",function(){f(t);let l=d();return C(l.imgFailed.set(!0))}),a()}if(e&2){let t=d();F("loaded",t.imgLoaded()),u("src",t.movie().posterUrl,I)("alt",t.movie().title+" poster")}}function q(e,n){if(e&1&&(i(0,"span",28),c(1),a()),e&2){let t=d(2);r(),p(t.movie().directors[0])}}function H(e,n){if(e&1&&(i(0,"div",3)(1,"span",26),c(2),a(),i(3,"span",27),c(4),a(),s(5,q,2,1,"span",28),a()),e&2){let t=d();r(2),p(t.movie().title),r(2),p(t.movie().year),r(),m(t.movie().directors.length>0?5:-1)}}function J(e,n){e&1&&(i(0,"span",5),c(1),a()),e&2&&(r(),k("",n,"/10"))}function K(e,n){if(e&1&&(i(0,"span",6),c(1),a()),e&2){let t=d();r(),p(t.movie().voteAverage.toFixed(1))}}function Q(e,n){e&1&&(i(0,"span",7),c(1,"IA"),a())}function X(e,n){e&1&&(i(0,"span",8),c(1,"YT"),a())}function Z(e,n){e&1&&(i(0,"span",9),c(1,"IMDb"),a())}function ee(e,n){if(e&1&&(i(0,"span",11),c(1),a()),e&2){let t=d();r(),p(t.movie().directors[0])}}function te(e,n){if(e&1&&(i(0,"span",12),c(1),a()),e&2){let t=d();r(),p(t.movie().genres.slice(0,2).join(" / "))}}function ne(e,n){e&1&&(i(0,"span",13),x(),i(1,"svg",29),v(2,"path",30),a()())}function ie(e,n){if(e&1){let t=h();i(0,"button",31),b("click",function(l){f(t);let _=d();return C(_.onAction(l))}),x(),i(1,"svg",32),v(2,"polyline",33),a()()}}function oe(e,n){if(e&1){let t=h();i(0,"button",34),b("click",function(l){f(t);let _=d();return C(_.removeFromWatchlist(l))}),x(),i(1,"svg",32),v(2,"polyline",33),a()()}}function ae(e,n){if(e&1){let t=h();i(0,"button",35),b("click",function(l){f(t);let _=d();return C(_.addToWatchlist(l))}),x(),i(1,"svg",36),v(2,"line",37)(3,"line",38),a()()}if(e&2){let t=d();z("aria-label","Add "+t.movie().title+" to watchlist")}}function re(e,n){if(e&1&&(i(0,"span",39),c(1,"\xB7"),a(),i(2,"span",40),c(3),a()),e&2){let t=d();r(3),p(t.movie().genres[0])}}function ce(e,n){if(e&1&&(i(0,"span",22),c(1),a()),e&2){let t=d();u("title",A("Co-directed by ",t.movie().directors.join(", "))),r(),k("",t.movie().directors.length,"dir")}}function de(e,n){if(e&1&&(i(0,"span",23),c(1),a()),e&2){let t=d();r(),p((t.movie().language??"").toUpperCase())}}function le(e,n){e&1&&(i(0,"span",24),c(1,"Silent"),a())}var O=class e{movie=M.required();imgFailed=P(!1);imgLoaded=P(!1);collection=g(W);notifications=g(G);onImageLoad(){this.imgLoaded.set(!0)}addToWatchlist(n){n.preventDefault(),n.stopPropagation(),this.collection.addToWatchlist(this.movie().id),this.notifications.show(`Added "${this.movie().title}" to watchlist`,"success")}removeFromWatchlist(n){n.preventDefault(),n.stopPropagation(),this.collection.removeFromWatchlist(this.movie().id),this.notifications.show("Removed from watchlist","info")}onAction(n){n.preventDefault(),n.stopPropagation()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=y({type:e,selectors:[["app-movie-card"]],inputs:{movie:[1,"movie"]},decls:28,vars:16,consts:[[1,"card",3,"routerLink"],[1,"card__poster"],["appLazyImage","",3,"src","alt","loaded"],[1,"card__poster-placeholder"],["aria-hidden","true",1,"card__overlay"],["title","Your rating",1,"card__user-rating"],[1,"card__rating"],[1,"card__badge","card__badge--ia"],[1,"card__badge","card__badge--yt"],[1,"card__badge","card__badge--imdb"],["aria-hidden","true",1,"card__hover-info"],[1,"card__hover-director"],[1,"card__hover-genres"],["aria-label","Favorited",1,"card__heart"],[1,"card__actions"],["aria-label","Watched",1,"card__action","card__action--watched"],["aria-label","In watchlist",1,"card__action","card__action--inlist"],[1,"card__action"],[1,"card__info"],[1,"card__title"],[1,"card__meta"],[1,"card__year"],[1,"card__co-dir",3,"title"],[1,"card__lang"],[1,"card__silent"],["appLazyImage","",3,"load","error","src","alt"],[1,"card__placeholder-title"],[1,"card__placeholder-year"],[1,"card__placeholder-director"],["width","16","height","16","viewBox","0 0 24 24","fill","currentColor"],["d","M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"],["aria-label","Watched",1,"card__action","card__action--watched",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3","stroke-linecap","round","stroke-linejoin","round"],["points","20 6 9 17 4 12"],["aria-label","In watchlist",1,"card__action","card__action--inlist",3,"click"],[1,"card__action",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"card__divider"],[1,"card__genre"]],template:function(t,o){if(t&1&&(i(0,"a",0)(1,"div",1),s(2,$,1,4,"img",2)(3,H,6,3,"div",3),i(4,"div",4),s(5,J,2,1,"span",5)(6,K,2,1,"span",6),s(7,Q,2,0,"span",7)(8,X,2,0,"span",8)(9,Z,2,0,"span",9),a(),i(10,"div",10),s(11,ee,2,1,"span",11),s(12,te,2,1,"span",12),a(),s(13,ne,3,0,"span",13),i(14,"div",14),s(15,ie,3,0,"button",15)(16,oe,3,0,"button",16)(17,ae,4,1,"button",17),a()(),i(18,"div",18)(19,"h3",19),c(20),a(),i(21,"div",20)(22,"span",21),c(23),a(),s(24,re,4,1),s(25,ce,2,3,"span",22),s(26,de,2,1,"span",23),s(27,le,2,0,"span",24),a()()()),t&2){let l;u("routerLink",j(14,B,o.movie().id)),r(2),m(o.movie().posterUrl&&!o.imgFailed()?2:3),r(3),m((l=o.collection.getUserRating(o.movie().id))?5:o.movie().voteAverage>0?6:-1,l),r(2),m(o.movie().internetArchiveId?7:o.movie().youtubeId?8:o.movie().imdbId?9:-1),r(4),m(o.movie().directors.length>0?11:-1),r(),m(o.movie().genres.length>0?12:-1),r(),m(o.collection.isFavorite(o.movie().id)?13:-1),r(2),m(o.collection.isWatched(o.movie().id)?15:o.collection.isInWatchlist(o.movie().id)?16:17),r(5),p(o.movie().title),r(3),p(o.movie().year),r(),m(o.movie().genres.length>0?24:-1),r(),m(o.movie().directors.length>1?25:-1),r(),m(o.movie().language&&o.movie().language!=="en"?26:-1),r(),m(o.movie().year<1930?27:-1)}},dependencies:[w,N],styles:[".card[_ngcontent-%COMP%]{display:block;text-decoration:none;color:inherit;border-radius:var(--radius-lg);overflow:hidden;transition:transform .25s ease,box-shadow .25s ease;cursor:pointer;background:transparent}@media(hover:hover)and (pointer:fine){.card[_ngcontent-%COMP%]:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 12px 40px #00000080}.card[_ngcontent-%COMP%]:hover   .card__poster[_ngcontent-%COMP%]{box-shadow:0 8px 32px #0009,0 0 0 1px var(--accent-gold)}.card[_ngcontent-%COMP%]:hover   .card__poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}}.card__poster[_ngcontent-%COMP%]{position:relative;aspect-ratio:2 / 3;background-color:var(--bg-raised);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-poster)}.card__poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease,filter .4s ease;filter:blur(8px)}.card__poster[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{filter:blur(0)}.card__poster-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:var(--space-lg);text-align:center;background:linear-gradient(170deg,#1a1a1a,#222 40%,#1a1a1a)}.card__placeholder-title[_ngcontent-%COMP%]{font-family:var(--font-heading);font-size:.95rem;color:var(--text-secondary);line-height:1.3;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.card__placeholder-year[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--accent-gold);font-weight:700;font-family:var(--font-heading);opacity:.6}.card__placeholder-director[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-tertiary);font-style:italic}.card__overlay[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);left:var(--space-sm);right:var(--space-sm);display:flex;justify-content:space-between;align-items:flex-start;pointer-events:none}.card__rating[_ngcontent-%COMP%]{background-color:#000000bf;color:var(--accent-gold);font-size:.8rem;font-weight:700;padding:3px 8px;border-radius:var(--radius-sm);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.card__user-rating[_ngcontent-%COMP%]{background-color:#198754d9;color:#fff;font-size:.75rem;font-weight:700;padding:3px 8px;border-radius:var(--radius-sm);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.card__badge[_ngcontent-%COMP%]{background-color:var(--accent-gold);color:var(--bg-deep);font-size:.7rem;font-weight:700;padding:3px 8px;border-radius:var(--radius-sm);text-transform:uppercase;letter-spacing:.05em;margin-left:auto}.card__badge--ia[_ngcontent-%COMP%]{background-color:#198754e6;color:#fff}.card__badge--yt[_ngcontent-%COMP%]{background-color:#ff0000d9;color:#fff}.card__badge--imdb[_ngcontent-%COMP%]{background-color:#f5c518d9;color:#000}.card__hover-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:var(--space-md) var(--space-sm) var(--space-sm);background:linear-gradient(to top,rgba(0,0,0,.85) 0%,transparent 100%);display:flex;flex-direction:column;gap:2px;opacity:0;transform:translateY(4px);transition:opacity .25s ease,transform .25s ease;pointer-events:none}@media(hover:hover)and (pointer:fine){.card[_ngcontent-%COMP%]:hover   .card__hover-info[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}}.card__hover-director[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:var(--accent-gold)}.card__hover-genres[_ngcontent-%COMP%]{font-size:.7rem;color:#ffffffb3}.card__lang[_ngcontent-%COMP%]{font-size:.65rem;font-weight:700;padding:1px 4px;border-radius:3px;background:var(--bg-raised);color:var(--text-tertiary);letter-spacing:.04em;margin-left:auto}.card__silent[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;padding:1px 4px;border-radius:3px;background:var(--accent-gold-dim);color:var(--accent-gold);letter-spacing:.04em}.card__heart[_ngcontent-%COMP%]{position:absolute;bottom:var(--space-sm);right:var(--space-sm);color:#e53e3e;filter:drop-shadow(0 1px 2px rgba(0,0,0,.5));pointer-events:none}.card__actions[_ngcontent-%COMP%]{position:absolute;bottom:var(--space-sm);left:var(--space-sm);display:flex;gap:4px;opacity:0;transition:opacity .2s ease;pointer-events:auto;z-index:2}@media(hover:hover)and (pointer:fine){.card[_ngcontent-%COMP%]:hover   .card__actions[_ngcontent-%COMP%]{opacity:1}}@media(hover:none){.card__actions[_ngcontent-%COMP%]{opacity:1}}.card__action[_ngcontent-%COMP%]{width:36px;height:36px;min-width:36px;min-height:36px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#000000b3;border:1px solid rgba(255,255,255,.2);color:#fff;cursor:pointer;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);transition:background-color .2s,border-color .2s,transform .15s}.card__action[_ngcontent-%COMP%]:hover{background:var(--accent-gold);border-color:var(--accent-gold);color:var(--bg-deep);transform:scale(1.15)}.card__action--watched[_ngcontent-%COMP%]{background:#198754cc;border-color:#198754e6;cursor:default}.card__action--inlist[_ngcontent-%COMP%]{background:#c8aa3cb3;border-color:var(--accent-gold)}.card__info[_ngcontent-%COMP%]{padding:10px 4px 4px}.card__title[_ngcontent-%COMP%]{font-family:var(--font-body);font-size:.9rem;font-weight:600;margin:0 0 2px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;color:var(--text-primary);line-height:1.3}.card__meta[_ngcontent-%COMP%]{display:flex;gap:5px;align-items:center}.card__year[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.8rem}.card__divider[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.7rem}.card__co-dir[_ngcontent-%COMP%]{font-size:.65rem;font-weight:600;padding:1px 4px;border-radius:3px;background:var(--accent-gold-dim);color:var(--accent-gold);letter-spacing:.02em}.card__genre[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:.8rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0})};var se=(e,n)=>n.id;function me(e,n){if(e&1&&(i(0,"div",1),v(1,"app-movie-card",3),a()),e&2){let t=n.$implicit;r(),u("movie",t)}}function pe(e,n){e&1&&(i(0,"div",2)(1,"p",4),c(2,"No films found matching your criteria."),a()())}var U=class e{movies=M.required();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=y({type:e,selectors:[["app-movie-grid"]],inputs:{movies:[1,"movies"]},decls:4,vars:1,consts:[["role","list","aria-label","Movie list",1,"grid"],["role","listitem"],[1,"grid__empty"],[3,"movie"],[1,"grid__empty-text"]],template:function(t,o){t&1&&(i(0,"div",0),D(1,me,2,1,"div",1,se,!1,pe,3,0,"div",2),a()),t&2&&(r(),V(o.movies()))},dependencies:[O],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(155px,1fr));gap:var(--space-lg) var(--space-md)}.grid__empty[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:var(--space-3xl) var(--space-lg)}.grid__empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);font-size:1.05rem}@media(min-width:1200px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(170px,1fr))}}@media(max-width:480px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--space-md) var(--space-sm)}}"],changeDetection:0})};export{U as a};
